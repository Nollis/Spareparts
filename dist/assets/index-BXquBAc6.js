var Tl=Object.defineProperty;var Ys=t=>{throw TypeError(t)};var Ll=(t,r,a)=>r in t?Tl(t,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[r]=a;var Oa=(t,r,a)=>Ll(t,typeof r!="symbol"?r+"":r,a),ps=(t,r,a)=>r.has(t)||Ys("Cannot "+a);var oe=(t,r,a)=>(ps(t,r,"read from private field"),a?a.call(t):r.get(t)),Pt=(t,r,a)=>r.has(t)?Ys("Cannot add the same private member more than once"):r instanceof WeakSet?r.add(t):r.set(t,a),Ct=(t,r,a,l)=>(ps(t,r,"write to private field"),l?l.call(t,a):r.set(t,a),a),Zt=(t,r,a)=>(ps(t,r,"access private method"),a);(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))l(o);new MutationObserver(o=>{for(const d of o)if(d.type==="childList")for(const v of d.addedNodes)v.tagName==="LINK"&&v.rel==="modulepreload"&&l(v)}).observe(document,{childList:!0,subtree:!0});function a(o){const d={};return o.integrity&&(d.integrity=o.integrity),o.referrerPolicy&&(d.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?d.credentials="include":o.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function l(o){if(o.ep)return;o.ep=!0;const d=a(o);fetch(o.href,d)}})();const bs=!1;var An=Array.isArray,zl=Array.prototype.indexOf,Xn=Array.from,gi=Object.defineProperty,Gr=Object.getOwnPropertyDescriptor,mi=Object.getOwnPropertyDescriptors,$l=Object.prototype,Al=Array.prototype,Ms=Object.getPrototypeOf,Zs=Object.isExtensible;const hr=()=>{};function Ml(t){return t()}function qn(t){for(var r=0;r<t.length;r++)t[r]()}function yi(){var t,r,a=new Promise((l,o)=>{t=l,r=o});return{promise:a,resolve:t,reject:r}}const sa=2,Bn=4,Mn=8,bi=1<<24,or=16,cr=32,Ur=64,Is=128,Ra=512,na=1024,ha=2048,Ya=4096,La=8192,sr=16384,es=32768,nn=65536,Qs=1<<17,ki=1<<18,vn=1<<19,wi=1<<20,ar=1<<25,Rr=32768,ks=1<<21,Rs=1<<22,gr=1<<23,ir=Symbol("$state"),Il=Symbol("legacy props"),Rl=Symbol(""),Hr=new class extends Error{constructor(){super(...arguments);Oa(this,"name","StaleReactionError");Oa(this,"message","The reaction that called `getAbortSignal()` was re-run or destroyed")}},ts=3,un=8;function xi(t){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function Dl(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function jl(t){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Ol(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Ul(t){throw new Error("https://svelte.dev/e/effect_orphan")}function Fl(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Kl(t){throw new Error("https://svelte.dev/e/props_invalid_value")}function ql(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Bl(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Vl(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function Wl(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const Hl=1,Jl=2,Si=4,Gl=8,Yl=16,Zl=1,Ql=2,Xl=4,eo=8,to=16,Ci=1,ao=2,ro="[",as="[!",Ds="]",In={},aa=Symbol(),no="http://www.w3.org/1999/xhtml";function Rn(t){console.warn("https://svelte.dev/e/hydration_mismatch")}function so(){console.warn("https://svelte.dev/e/select_multiple_invalid_value")}function io(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}let yt=!1;function $r(t){yt=t}let bt;function pa(t){if(t===null)throw Rn(),In;return bt=t}function Dr(){return pa(Za(bt))}function n(t){if(yt){if(Za(bt)!==null)throw Rn(),In;bt=t}}function Vt(t=1){if(yt){for(var r=t,a=bt;r--;)a=Za(a);bt=a}}function Vn(t=!0){for(var r=0,a=bt;;){if(a.nodeType===un){var l=a.data;if(l===Ds){if(r===0)return a;r-=1}else(l===ro||l===as)&&(r+=1)}var o=Za(a);t&&a.remove(),a=o}}function Ei(t){if(!t||t.nodeType!==un)throw Rn(),In;return t.data}function Pi(t){return t===this.v}function Ni(t,r){return t!=t?r==r:t!==r||t!==null&&typeof t=="object"||typeof t=="function"}function Ti(t){return!Ni(t,this.v)}let fn=!1,lo=!1;function oo(){fn=!0}let Ft=null;function sn(t){Ft=t}function Rt(t,r=!1,a){Ft={p:Ft,i:!1,c:null,e:null,s:t,x:null,l:fn&&!r?{s:null,u:null,$:[]}:null}}function Dt(t){var r=Ft,a=r.e;if(a!==null){r.e=null;for(var l of a)Qi(l)}return r.i=!0,Ft=r.p,{}}function pn(){return!fn||Ft!==null&&Ft.l===null}let Sr=[];function Li(){var t=Sr;Sr=[],qn(t)}function Fr(t){if(Sr.length===0&&!wn){var r=Sr;queueMicrotask(()=>{r===Sr&&Li()})}Sr.push(t)}function co(){for(;Sr.length>0;)Li()}function zi(t){var r=Tt;if(r===null)return xt.f|=gr,t;if(r.f&es)ln(t,r);else{if(!(r.f&Is))throw t;r.b.error(t)}}function ln(t,r){for(;r!==null;){if(r.f&Is)try{r.b.error(t);return}catch(a){t=a}r=r.parent}throw t}const vo=-7169;function Qt(t,r){t.f=t.f&vo|r}function js(t){t.f&Ra||t.deps===null?Qt(t,na):Qt(t,Ya)}function $i(t){if(t!==null)for(const r of t)!(r.f&sa)||!(r.f&Rr)||(r.f^=Rr,$i(r.deps))}function Ai(t,r,a){t.f&ha?r.add(t):t.f&Ya&&a.add(t),$i(t.deps),Qt(t,na)}const jn=new Set;let wt=null,kn=null,ra=null,Ma=[],rs=null,ws=!1,wn=!1;var Qr,Xr,Er,Pr,Tn,en,tn,Da,xs,Ss,Mi,Ii;const Yn=class Yn{constructor(){Pt(this,Da);Oa(this,"committed",!1);Oa(this,"current",new Map);Oa(this,"previous",new Map);Pt(this,Qr,new Set);Pt(this,Xr,new Set);Pt(this,Er,0);Pt(this,Pr,0);Pt(this,Tn,null);Pt(this,en,new Set);Pt(this,tn,new Set);Oa(this,"skipped_effects",new Set);Oa(this,"is_fork",!1)}is_deferred(){return this.is_fork||oe(this,Pr)>0}process(r){var o;Ma=[],kn=null,this.apply();var a=[],l=[];for(const d of r)Zt(this,Da,xs).call(this,d,a,l);this.is_fork||Zt(this,Da,Mi).call(this),this.is_deferred()?(Zt(this,Da,Ss).call(this,l),Zt(this,Da,Ss).call(this,a)):(kn=this,wt=null,Xs(l),Xs(a),kn=null,(o=oe(this,Tn))==null||o.resolve()),ra=null}capture(r,a){a!==aa&&!this.previous.has(r)&&this.previous.set(r,a),r.f&gr||(this.current.set(r,r.v),ra==null||ra.set(r,r.v))}activate(){wt=this,this.apply()}deactivate(){wt===this&&(wt=null,ra=null)}flush(){if(this.activate(),Ma.length>0){if(Ri(),wt!==null&&wt!==this)return}else oe(this,Er)===0&&this.process([]);this.deactivate()}discard(){for(const r of oe(this,Xr))r(this);oe(this,Xr).clear()}increment(r){Ct(this,Er,oe(this,Er)+1),r&&Ct(this,Pr,oe(this,Pr)+1)}decrement(r){Ct(this,Er,oe(this,Er)-1),r&&Ct(this,Pr,oe(this,Pr)-1),this.revive()}revive(){for(const r of oe(this,en))oe(this,tn).delete(r),Qt(r,ha),lr(r);for(const r of oe(this,tn))Qt(r,Ya),lr(r);this.flush()}oncommit(r){oe(this,Qr).add(r)}ondiscard(r){oe(this,Xr).add(r)}settled(){return(oe(this,Tn)??Ct(this,Tn,yi())).promise}static ensure(){if(wt===null){const r=wt=new Yn;jn.add(wt),wn||Yn.enqueue(()=>{wt===r&&r.flush()})}return wt}static enqueue(r){Fr(r)}apply(){}};Qr=new WeakMap,Xr=new WeakMap,Er=new WeakMap,Pr=new WeakMap,Tn=new WeakMap,en=new WeakMap,tn=new WeakMap,Da=new WeakSet,xs=function(r,a,l){r.f^=na;for(var o=r.first,d=null;o!==null;){var v=o.f,p=(v&(cr|Ur))!==0,f=p&&(v&na)!==0,_=f||(v&La)!==0||this.skipped_effects.has(o);if(!_&&o.fn!==null){p?o.f^=na:d!==null&&v&(Bn|Mn|bi)?d.b.defer_effect(o):v&Bn?a.push(o):hn(o)&&(v&or&&oe(this,en).add(o),on(o));var m=o.first;if(m!==null){o=m;continue}}var b=o.parent;for(o=o.next;o===null&&b!==null;)b===d&&(d=null),o=b.next,b=b.parent}},Ss=function(r){for(var a=0;a<r.length;a+=1)Ai(r[a],oe(this,en),oe(this,tn))},Mi=function(){if(oe(this,Pr)===0){for(const r of oe(this,Qr))r();oe(this,Qr).clear()}oe(this,Er)===0&&Zt(this,Da,Ii).call(this)},Ii=function(){var o;if(jn.size>1){this.previous.clear();var r=ra,a=!0;for(const d of jn){if(d===this){a=!1;continue}const v=[];for(const[f,_]of this.current){if(d.current.has(f))if(a&&_!==d.current.get(f))d.current.set(f,_);else continue;v.push(f)}if(v.length===0)continue;const p=[...d.current.keys()].filter(f=>!this.current.has(f));if(p.length>0){var l=Ma;Ma=[];const f=new Set,_=new Map;for(const m of v)Di(m,p,f,_);if(Ma.length>0){wt=d,d.apply();for(const m of Ma)Zt(o=d,Da,xs).call(o,m,[],[]);d.deactivate()}Ma=l}}wt=null,ra=r}this.committed=!0,jn.delete(this)};let rr=Yn;function uo(t){var r=wn;wn=!0;try{for(var a;;){if(co(),Ma.length===0&&(wt==null||wt.flush(),Ma.length===0))return rs=null,a;Ri()}}finally{wn=r}}function Ri(){var t=Mr;ws=!0;var r=null;try{var a=0;for(Hn(!0);Ma.length>0;){var l=rr.ensure();if(a++>1e3){var o,d;fo()}l.process(Ma),mr.clear()}}finally{ws=!1,Hn(t),rs=null}}function fo(){try{Fl()}catch(t){ln(t,rs)}}let Ua=null;function Xs(t){var r=t.length;if(r!==0){for(var a=0;a<r;){var l=t[a++];if(!(l.f&(sr|La))&&hn(l)&&(Ua=new Set,on(l),l.deps===null&&l.first===null&&l.nodes===null&&(l.teardown===null&&l.ac===null?rl(l):l.fn=null),(Ua==null?void 0:Ua.size)>0)){mr.clear();for(const o of Ua){if(o.f&(sr|La))continue;const d=[o];let v=o.parent;for(;v!==null;)Ua.has(v)&&(Ua.delete(v),d.push(v)),v=v.parent;for(let p=d.length-1;p>=0;p--){const f=d[p];f.f&(sr|La)||on(f)}}Ua.clear()}}Ua=null}}function Di(t,r,a,l){if(!a.has(t)&&(a.add(t),t.reactions!==null))for(const o of t.reactions){const d=o.f;d&sa?Di(o,r,a,l):d&(Rs|or)&&!(d&ha)&&ji(o,r,l)&&(Qt(o,ha),lr(o))}}function ji(t,r,a){const l=a.get(t);if(l!==void 0)return l;if(t.deps!==null)for(const o of t.deps){if(r.includes(o))return!0;if(o.f&sa&&ji(o,r,a))return a.set(o,!0),!0}return a.set(t,!1),!1}function lr(t){for(var r=rs=t;r.parent!==null;){r=r.parent;var a=r.f;if(ws&&r===Tt&&a&or&&!(a&ki))return;if(a&(Ur|cr)){if(!(a&na))return;r.f^=na}}Ma.push(r)}function po(t){let r=0,a=jr(0),l;return()=>{Fs()&&(e(a),_n(()=>(r===0&&(l=u(()=>t(()=>xn(a)))),r+=1,()=>{Fr(()=>{r-=1,r===0&&(l==null||l(),l=void 0,xn(a))})})))}}var _o=nn|vn|Is;function ho(t,r,a){new go(t,r,a)}var Pa,Ln,Ba,Nr,Va,Aa,ga,Wa,er,pr,Tr,tr,Lr,an,rn,_r,Zn,Ht,Oi,Ui,Cs,Un,Fn,Es;class go{constructor(r,a,l){Pt(this,Ht);Oa(this,"parent");Oa(this,"is_pending",!1);Pt(this,Pa);Pt(this,Ln,yt?bt:null);Pt(this,Ba);Pt(this,Nr);Pt(this,Va);Pt(this,Aa,null);Pt(this,ga,null);Pt(this,Wa,null);Pt(this,er,null);Pt(this,pr,null);Pt(this,Tr,0);Pt(this,tr,0);Pt(this,Lr,!1);Pt(this,an,new Set);Pt(this,rn,new Set);Pt(this,_r,null);Pt(this,Zn,po(()=>(Ct(this,_r,jr(oe(this,Tr))),()=>{Ct(this,_r,null)})));Ct(this,Pa,r),Ct(this,Ba,a),Ct(this,Nr,l),this.parent=Tt.b,this.is_pending=!!oe(this,Ba).pending,Ct(this,Va,os(()=>{if(Tt.b=this,yt){const d=oe(this,Ln);Dr(),d.nodeType===un&&d.data===as?Zt(this,Ht,Ui).call(this):(Zt(this,Ht,Oi).call(this),oe(this,tr)===0&&(this.is_pending=!1))}else{var o=Zt(this,Ht,Cs).call(this);try{Ct(this,Aa,Ia(()=>l(o)))}catch(d){this.error(d)}oe(this,tr)>0?Zt(this,Ht,Fn).call(this):this.is_pending=!1}return()=>{var d;(d=oe(this,pr))==null||d.remove()}},_o)),yt&&Ct(this,Pa,bt)}defer_effect(r){Ai(r,oe(this,an),oe(this,rn))}is_rendered(){return!this.is_pending&&(!this.parent||this.parent.is_rendered())}has_pending_snippet(){return!!oe(this,Ba).pending}update_pending_count(r){Zt(this,Ht,Es).call(this,r),Ct(this,Tr,oe(this,Tr)+r),oe(this,_r)&&Or(oe(this,_r),oe(this,Tr))}get_effect_pending(){return oe(this,Zn).call(this),e(oe(this,_r))}error(r){var a=oe(this,Ba).onerror;let l=oe(this,Ba).failed;if(oe(this,Lr)||!a&&!l)throw r;oe(this,Aa)&&(ka(oe(this,Aa)),Ct(this,Aa,null)),oe(this,ga)&&(ka(oe(this,ga)),Ct(this,ga,null)),oe(this,Wa)&&(ka(oe(this,Wa)),Ct(this,Wa,null)),yt&&(pa(oe(this,Ln)),Vt(),pa(Vn()));var o=!1,d=!1;const v=()=>{if(o){io();return}o=!0,d&&Wl(),rr.ensure(),Ct(this,Tr,0),oe(this,Wa)!==null&&Ar(oe(this,Wa),()=>{Ct(this,Wa,null)}),this.is_pending=this.has_pending_snippet(),Ct(this,Aa,Zt(this,Ht,Un).call(this,()=>(Ct(this,Lr,!1),Ia(()=>oe(this,Nr).call(this,oe(this,Pa)))))),oe(this,tr)>0?Zt(this,Ht,Fn).call(this):this.is_pending=!1};var p=xt;try{ya(null),d=!0,a==null||a(r,v),d=!1}catch(f){ln(f,oe(this,Va)&&oe(this,Va).parent)}finally{ya(p)}l&&Fr(()=>{Ct(this,Wa,Zt(this,Ht,Un).call(this,()=>{rr.ensure(),Ct(this,Lr,!0);try{return Ia(()=>{l(oe(this,Pa),()=>r,()=>v)})}catch(f){return ln(f,oe(this,Va).parent),null}finally{Ct(this,Lr,!1)}}))})}}Pa=new WeakMap,Ln=new WeakMap,Ba=new WeakMap,Nr=new WeakMap,Va=new WeakMap,Aa=new WeakMap,ga=new WeakMap,Wa=new WeakMap,er=new WeakMap,pr=new WeakMap,Tr=new WeakMap,tr=new WeakMap,Lr=new WeakMap,an=new WeakMap,rn=new WeakMap,_r=new WeakMap,Zn=new WeakMap,Ht=new WeakSet,Oi=function(){try{Ct(this,Aa,Ia(()=>oe(this,Nr).call(this,oe(this,Pa))))}catch(r){this.error(r)}},Ui=function(){const r=oe(this,Ba).pending;r&&(Ct(this,ga,Ia(()=>r(oe(this,Pa)))),rr.enqueue(()=>{var a=Zt(this,Ht,Cs).call(this);Ct(this,Aa,Zt(this,Ht,Un).call(this,()=>(rr.ensure(),Ia(()=>oe(this,Nr).call(this,a))))),oe(this,tr)>0?Zt(this,Ht,Fn).call(this):(Ar(oe(this,ga),()=>{Ct(this,ga,null)}),this.is_pending=!1)}))},Cs=function(){var r=oe(this,Pa);return this.is_pending&&(Ct(this,pr,ba()),oe(this,Pa).before(oe(this,pr)),r=oe(this,pr)),r},Un=function(r){var a=Tt,l=xt,o=Ft;Ga(oe(this,Va)),ya(oe(this,Va)),sn(oe(this,Va).ctx);try{return r()}catch(d){return zi(d),null}finally{Ga(a),ya(l),sn(o)}},Fn=function(){const r=oe(this,Ba).pending;oe(this,Aa)!==null&&(Ct(this,er,document.createDocumentFragment()),oe(this,er).append(oe(this,pr)),il(oe(this,Aa),oe(this,er))),oe(this,ga)===null&&Ct(this,ga,Ia(()=>r(oe(this,Pa))))},Es=function(r){var a;if(!this.has_pending_snippet()){this.parent&&Zt(a=this.parent,Ht,Es).call(a,r);return}if(Ct(this,tr,oe(this,tr)+r),oe(this,tr)===0){this.is_pending=!1;for(const l of oe(this,an))Qt(l,ha),lr(l);for(const l of oe(this,rn))Qt(l,Ya),lr(l);oe(this,an).clear(),oe(this,rn).clear(),oe(this,ga)&&Ar(oe(this,ga),()=>{Ct(this,ga,null)}),oe(this,er)&&(oe(this,Pa).before(oe(this,er)),Ct(this,er,null))}};function mo(t,r,a,l){const o=pn()?ns:ss;if(a.length===0&&t.length===0){l(r.map(o));return}var d=wt,v=Tt,p=yo();function f(){Promise.all(a.map(_=>bo(_))).then(_=>{p();try{l([...r.map(o),..._])}catch(m){v.f&sr||ln(m,v)}d==null||d.deactivate(),Wn()}).catch(_=>{ln(_,v)})}t.length>0?Promise.all(t).then(()=>{p();try{return f()}finally{d==null||d.deactivate(),Wn()}}):f()}function yo(){var t=Tt,r=xt,a=Ft,l=wt;return function(d=!0){Ga(t),ya(r),sn(a),d&&(l==null||l.activate())}}function Wn(){Ga(null),ya(null),sn(null)}function ns(t){var r=sa|ha,a=xt!==null&&xt.f&sa?xt:null;return Tt!==null&&(Tt.f|=vn),{ctx:Ft,deps:null,effects:null,equals:Pi,f:r,fn:t,reactions:null,rv:0,v:aa,wv:0,parent:a??Tt,ac:null}}function bo(t,r,a){let l=Tt;l===null&&Dl();var o=l.b,d=void 0,v=jr(aa),p=!xt,f=new Map;return To(()=>{var x;var _=yi();d=_.promise;try{Promise.resolve(t()).then(_.resolve,_.reject).then(()=>{m===wt&&m.committed&&m.deactivate(),Wn()})}catch(T){_.reject(T),Wn()}var m=wt;if(p){var b=o.is_rendered();o.update_pending_count(1),m.increment(b),(x=f.get(m))==null||x.reject(Hr),f.delete(m),f.set(m,_)}const y=(T,re=void 0)=>{if(m.activate(),re)re!==Hr&&(v.f|=gr,Or(v,re));else{v.f&gr&&(v.f^=gr),Or(v,T);for(const[z,E]of f){if(f.delete(z),z===m)break;E.reject(Hr)}}p&&(o.update_pending_count(-1),m.decrement(b))};_.promise.then(y,T=>y(null,T||"unknown"))}),ls(()=>{for(const _ of f.values())_.reject(Hr)}),new Promise(_=>{function m(b){function y(){b===d?_(v):m(d)}b.then(y,y)}m(d)})}function ss(t){const r=ns(t);return r.equals=Ti,r}function Fi(t){var r=t.effects;if(r!==null){t.effects=null;for(var a=0;a<r.length;a+=1)ka(r[a])}}function ko(t){for(var r=t.parent;r!==null;){if(!(r.f&sa))return r.f&sr?null:r;r=r.parent}return null}function Os(t){var r,a=Tt;Ga(ko(t));try{t.f&=~Rr,Fi(t),r=dl(t)}finally{Ga(a)}return r}function Ki(t){var r=Os(t);if(!t.equals(r)&&(t.wv=ol(),(!(wt!=null&&wt.is_fork)||t.deps===null)&&(t.v=r,t.deps===null))){Qt(t,na);return}yr||(ra!==null?(Fs()||wt!=null&&wt.is_fork)&&ra.set(t,r):js(t))}let Ps=new Set;const mr=new Map;let qi=!1;function jr(t,r){var a={f:0,v:t,reactions:null,equals:Pi,rv:0,wv:0};return a}function vr(t,r){const a=jr(t);return $o(a),a}function S(t,r=!1,a=!0){var o;const l=jr(t);return r||(l.equals=Ti),fn&&a&&Ft!==null&&Ft.l!==null&&((o=Ft.l).s??(o.s=[])).push(l),l}function Fe(t,r){return c(t,u(()=>e(t))),r}function c(t,r,a=!1){xt!==null&&(!Ka||xt.f&Qs)&&pn()&&xt.f&(sa|or|Rs|Qs)&&!(_a!=null&&_a.includes(t))&&Vl();let l=a?Jr(r):r;return Or(t,l)}function Or(t,r){if(!t.equals(r)){var a=t.v;yr?mr.set(t,r):mr.set(t,a),t.v=r;var l=rr.ensure();if(l.capture(t,a),t.f&sa){const o=t;t.f&ha&&Os(o),js(o)}t.wv=ol(),Bi(t,ha),pn()&&Tt!==null&&Tt.f&na&&!(Tt.f&(cr|Ur))&&($a===null?Ao([t]):$a.push(t)),!l.is_fork&&Ps.size>0&&!qi&&wo()}return r}function wo(){qi=!1;var t=Mr;Hn(!0);const r=Array.from(Ps);try{for(const a of r)a.f&na&&Qt(a,Ya),hn(a)&&on(a)}finally{Hn(t)}Ps.clear()}function xn(t){c(t,t.v+1)}function Bi(t,r){var a=t.reactions;if(a!==null)for(var l=pn(),o=a.length,d=0;d<o;d++){var v=a[d],p=v.f;if(!(!l&&v===Tt)){var f=(p&ha)===0;if(f&&Qt(v,r),p&sa){var _=v;ra==null||ra.delete(_),p&Rr||(p&Ra&&(v.f|=Rr),Bi(_,Ya))}else f&&(p&or&&Ua!==null&&Ua.add(v),lr(v))}}}function Jr(t){if(typeof t!="object"||t===null||ir in t)return t;const r=Ms(t);if(r!==$l&&r!==Al)return t;var a=new Map,l=An(t),o=vr(0),d=Ir,v=p=>{if(Ir===d)return p();var f=xt,_=Ir;ya(null),ni(d);var m=p();return ya(f),ni(_),m};return l&&a.set("length",vr(t.length)),new Proxy(t,{defineProperty(p,f,_){(!("value"in _)||_.configurable===!1||_.enumerable===!1||_.writable===!1)&&ql();var m=a.get(f);return m===void 0?m=v(()=>{var b=vr(_.value);return a.set(f,b),b}):c(m,_.value,!0),!0},deleteProperty(p,f){var _=a.get(f);if(_===void 0){if(f in p){const m=v(()=>vr(aa));a.set(f,m),xn(o)}}else c(_,aa),xn(o);return!0},get(p,f,_){var x;if(f===ir)return t;var m=a.get(f),b=f in p;if(m===void 0&&(!b||(x=Gr(p,f))!=null&&x.writable)&&(m=v(()=>{var T=Jr(b?p[f]:aa),re=vr(T);return re}),a.set(f,m)),m!==void 0){var y=e(m);return y===aa?void 0:y}return Reflect.get(p,f,_)},getOwnPropertyDescriptor(p,f){var _=Reflect.getOwnPropertyDescriptor(p,f);if(_&&"value"in _){var m=a.get(f);m&&(_.value=e(m))}else if(_===void 0){var b=a.get(f),y=b==null?void 0:b.v;if(b!==void 0&&y!==aa)return{enumerable:!0,configurable:!0,value:y,writable:!0}}return _},has(p,f){var y;if(f===ir)return!0;var _=a.get(f),m=_!==void 0&&_.v!==aa||Reflect.has(p,f);if(_!==void 0||Tt!==null&&(!m||(y=Gr(p,f))!=null&&y.writable)){_===void 0&&(_=v(()=>{var x=m?Jr(p[f]):aa,T=vr(x);return T}),a.set(f,_));var b=e(_);if(b===aa)return!1}return m},set(p,f,_,m){var fe;var b=a.get(f),y=f in p;if(l&&f==="length")for(var x=_;x<b.v;x+=1){var T=a.get(x+"");T!==void 0?c(T,aa):x in p&&(T=v(()=>vr(aa)),a.set(x+"",T))}if(b===void 0)(!y||(fe=Gr(p,f))!=null&&fe.writable)&&(b=v(()=>vr(void 0)),c(b,Jr(_)),a.set(f,b));else{y=b.v!==aa;var re=v(()=>Jr(_));c(b,re)}var z=Reflect.getOwnPropertyDescriptor(p,f);if(z!=null&&z.set&&z.set.call(m,_),!y){if(l&&typeof f=="string"){var E=a.get("length"),Pe=Number(f);Number.isInteger(Pe)&&Pe>=E.v&&c(E,Pe+1)}xn(o)}return!0},ownKeys(p){e(o);var f=Reflect.ownKeys(p).filter(b=>{var y=a.get(b);return y===void 0||y.v!==aa});for(var[_,m]of a)m.v!==aa&&!(_ in p)&&f.push(_);return f},setPrototypeOf(){Bl()}})}function ei(t){try{if(t!==null&&typeof t=="object"&&ir in t)return t[ir]}catch{}return t}function xo(t,r){return Object.is(ei(t),ei(r))}var ti,Vi,Wi,Hi;function So(){if(ti===void 0){ti=window,Vi=/Firefox/.test(navigator.userAgent);var t=Element.prototype,r=Node.prototype,a=Text.prototype;Wi=Gr(r,"firstChild").get,Hi=Gr(r,"nextSibling").get,Zs(t)&&(t.__click=void 0,t.__className=void 0,t.__attributes=null,t.__style=void 0,t.__e=void 0),Zs(a)&&(a.__t=void 0)}}function ba(t=""){return document.createTextNode(t)}function ca(t){return Wi.call(t)}function Za(t){return Hi.call(t)}function s(t,r){if(!yt)return ca(t);var a=ca(bt);if(a===null)a=bt.appendChild(ba());else if(r&&a.nodeType!==ts){var l=ba();return a==null||a.before(l),pa(l),l}return pa(a),a}function Oe(t,r=!1){if(!yt){var a=ca(t);return a instanceof Comment&&a.data===""?Za(a):a}if(r&&(bt==null?void 0:bt.nodeType)!==ts){var l=ba();return bt==null||bt.before(l),pa(l),l}return bt}function i(t,r=1,a=!1){let l=yt?bt:t;for(var o;r--;)o=l,l=Za(l);if(!yt)return l;if(a&&(l==null?void 0:l.nodeType)!==ts){var d=ba();return l===null?o==null||o.after(d):l.before(d),pa(d),d}return pa(l),l}function Ji(t){t.textContent=""}function Gi(){return!1}function Co(t=""){return document.createComment(t)}function nr(t){yt&&ca(t)!==null&&Ji(t)}let ai=!1;function Yi(){ai||(ai=!0,document.addEventListener("reset",t=>{Promise.resolve().then(()=>{var r;if(!t.defaultPrevented)for(const a of t.target.elements)(r=a.__on_r)==null||r.call(a)})},{capture:!0}))}function is(t){var r=xt,a=Tt;ya(null),Ga(null);try{return t()}finally{ya(r),Ga(a)}}function Us(t,r,a,l=a){t.addEventListener(r,()=>is(a));const o=t.__on_r;o?t.__on_r=()=>{o(),l(!0)}:t.__on_r=()=>l(!0),Yi()}function Zi(t){Tt===null&&(xt===null&&Ul(),Ol()),yr&&jl()}function Eo(t,r){var a=r.last;a===null?r.last=r.first=t:(a.next=t,t.prev=a,r.last=t)}function Qa(t,r,a){var l=Tt;l!==null&&l.f&La&&(t|=La);var o={ctx:Ft,deps:null,nodes:null,f:t|ha|Ra,first:null,fn:r,last:null,next:null,parent:l,b:l&&l.b,prev:null,teardown:null,wv:0,ac:null};if(a)try{on(o),o.f|=es}catch(p){throw ka(o),p}else r!==null&&lr(o);var d=o;if(a&&d.deps===null&&d.teardown===null&&d.nodes===null&&d.first===d.last&&!(d.f&vn)&&(d=d.first,t&or&&t&nn&&d!==null&&(d.f|=nn)),d!==null&&(d.parent=l,l!==null&&Eo(d,l),xt!==null&&xt.f&sa&&!(t&Ur))){var v=xt;(v.effects??(v.effects=[])).push(d)}return o}function Fs(){return xt!==null&&!Ka}function ls(t){const r=Qa(Mn,null,!1);return Qt(r,na),r.teardown=t,r}function Ns(t){Zi();var r=Tt.f,a=!xt&&(r&cr)!==0&&(r&es)===0;if(a){var l=Ft;(l.e??(l.e=[])).push(t)}else return Qi(t)}function Qi(t){return Qa(Bn|wi,t,!1)}function Po(t){return Zi(),Qa(Mn|wi,t,!0)}function No(t){rr.ensure();const r=Qa(Ur|vn,t,!0);return(a={})=>new Promise(l=>{a.outro?Ar(r,()=>{ka(r),l(void 0)}):(ka(r),l(void 0))})}function Xi(t){return Qa(Bn,t,!1)}function ft(t,r){var a=Ft,l={effect:null,ran:!1,deps:t};a.l.$.push(l),l.effect=_n(()=>{t(),!l.ran&&(l.ran=!0,u(r))})}function wa(){var t=Ft;_n(()=>{for(var r of t.l.$){r.deps();var a=r.effect;a.f&na&&a.deps!==null&&Qt(a,Ya),hn(a)&&on(a),r.ran=!1}})}function To(t){return Qa(Rs|vn,t,!0)}function _n(t,r=0){return Qa(Mn|r,t,!0)}function R(t,r=[],a=[],l=[]){mo(l,r,a,o=>{Qa(Mn,()=>t(...o.map(e)),!0)})}function os(t,r=0){var a=Qa(or|r,t,!0);return a}function Ia(t){return Qa(cr|vn,t,!0)}function el(t){var r=t.teardown;if(r!==null){const a=yr,l=xt;ri(!0),ya(null);try{r.call(null)}finally{ri(a),ya(l)}}}function tl(t,r=!1){var a=t.first;for(t.first=t.last=null;a!==null;){const o=a.ac;o!==null&&is(()=>{o.abort(Hr)});var l=a.next;a.f&Ur?a.parent=null:ka(a,r),a=l}}function Lo(t){for(var r=t.first;r!==null;){var a=r.next;r.f&cr||ka(r),r=a}}function ka(t,r=!0){var a=!1;(r||t.f&ki)&&t.nodes!==null&&t.nodes.end!==null&&(al(t.nodes.start,t.nodes.end),a=!0),tl(t,r&&!a),Jn(t,0),Qt(t,sr);var l=t.nodes&&t.nodes.t;if(l!==null)for(const d of l)d.stop();el(t);var o=t.parent;o!==null&&o.first!==null&&rl(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes=t.ac=null}function al(t,r){for(;t!==null;){var a=t===r?null:Za(t);t.remove(),t=a}}function rl(t){var r=t.parent,a=t.prev,l=t.next;a!==null&&(a.next=l),l!==null&&(l.prev=a),r!==null&&(r.first===t&&(r.first=l),r.last===t&&(r.last=a))}function Ar(t,r,a=!0){var l=[];nl(t,l,!0);var o=()=>{a&&ka(t),r&&r()},d=l.length;if(d>0){var v=()=>--d||o();for(var p of l)p.out(v)}else o()}function nl(t,r,a){if(!(t.f&La)){t.f^=La;var l=t.nodes&&t.nodes.t;if(l!==null)for(const p of l)(p.is_global||a)&&r.push(p);for(var o=t.first;o!==null;){var d=o.next,v=(o.f&nn)!==0||(o.f&cr)!==0&&(t.f&or)!==0;nl(o,r,v?a:!1),o=d}}}function Ks(t){sl(t,!0)}function sl(t,r){if(t.f&La){t.f^=La,t.f&na||(Qt(t,ha),lr(t));for(var a=t.first;a!==null;){var l=a.next,o=(a.f&nn)!==0||(a.f&cr)!==0;sl(a,o?r:!1),a=l}var d=t.nodes&&t.nodes.t;if(d!==null)for(const v of d)(v.is_global||r)&&v.in()}}function il(t,r){if(t.nodes)for(var a=t.nodes.start,l=t.nodes.end;a!==null;){var o=a===l?null:Za(a);r.append(a),a=o}}let fr=null;function zo(t){var r=fr;try{if(fr=new Set,u(t),r!==null)for(var a of fr)r.add(a);return fr}finally{fr=r}}function da(t){for(var r of zo(t))Or(r,r.v)}let Mr=!1;function Hn(t){Mr=t}let yr=!1;function ri(t){yr=t}let xt=null,Ka=!1;function ya(t){xt=t}let Tt=null;function Ga(t){Tt=t}let _a=null;function $o(t){xt!==null&&(_a===null?_a=[t]:_a.push(t))}let ma=null,Ea=0,$a=null;function Ao(t){$a=t}let ll=1,Cr=0,Ir=Cr;function ni(t){Ir=t}function ol(){return++ll}function hn(t){var r=t.f;if(r&ha)return!0;if(r&sa&&(t.f&=~Rr),r&Ya){for(var a=t.deps,l=a.length,o=0;o<l;o++){var d=a[o];if(hn(d)&&Ki(d),d.wv>t.wv)return!0}r&Ra&&ra===null&&Qt(t,na)}return!1}function cl(t,r,a=!0){var l=t.reactions;if(l!==null&&!(_a!=null&&_a.includes(t)))for(var o=0;o<l.length;o++){var d=l[o];d.f&sa?cl(d,r,!1):r===d&&(a?Qt(d,ha):d.f&na&&Qt(d,Ya),lr(d))}}function dl(t){var T;var r=ma,a=Ea,l=$a,o=xt,d=_a,v=Ft,p=Ka,f=Ir,_=t.f;ma=null,Ea=0,$a=null,xt=_&(cr|Ur)?null:t,_a=null,sn(t.ctx),Ka=!1,Ir=++Cr,t.ac!==null&&(is(()=>{t.ac.abort(Hr)}),t.ac=null);try{t.f|=ks;var m=t.fn,b=m(),y=t.deps;if(ma!==null){var x;if(Jn(t,Ea),y!==null&&Ea>0)for(y.length=Ea+ma.length,x=0;x<ma.length;x++)y[Ea+x]=ma[x];else t.deps=y=ma;if(Fs()&&t.f&Ra)for(x=Ea;x<y.length;x++)((T=y[x]).reactions??(T.reactions=[])).push(t)}else y!==null&&Ea<y.length&&(Jn(t,Ea),y.length=Ea);if(pn()&&$a!==null&&!Ka&&y!==null&&!(t.f&(sa|Ya|ha)))for(x=0;x<$a.length;x++)cl($a[x],t);if(o!==null&&o!==t){if(Cr++,o.deps!==null)for(let re=0;re<a;re+=1)o.deps[re].rv=Cr;if(r!==null)for(const re of r)re.rv=Cr;$a!==null&&(l===null?l=$a:l.push(...$a))}return t.f&gr&&(t.f^=gr),b}catch(re){return zi(re)}finally{t.f^=ks,ma=r,Ea=a,$a=l,xt=o,_a=d,sn(v),Ka=p,Ir=f}}function Mo(t,r){let a=r.reactions;if(a!==null){var l=zl.call(a,t);if(l!==-1){var o=a.length-1;o===0?a=r.reactions=null:(a[l]=a[o],a.pop())}}if(a===null&&r.f&sa&&(ma===null||!ma.includes(r))){var d=r;d.f&Ra&&(d.f^=Ra,d.f&=~Rr),js(d),Fi(d),Jn(d,0)}}function Jn(t,r){var a=t.deps;if(a!==null)for(var l=r;l<a.length;l++)Mo(t,a[l])}function on(t){var r=t.f;if(!(r&sr)){Qt(t,na);var a=Tt,l=Mr;Tt=t,Mr=!0;try{r&(or|bi)?Lo(t):tl(t),el(t);var o=dl(t);t.teardown=typeof o=="function"?o:null,t.wv=ll;var d;bs&&lo&&t.f&ha&&t.deps}finally{Mr=l,Tt=a}}}async function vl(){await Promise.resolve(),uo()}function e(t){var r=t.f,a=(r&sa)!==0;if(fr==null||fr.add(t),xt!==null&&!Ka){var l=Tt!==null&&(Tt.f&sr)!==0;if(!l&&!(_a!=null&&_a.includes(t))){var o=xt.deps;if(xt.f&ks)t.rv<Cr&&(t.rv=Cr,ma===null&&o!==null&&o[Ea]===t?Ea++:ma===null?ma=[t]:ma.push(t));else{(xt.deps??(xt.deps=[])).push(t);var d=t.reactions;d===null?t.reactions=[xt]:d.includes(xt)||d.push(xt)}}}if(yr&&mr.has(t))return mr.get(t);if(a){var v=t;if(yr){var p=v.v;return(!(v.f&na)&&v.reactions!==null||fl(v))&&(p=Os(v)),mr.set(v,p),p}var f=(v.f&Ra)===0&&!Ka&&xt!==null&&(Mr||(xt.f&Ra)!==0),_=v.deps===null;hn(v)&&(f&&(v.f|=Ra),Ki(v)),f&&!_&&ul(v)}if(ra!=null&&ra.has(t))return ra.get(t);if(t.f&gr)throw t.v;return t.v}function ul(t){if(t.deps!==null){t.f|=Ra;for(const r of t.deps)(r.reactions??(r.reactions=[])).push(t),r.f&sa&&!(r.f&Ra)&&ul(r)}}function fl(t){if(t.v===aa)return!0;if(t.deps===null)return!1;for(const r of t.deps)if(mr.has(r)||r.f&sa&&fl(r))return!0;return!1}function u(t){var r=Ka;try{return Ka=!0,t()}finally{Ka=r}}function ut(t){if(!(typeof t!="object"||!t||t instanceof EventTarget)){if(ir in t)Ts(t);else if(!Array.isArray(t))for(let r in t){const a=t[r];typeof a=="object"&&a&&ir in a&&Ts(a)}}}function Ts(t,r=new Set){if(typeof t=="object"&&t!==null&&!(t instanceof EventTarget)&&!r.has(t)){r.add(t),t instanceof Date&&t.getTime();for(let l in t)try{Ts(t[l],r)}catch{}const a=Ms(t);if(a!==Object.prototype&&a!==Array.prototype&&a!==Map.prototype&&a!==Set.prototype&&a!==Date.prototype){const l=mi(a);for(let o in l){const d=l[o].get;if(d)try{d.call(t)}catch{}}}}}const Io=["touchstart","touchmove"];function Ro(t){return Io.includes(t)}const Do=new Set,si=new Set;function jo(t,r,a,l={}){function o(d){if(l.capture||yn.call(r,d),!d.cancelBubble)return is(()=>a==null?void 0:a.call(this,d))}return t.startsWith("pointer")||t.startsWith("touch")||t==="wheel"?Fr(()=>{r.addEventListener(t,o,l)}):r.addEventListener(t,o,l),o}function L(t,r,a,l,o){var d={capture:l,passive:o},v=jo(t,r,a,d);(r===document.body||r===window||r===document||r instanceof HTMLMediaElement)&&ls(()=>{r.removeEventListener(t,v,d)})}let ii=null;function yn(t){var z;var r=this,a=r.ownerDocument,l=t.type,o=((z=t.composedPath)==null?void 0:z.call(t))||[],d=o[0]||t.target;ii=t;var v=0,p=ii===t&&t.__root;if(p){var f=o.indexOf(p);if(f!==-1&&(r===document||r===window)){t.__root=r;return}var _=o.indexOf(r);if(_===-1)return;f<=_&&(v=f)}if(d=o[v]||t.target,d!==r){gi(t,"currentTarget",{configurable:!0,get(){return d||a}});var m=xt,b=Tt;ya(null),Ga(null);try{for(var y,x=[];d!==null;){var T=d.assignedSlot||d.parentNode||d.host||null;try{var re=d["__"+l];re!=null&&(!d.disabled||t.target===d)&&re.call(d,t)}catch(E){y?x.push(E):y=E}if(t.cancelBubble||T===r||T===null)break;d=T}if(y){for(let E of x)queueMicrotask(()=>{throw E});throw y}}finally{t.__root=r,delete t.currentTarget,ya(m),Ga(b)}}}function qs(t){var r=document.createElement("template");return r.innerHTML=t.replaceAll("<!>","<!---->"),r.content}function za(t,r){var a=Tt;a.nodes===null&&(a.nodes={start:t,end:r,a:null,t:null})}function C(t,r){var a=(r&Ci)!==0,l=(r&ao)!==0,o,d=!t.startsWith("<!>");return()=>{if(yt)return za(bt,null),bt;o===void 0&&(o=qs(d?t:"<!>"+t),a||(o=ca(o)));var v=l||Vi?document.importNode(o,!0):o.cloneNode(!0);if(a){var p=ca(v),f=v.lastChild;za(p,f)}else za(v,v);return v}}function Oo(t,r,a="svg"){var l=!t.startsWith("<!>"),o=(r&Ci)!==0,d=`<${a}>${l?t:"<!>"+t}</${a}>`,v;return()=>{if(yt)return za(bt,null),bt;if(!v){var p=qs(d),f=ca(p);if(o)for(v=document.createDocumentFragment();ca(f);)v.appendChild(ca(f));else v=ca(f)}var _=v.cloneNode(!0);if(o){var m=ca(_),b=_.lastChild;za(m,b)}else za(_,_);return _}}function pl(t,r){return Oo(t,r,"svg")}function Uo(t=""){if(!yt){var r=ba(t+"");return za(r,r),r}var a=bt;return a.nodeType!==ts&&(a.before(a=ba()),pa(a)),za(a,a),a}function ot(){if(yt)return za(bt,null),bt;var t=document.createDocumentFragment(),r=document.createComment(""),a=ba();return t.append(r,a),za(r,a),t}function h(t,r){if(yt){var a=Tt;(!(a.f&es)||a.nodes.end===null)&&(a.nodes.end=bt),Dr();return}t!==null&&t.before(r)}function w(t,r){var a=r==null?"":typeof r=="object"?r+"":r;a!==(t.__t??(t.__t=t.nodeValue))&&(t.__t=a,t.nodeValue=a+"")}function Fo(t,r){return Ko(t,r)}const Vr=new Map;function Ko(t,{target:r,anchor:a,props:l={},events:o,context:d,intro:v=!0}){So();var p=new Set,f=b=>{for(var y=0;y<b.length;y++){var x=b[y];if(!p.has(x)){p.add(x);var T=Ro(x);r.addEventListener(x,yn,{passive:T});var re=Vr.get(x);re===void 0?(document.addEventListener(x,yn,{passive:T}),Vr.set(x,1)):Vr.set(x,re+1)}}};f(Xn(Do)),si.add(f);var _=void 0,m=No(()=>{var b=a??r.appendChild(ba());return ho(b,{pending:()=>{}},y=>{if(d){Rt({});var x=Ft;x.c=d}if(o&&(l.$$events=o),yt&&za(y,null),_=t(y,l)||{},yt&&(Tt.nodes.end=bt,bt===null||bt.nodeType!==un||bt.data!==Ds))throw Rn(),In;d&&Dt()}),()=>{var T;for(var y of p){r.removeEventListener(y,yn);var x=Vr.get(y);--x===0?(document.removeEventListener(y,yn),Vr.delete(y)):Vr.set(y,x)}si.delete(f),b!==a&&((T=b.parentNode)==null||T.removeChild(b))}});return qo.set(_,m),_}let qo=new WeakMap;var Fa,Ha,Na,zr,zn,$n,Qn;class _l{constructor(r,a=!0){Oa(this,"anchor");Pt(this,Fa,new Map);Pt(this,Ha,new Map);Pt(this,Na,new Map);Pt(this,zr,new Set);Pt(this,zn,!0);Pt(this,$n,()=>{var r=wt;if(oe(this,Fa).has(r)){var a=oe(this,Fa).get(r),l=oe(this,Ha).get(a);if(l)Ks(l),oe(this,zr).delete(a);else{var o=oe(this,Na).get(a);o&&(oe(this,Ha).set(a,o.effect),oe(this,Na).delete(a),o.fragment.lastChild.remove(),this.anchor.before(o.fragment),l=o.effect)}for(const[d,v]of oe(this,Fa)){if(oe(this,Fa).delete(d),d===r)break;const p=oe(this,Na).get(v);p&&(ka(p.effect),oe(this,Na).delete(v))}for(const[d,v]of oe(this,Ha)){if(d===a||oe(this,zr).has(d))continue;const p=()=>{if(Array.from(oe(this,Fa).values()).includes(d)){var _=document.createDocumentFragment();il(v,_),_.append(ba()),oe(this,Na).set(d,{effect:v,fragment:_})}else ka(v);oe(this,zr).delete(d),oe(this,Ha).delete(d)};oe(this,zn)||!l?(oe(this,zr).add(d),Ar(v,p,!1)):p()}}});Pt(this,Qn,r=>{oe(this,Fa).delete(r);const a=Array.from(oe(this,Fa).values());for(const[l,o]of oe(this,Na))a.includes(l)||(ka(o.effect),oe(this,Na).delete(l))});this.anchor=r,Ct(this,zn,a)}ensure(r,a){var l=wt,o=Gi();if(a&&!oe(this,Ha).has(r)&&!oe(this,Na).has(r))if(o){var d=document.createDocumentFragment(),v=ba();d.append(v),oe(this,Na).set(r,{effect:Ia(()=>a(v)),fragment:d})}else oe(this,Ha).set(r,Ia(()=>a(this.anchor)));if(oe(this,Fa).set(l,r),o){for(const[p,f]of oe(this,Ha))p===r?l.skipped_effects.delete(f):l.skipped_effects.add(f);for(const[p,f]of oe(this,Na))p===r?l.skipped_effects.delete(f.effect):l.skipped_effects.add(f.effect);l.oncommit(oe(this,$n)),l.ondiscard(oe(this,Qn))}else yt&&(this.anchor=bt),oe(this,$n).call(this)}}Fa=new WeakMap,Ha=new WeakMap,Na=new WeakMap,zr=new WeakMap,zn=new WeakMap,$n=new WeakMap,Qn=new WeakMap;function ne(t,r,a=!1){yt&&Dr();var l=new _l(t),o=a?nn:0;function d(v,p){if(yt){const _=Ei(t)===as;if(v===_){var f=Vn();pa(f),l.anchor=f,$r(!1),l.ensure(v,p),$r(!0);return}}l.ensure(v,p)}os(()=>{var v=!1;r((p,f=!0)=>{v=!0,d(f,p)}),v||d(!1,null)},o)}function Bo(t,r,a){yt&&Dr();var l=new _l(t),o=!pn();os(()=>{var d=r();o&&d!==null&&typeof d=="object"&&(d={}),l.ensure(d,a)})}function st(t,r){return r}function Vo(t,r,a){for(var l=[],o=r.length,d,v=r.length,p=0;p<o;p++){let b=r[p];Ar(b,()=>{if(d){if(d.pending.delete(b),d.done.add(b),d.pending.size===0){var y=t.outrogroups;Ls(Xn(d.done)),y.delete(d),y.size===0&&(t.outrogroups=null)}}else v-=1},!1)}if(v===0){var f=l.length===0&&a!==null;if(f){var _=a,m=_.parentNode;Ji(m),m.append(_),t.items.clear()}Ls(r,!f)}else d={pending:new Set(r),done:new Set},(t.outrogroups??(t.outrogroups=new Set)).add(d)}function Ls(t,r=!0){for(var a=0;a<t.length;a++)ka(t[a],r)}var li;function at(t,r,a,l,o,d=null){var v=t,p=new Map,f=(r&Si)!==0;if(f){var _=t;v=yt?pa(ca(_)):_.appendChild(ba())}yt&&Dr();var m=null,b=ss(()=>{var E=a();return An(E)?E:E==null?[]:Xn(E)}),y,x=!0;function T(){z.fallback=m,Wo(z,y,v,r,l),m!==null&&(y.length===0?m.f&ar?(m.f^=ar,bn(m,null,v)):Ks(m):Ar(m,()=>{m=null}))}var re=os(()=>{y=e(b);var E=y.length;let Pe=!1;if(yt){var fe=Ei(v)===as;fe!==(E===0)&&(v=Vn(),pa(v),$r(!1),Pe=!0)}for(var I=new Set,ce=wt,W=Gi(),ie=0;ie<E;ie+=1){yt&&bt.nodeType===un&&bt.data===Ds&&(v=bt,Pe=!0,$r(!1));var Z=y[ie],V=l(Z,ie),ve=x?null:p.get(V);ve?(ve.v&&Or(ve.v,Z),ve.i&&Or(ve.i,ie),W&&ce.skipped_effects.delete(ve.e)):(ve=Ho(p,x?v:li??(li=ba()),Z,V,ie,o,r,a),x||(ve.e.f|=ar),p.set(V,ve)),I.add(V)}if(E===0&&d&&!m&&(x?m=Ia(()=>d(v)):(m=Ia(()=>d(li??(li=ba()))),m.f|=ar)),yt&&E>0&&pa(Vn()),!x)if(W){for(const[ze,me]of p)I.has(ze)||ce.skipped_effects.add(me.e);ce.oncommit(T),ce.ondiscard(()=>{})}else T();Pe&&$r(!0),e(b)}),z={effect:re,items:p,outrogroups:null,fallback:m};x=!1,yt&&(v=bt)}function Wo(t,r,a,l,o){var ve,ze,me,_e,we,se,K,Ne,ye;var d=(l&Gl)!==0,v=r.length,p=t.items,f=t.effect.first,_,m=null,b,y=[],x=[],T,re,z,E;if(d)for(E=0;E<v;E+=1)T=r[E],re=o(T,E),z=p.get(re).e,z.f&ar||((ze=(ve=z.nodes)==null?void 0:ve.a)==null||ze.measure(),(b??(b=new Set)).add(z));for(E=0;E<v;E+=1){if(T=r[E],re=o(T,E),z=p.get(re).e,t.outrogroups!==null)for(const Ae of t.outrogroups)Ae.pending.delete(z),Ae.done.delete(z);if(z.f&ar)if(z.f^=ar,z===f)bn(z,null,a);else{var Pe=m?m.next:f;z===t.effect.last&&(t.effect.last=z.prev),z.prev&&(z.prev.next=z.next),z.next&&(z.next.prev=z.prev),ur(t,m,z),ur(t,z,Pe),bn(z,Pe,a),m=z,y=[],x=[],f=m.next;continue}if(z.f&La&&(Ks(z),d&&((_e=(me=z.nodes)==null?void 0:me.a)==null||_e.unfix(),(b??(b=new Set)).delete(z))),z!==f){if(_!==void 0&&_.has(z)){if(y.length<x.length){var fe=x[0],I;m=fe.prev;var ce=y[0],W=y[y.length-1];for(I=0;I<y.length;I+=1)bn(y[I],fe,a);for(I=0;I<x.length;I+=1)_.delete(x[I]);ur(t,ce.prev,W.next),ur(t,m,ce),ur(t,W,fe),f=fe,m=W,E-=1,y=[],x=[]}else _.delete(z),bn(z,f,a),ur(t,z.prev,z.next),ur(t,z,m===null?t.effect.first:m.next),ur(t,m,z),m=z;continue}for(y=[],x=[];f!==null&&f!==z;)(_??(_=new Set)).add(f),x.push(f),f=f.next;if(f===null)continue}z.f&ar||y.push(z),m=z,f=z.next}if(t.outrogroups!==null){for(const Ae of t.outrogroups)Ae.pending.size===0&&(Ls(Xn(Ae.done)),(we=t.outrogroups)==null||we.delete(Ae));t.outrogroups.size===0&&(t.outrogroups=null)}if(f!==null||_!==void 0){var ie=[];if(_!==void 0)for(z of _)z.f&La||ie.push(z);for(;f!==null;)!(f.f&La)&&f!==t.fallback&&ie.push(f),f=f.next;var Z=ie.length;if(Z>0){var V=l&Si&&v===0?a:null;if(d){for(E=0;E<Z;E+=1)(K=(se=ie[E].nodes)==null?void 0:se.a)==null||K.measure();for(E=0;E<Z;E+=1)(ye=(Ne=ie[E].nodes)==null?void 0:Ne.a)==null||ye.fix()}Vo(t,ie,V)}}d&&Fr(()=>{var Ae,ke;if(b!==void 0)for(z of b)(ke=(Ae=z.nodes)==null?void 0:Ae.a)==null||ke.apply()})}function Ho(t,r,a,l,o,d,v,p){var f=v&Hl?v&Yl?jr(a):S(a,!1,!1):null,_=v&Jl?jr(o):null;return{v:f,i:_,e:Ia(()=>(d(r,f??a,_??o,p),()=>{t.delete(l)}))}}function bn(t,r,a){if(t.nodes)for(var l=t.nodes.start,o=t.nodes.end,d=r&&!(r.f&ar)?r.nodes.start:a;l!==null;){var v=Za(l);if(d.before(l),l===o)return;l=v}}function ur(t,r,a){r===null?t.effect.first=a:r.next=a,a===null?t.effect.last=r:a.prev=r}function Re(t,r,a=!1,l=!1,o=!1){var d=t,v="";R(()=>{var p=Tt;if(v===(v=r()??"")){yt&&Dr();return}if(p.nodes!==null&&(al(p.nodes.start,p.nodes.end),p.nodes=null),v!==""){if(yt){bt.data;for(var f=Dr(),_=f;f!==null&&(f.nodeType!==un||f.data!=="");)_=f,f=Za(f);if(f===null)throw Rn(),In;za(bt,_),d=pa(f);return}var m=v+"";a?m=`<svg>${m}</svg>`:l&&(m=`<math>${m}</math>`);var b=qs(m);if((a||l)&&(b=ca(b)),za(ca(b),b.lastChild),a||l)for(;ca(b);)d.before(ca(b));else d.before(b)}})}const oi=[...` 	
\r\fÂ \v\uFEFF`];function Jo(t,r,a){var l=t==null?"":""+t;if(r&&(l=l?l+" "+r:r),a){for(var o in a)if(a[o])l=l?l+" "+o:o;else if(l.length)for(var d=o.length,v=0;(v=l.indexOf(o,v))>=0;){var p=v+d;(v===0||oi.includes(l[v-1]))&&(p===l.length||oi.includes(l[p]))?l=(v===0?"":l.substring(0,v))+l.substring(p+1):v=p}}return l===""?null:l}function St(t,r,a,l,o,d){var v=t.__className;if(yt||v!==a||v===void 0){var p=Jo(a,l,d);(!yt||p!==t.getAttribute("class"))&&(p==null?t.removeAttribute("class"):r?t.className=p:t.setAttribute("class",p)),t.__className=a}else if(d&&o!==d)for(var f in d){var _=!!d[f];(o==null||_!==!!o[f])&&t.classList.toggle(f,_)}return d}function cn(t,r,a=!1){if(t.multiple){if(r==null)return;if(!An(r))return so();for(var l of t.options)l.selected=r.includes(Sn(l));return}for(l of t.options){var o=Sn(l);if(xo(o,r)){l.selected=!0;return}}(!a||r!==void 0)&&(t.selectedIndex=-1)}function Cn(t){var r=new MutationObserver(()=>{cn(t,t.__value)});r.observe(t,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),ls(()=>{r.disconnect()})}function Ta(t,r,a=r){var l=new WeakSet,o=!0;Us(t,"change",d=>{var v=d?"[selected]":":checked",p;if(t.multiple)p=[].map.call(t.querySelectorAll(v),Sn);else{var f=t.querySelector(v)??t.querySelector("option:not([disabled])");p=f&&Sn(f)}a(p),wt!==null&&l.add(wt)}),Xi(()=>{var d=r();if(t===document.activeElement){var v=kn??wt;if(l.has(v))return}if(cn(t,d,o),o&&d===void 0){var p=t.querySelector(":checked");p!==null&&(d=Sn(p),a(d))}t.__value=d,o=!1}),Cn(t)}function Sn(t){return"__value"in t?t.__value:t.value}const Go=Symbol("is custom element"),Yo=Symbol("is html");function ae(t){if(yt){var r=!1,a=()=>{if(!r){if(r=!0,t.hasAttribute("value")){var l=t.value;ct(t,"value",null),t.value=l}if(t.hasAttribute("checked")){var o=t.checked;ct(t,"checked",null),t.checked=o}}};t.__on_r=a,Fr(a),Yi()}}function vt(t,r){var a=Bs(t);a.value===(a.value=r??void 0)||t.value===r&&(r!==0||t.nodeName!=="PROGRESS")||(t.value=r??"")}function zs(t,r){var a=Bs(t);a.checked!==(a.checked=r??void 0)&&(t.checked=r)}function ct(t,r,a,l){var o=Bs(t);yt&&(o[r]=t.getAttribute(r),r==="src"||r==="srcset"||r==="href"&&t.nodeName==="LINK")||o[r]!==(o[r]=a)&&(r==="loading"&&(t[Rl]=a),a==null?t.removeAttribute(r):typeof a!="string"&&Zo(t).includes(r)?t[r]=a:t.setAttribute(r,a))}function Bs(t){return t.__attributes??(t.__attributes={[Go]:t.nodeName.includes("-"),[Yo]:t.namespaceURI===no})}var ci=new Map;function Zo(t){var r=t.getAttribute("is")||t.nodeName,a=ci.get(r);if(a)return a;ci.set(r,a=[]);for(var l,o=t,d=Element.prototype;d!==o;){l=mi(o);for(var v in l)l[v].set&&a.push(v);o=Ms(o)}return a}let _s=null;function Qo(){var r,a;if(_s===null){var t=document.createElement("select");t.innerHTML="<option><span>t</span></option>",_s=((a=(r=t.firstChild)==null?void 0:r.firstChild)==null?void 0:a.nodeType)===1}return _s}function Xo(t,r){var a=yt;Qo()||($r(!1),t.textContent="",t.append(Co("")));try{r()}finally{a&&(yt?n(t):($r(!0),pa(t)))}}function De(t,r,a=r){var l=new WeakSet;Us(t,"input",async o=>{var d=o?t.defaultValue:t.value;if(d=hs(t)?gs(d):d,a(d),wt!==null&&l.add(wt),await vl(),d!==(d=r())){var v=t.selectionStart,p=t.selectionEnd,f=t.value.length;if(t.value=d??"",p!==null){var _=t.value.length;v===p&&p===f&&_>f?(t.selectionStart=_,t.selectionEnd=_):(t.selectionStart=v,t.selectionEnd=Math.min(p,_))}}}),(yt&&t.defaultValue!==t.value||u(r)==null&&t.value)&&(a(hs(t)?gs(t.value):t.value),wt!==null&&l.add(wt)),_n(()=>{var o=r();if(t===document.activeElement){var d=kn??wt;if(l.has(d))return}hs(t)&&o===gs(t.value)||t.type==="date"&&!o&&!t.value||o!==t.value&&(t.value=o??"")})}function dn(t,r,a=r){Us(t,"change",l=>{var o=l?t.defaultChecked:t.checked;a(o)}),(yt&&t.defaultChecked!==t.checked||u(r)==null)&&a(t.checked),_n(()=>{var l=r();t.checked=!!l})}function hs(t){var r=t.type;return r==="number"||r==="range"}function gs(t){return t===""?null:+t}function di(t,r){return t===r||(t==null?void 0:t[ir])===r}function Gn(t={},r,a,l){return Xi(()=>{var o,d;return _n(()=>{o=d,d=(l==null?void 0:l())||[],u(()=>{t!==a(...d)&&(r(t,...d),o&&di(a(...o),t)&&r(null,...o))})}),()=>{Fr(()=>{d&&di(a(...d),t)&&r(null,...d)})}}),t}function En(t){return function(...r){var a=r[0];return a.stopPropagation(),t==null?void 0:t.apply(this,r)}}function Ja(t){return function(...r){var a=r[0];return a.preventDefault(),t==null?void 0:t.apply(this,r)}}function Ot(t=!1){const r=Ft,a=r.l.u;if(!a)return;let l=()=>ut(r.s);if(t){let o=0,d={};const v=ns(()=>{let p=!1;const f=r.s;for(const _ in f)f[_]!==d[_]&&(d[_]=f[_],p=!0);return p&&o++,o});l=()=>e(v)}a.b.length&&Po(()=>{vi(r,l),qn(a.b)}),Ns(()=>{const o=u(()=>a.m.map(Ml));return()=>{for(const d of o)typeof d=="function"&&d()}}),a.a.length&&Ns(()=>{vi(r,l),qn(a.a)})}function vi(t,r){if(t.l.s)for(const a of t.l.s)e(a);r()}function Pn(t,r){var d;var a=(d=t.$$events)==null?void 0:d[r.type],l=An(a)?a.slice():a==null?[]:[a];for(var o of l)o.call(this,r)}function Vs(t,r,a){if(t==null)return r(void 0),a&&a(void 0),hr;const l=u(()=>t.subscribe(r,a));return l.unsubscribe?()=>l.unsubscribe():l}const Wr=[];function ec(t,r){return{subscribe:hl(t,r).subscribe}}function hl(t,r=hr){let a=null;const l=new Set;function o(p){if(Ni(t,p)&&(t=p,a)){const f=!Wr.length;for(const _ of l)_[1](),Wr.push(_,t);if(f){for(let _=0;_<Wr.length;_+=2)Wr[_][0](Wr[_+1]);Wr.length=0}}}function d(p){o(p(t))}function v(p,f=hr){const _=[p,f];return l.add(_),l.size===1&&(a=r(o,d)||hr),p(t),()=>{l.delete(_),l.size===0&&a&&(a(),a=null)}}return{set:o,update:d,subscribe:v}}function gl(t,r,a){const l=!Array.isArray(t),o=l?[t]:t;if(!o.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const d=r.length<2;return ec(a,(v,p)=>{let f=!1;const _=[];let m=0,b=hr;const y=()=>{if(m)return;b();const T=r(l?_[0]:_,v,p);d?v(T):b=typeof T=="function"?T:hr},x=o.map((T,re)=>Vs(T,z=>{_[re]=z,m&=~(1<<re),f&&y()},()=>{m|=1<<re}));return f=!0,y(),function(){qn(x),b(),f=!1}})}function tc(t){let r;return Vs(t,a=>r=a)(),r}let On=!1,$s=Symbol();function Nn(t,r,a){const l=a[r]??(a[r]={store:null,source:S(void 0),unsubscribe:hr});if(l.store!==t&&!($s in a))if(l.unsubscribe(),l.store=t??null,t==null)l.source.v=void 0,l.unsubscribe=hr;else{var o=!0;l.unsubscribe=Vs(t,d=>{o?l.source.v=d:c(l.source,d)}),o=!1}return t&&$s in a?tc(t):e(l.source)}function Ws(){const t={};function r(){ls(()=>{for(var a in t)t[a].unsubscribe();gi(t,$s,{enumerable:!1,value:!0})})}return[t,r]}function ac(t){var r=On;try{return On=!1,[t(),On]}finally{On=r}}function $t(t,r,a,l){var fe;var o=!fn||(a&Ql)!==0,d=(a&eo)!==0,v=(a&to)!==0,p=l,f=!0,_=()=>(f&&(f=!1,p=v?u(l):l),p),m;if(d){var b=ir in t||Il in t;m=((fe=Gr(t,r))==null?void 0:fe.set)??(b&&r in t?I=>t[r]=I:void 0)}var y,x=!1;d?[y,x]=ac(()=>t[r]):y=t[r],y===void 0&&l!==void 0&&(y=_(),m&&(o&&Kl(),m(y)));var T;if(o?T=()=>{var I=t[r];return I===void 0?_():(f=!0,I)}:T=()=>{var I=t[r];return I!==void 0&&(p=void 0),I===void 0?p:I},o&&!(a&Xl))return T;if(m){var re=t.$$legacy;return function(I,ce){return arguments.length>0?((!o||!ce||re||x)&&m(ce?T():I),I):T()}}var z=!1,E=(a&Zl?ns:ss)(()=>(z=!1,T()));d&&e(E);var Pe=Tt;return function(I,ce){if(arguments.length>0){const W=ce?e(E):o&&d?Jr(I):I;return c(E,W),z=!0,p!==void 0&&(p=W),I}return yr&&z||Pe.f&sr?E.v:e(E)}}function va(t){Ft===null&&xi(),fn&&Ft.l!==null?nc(Ft).m.push(t):Ns(()=>{const r=u(t);if(typeof r=="function")return r})}function rc(t,r,{bubbles:a=!1,cancelable:l=!1}={}){return new CustomEvent(t,{detail:r,bubbles:a,cancelable:l})}function Dn(){const t=Ft;return t===null&&xi(),(r,a,l)=>{var d;const o=(d=t.s.$$events)==null?void 0:d[r];if(o){const v=An(o)?o.slice():[o],p=rc(r,a,l);for(const f of v)f.call(t.x,p);return!p.defaultPrevented}return!0}}function nc(t){var r=t.l;return r.u??(r.u={a:[],b:[],m:[]})}const sc="5";var hi;typeof window<"u"&&((hi=window.__svelte??(window.__svelte={})).v??(hi.v=new Set)).add(sc);oo();const ms="http://localhost:8788/api".trim(),xa=ms&&ms.startsWith("http")?ms:"http://localhost:8788/api";async function kt(t,r={}){const a=await fetch(`${xa}${t}`,{credentials:"include",...r});if(!a.ok){const l=await a.text();throw new Error(l||`Request failed (${a.status})`)}return a.json()}async function ic(){return kt("/status")}async function ml(){return kt("/main-products")}async function lc(){return kt("/main-products/catalogs")}async function oc(t,r){const a=new FormData;a.append("file",r);const l=await fetch(`${xa}/main-products/${encodeURIComponent(t)}/catalog-image`,{method:"POST",body:a,credentials:"include"});if(!l.ok){const o=await l.text();throw new Error(o||`Upload failed (${l.status})`)}return l.json()}async function cc(t){const r=await fetch(`${xa}/main-products/${encodeURIComponent(t)}/catalog-image`,{method:"DELETE",credentials:"include"});if(!r.ok){const a=await r.text();throw new Error(a||`Delete failed (${r.status})`)}return r.json()}async function dc(t){const r=await fetch(`${xa}/import/products`,{method:"POST",body:t,credentials:"include"});if(!r.ok){const a=await r.text();throw new Error(a||`Import failed (${r.status})`)}return r.json()}async function vc(t){const r=await fetch(`${xa}/import/pricelist`,{method:"POST",body:t,credentials:"include"});if(!r.ok){const a=await r.text();throw new Error(a||`Import failed (${r.status})`)}return r.json()}async function uc(){return kt("/settings/price-currency")}async function fc(t){return kt("/settings/price-currency",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t||{})})}async function pc(t,r){return kt("/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:r})})}async function _c(){return kt("/auth/logout",{method:"POST"})}async function hc(t){return kt("/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t||{})})}async function Hs(){return kt("/auth/me")}async function gc(t){return kt("/user",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t||{})})}async function mc(){return kt("/delivery-addresses")}async function As({query:t="",limit:r=200}={}){const a=new URLSearchParams;t&&a.set("query",t),r&&a.set("limit",String(r));const l=a.toString();return kt(`/categories${l?`?${l}`:""}`)}async function yc(t){return kt("/categories",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t||{})})}async function bc(t){return kt("/categories/update",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t||{})})}async function kc(t,{cascade:r=!1}={}){const a=r?"?cascade=1":"",l=await fetch(`${xa}/categories/${encodeURIComponent(t)}${a}`,{method:"DELETE",credentials:"include"});if(!l.ok){const o=await l.text();throw new Error(o||`Delete failed (${l.status})`)}return l.json()}async function wc({query:t="",limit:r=200}={}){const a=new URLSearchParams;t&&a.set("query",t),r&&a.set("limit",String(r));const l=a.toString();return kt(`/machine-categories${l?`?${l}`:""}`)}async function xc(t){return kt("/machine-categories",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t||{})})}async function Sc(t){return kt("/machine-categories/update",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t||{})})}async function Cc(t,{cascade:r=!1}={}){const a=r?"?cascade=1":"",l=await fetch(`${xa}/machine-categories/${encodeURIComponent(t)}${a}`,{method:"DELETE",credentials:"include"});if(!l.ok){const o=await l.text();throw new Error(o||`Delete failed (${l.status})`)}return l.json()}async function ui(t,r,a=0){return kt(`/machine-categories/${encodeURIComponent(t)}/product-categories`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({categoryKey:r,position:a})})}async function Ec(t,r){const a=await fetch(`${xa}/machine-categories/${encodeURIComponent(t)}/product-categories/${encodeURIComponent(r)}`,{method:"DELETE",credentials:"include"});if(!a.ok){const l=await a.text();throw new Error(l||`Delete failed (${a.status})`)}return a.json()}async function Pc({query:t="",limit:r=200}={}){const a=new URLSearchParams;t&&a.set("query",t),r&&a.set("limit",String(r));const l=a.toString();return kt(`/products${l?`?${l}`:""}`)}async function Nc(t){return kt("/products",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t||{})})}async function Tc(t){return kt("/products/update",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t||{})})}async function Lc(t){const r=await fetch(`${xa}/products/${encodeURIComponent(t)}`,{method:"DELETE",credentials:"include"});if(!r.ok){const a=await r.text();throw new Error(a||`Delete failed (${r.status})`)}return r.json()}async function zc(t,r){return kt(`/products/${encodeURIComponent(t)}/categories`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({categoryKey:r})})}async function $c(t,r){const a=await fetch(`${xa}/products/${encodeURIComponent(t)}/categories/${encodeURIComponent(r)}`,{method:"DELETE",credentials:"include"});if(!a.ok){const l=await a.text();throw new Error(l||`Delete failed (${a.status})`)}return a.json()}async function Ac({query:t="",limit:r=200}={}){const a=new URLSearchParams;t&&a.set("query",t),r&&a.set("limit",String(r));const l=a.toString();return kt(`/language/categories${l?`?${l}`:""}`)}async function Mc({query:t="",limit:r=200}={}){const a=new URLSearchParams;t&&a.set("query",t),r&&a.set("limit",String(r));const l=a.toString();return kt(`/language/products${l?`?${l}`:""}`)}async function Ic(t){return kt("/language/update",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t||{})})}async function ys(t){return kt("/generate-json",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t||{})})}async function Rc(t){const r=new URLSearchParams;t&&r.set("mainKey",t);const a=r.toString();return kt(`/image-maps${a?`?${a}`:""}`)}async function Dc(t){return kt(`/image-maps/${encodeURIComponent(t)}`)}async function jc(t,r){return kt("/image-maps",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({key:t,html:r})})}async function Oc(t){const r=await fetch(`${xa}/image-maps/${encodeURIComponent(t)}`,{method:"DELETE",credentials:"include"});if(!r.ok){const a=await r.text();throw new Error(a||`Delete failed (${r.status})`)}return r.json()}async function Uc(){return kt("/admin/users")}async function Fc(t){return kt("/admin/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t||{})})}async function Kc(t,r){return kt(`/admin/users/${encodeURIComponent(t)}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r||{})})}async function qc(t){const r=await fetch(`${xa}/admin/users/${encodeURIComponent(t)}`,{method:"DELETE",credentials:"include"});if(!r.ok){const a=await r.text();throw new Error(a||`Delete failed (${r.status})`)}return r.json()}async function Js(){return kt("/admin/companies")}async function Bc(t){return kt("/admin/companies",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t||{})})}async function Vc(t,r){return kt(`/admin/companies/${encodeURIComponent(t)}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r||{})})}async function Wc(t){const r=await fetch(`${xa}/admin/companies/${encodeURIComponent(t)}`,{method:"DELETE",credentials:"include"});if(!r.ok){const a=await r.text();throw new Error(a||`Delete failed (${r.status})`)}return r.json()}async function Hc(t=""){const r=new URLSearchParams;t&&r.set("company_id",String(t));const a=r.toString();return kt(`/admin/delivery-addresses${a?`?${a}`:""}`)}async function Jc(t){return kt("/admin/delivery-addresses",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t||{})})}async function Gc(t,r){return kt(`/admin/delivery-addresses/${encodeURIComponent(t)}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r||{})})}async function Yc(t){const r=await fetch(`${xa}/admin/delivery-addresses/${encodeURIComponent(t)}`,{method:"DELETE",credentials:"include"});if(!r.ok){const a=await r.text();throw new Error(a||`Delete failed (${r.status})`)}return r.json()}var Zc=C('<div style="margin-top: 8px;"> </div> <div> </div>',1),Qc=C('<div style="margin-top: 8px;"> </div> <div> </div> <div> </div> <!>',1),Xc=C('<div class="status"><strong> </strong> <!></div>'),ed=C('<section class="card"><h2>Import product tree</h2> <p>Load the CSV and optional images ZIP. Catalog image is only used for the main product.</p> <div class="field"><label for="import-csv">CSV file (required)</label> <input id="import-csv" type="file" accept=".csv"/></div> <div class="field"><label for="import-zip">Images ZIP (optional)</label> <input id="import-zip" type="file" accept=".zip"/></div> <div class="field"><label for="import-catalog">Catalog image (optional)</label> <input id="import-catalog" type="file" accept="image/*"/></div> <div class="inline"><button> </button></div> <p style="margin-top: 8px; color: var(--muted); font-size: 12px;">Import adds new rows and updates existing ones. Product-to-category links are replaced for SKUs in the CSV.</p> <!></section>');function td(t,r){Rt(r,!1);let a=S(),l=S(),o=S(),d=S(null),v=S(!1);async function p(){if(c(d,null),!e(a)){c(d,{type:"error",message:"Choose a CSV file first."});return}c(v,!0);try{const I=new FormData;I.append("csv",e(a)),e(l)&&I.append("zip",e(l)),e(o)&&I.append("catalog",e(o));const ce=await dc(I);c(d,{type:"success",message:"Import complete.",result:ce})}catch(I){c(d,{type:"error",message:I.message||"Import failed."})}finally{c(v,!1)}}Ot();var f=ed(),_=i(s(f),4),m=i(s(_),2);n(_);var b=i(_,2),y=i(s(b),2);n(b);var x=i(b,2),T=i(s(x),2);n(x);var re=i(x,2),z=s(re),E=s(z,!0);n(z),n(re);var Pe=i(re,4);{var fe=I=>{var ce=Xc(),W=s(ce),ie=s(W);n(W);var Z=i(W),V=i(Z);{var ve=ze=>{var me=Qc(),_e=Oe(me),we=s(_e);n(_e);var se=i(_e,2),K=s(se);n(se);var Ne=i(se,2),ye=s(Ne);n(Ne);var Ae=i(Ne,2);{var ke=Se=>{var qe=Zc(),He=Oe(qe),H=s(He);n(He);var J=i(He,2),Le=s(J);n(J),R(()=>{var be,Ke,ee,O;w(H,`Created: ${(((be=e(d).result.created)==null?void 0:be.categories)||0)??""} categories, ${(((Ke=e(d).result.created)==null?void 0:Ke.products)||0)??""} products.`),w(Le,`Updated: ${(((ee=e(d).result.updated)==null?void 0:ee.categories)||0)??""} categories, ${(((O=e(d).result.updated)==null?void 0:O.products)||0)??""} products.`)}),h(Se,qe)};ne(Ae,Se=>{(e(d).result.created||e(d).result.updated)&&Se(ke)})}R(Se=>{w(we,`Imported: ${e(d).result.categories??""} categories, ${e(d).result.products??""} products.`),w(K,`Images: ${e(d).result.images??""} files.`),w(ye,`Main keys: ${Se??""}`)},[()=>{var Se;return(Se=e(d).result.mainKeys)==null?void 0:Se.join(", ")}]),h(ze,me)};ne(V,ze=>{e(d).result&&ze(ve)})}n(ce),R(()=>{w(ie,`${e(d).type==="error"?"Error":"Success"}:`),w(Z,` ${e(d).message??""} `)}),h(I,ce)};ne(Pe,I=>{e(d)&&I(fe)})}n(f),R(()=>{z.disabled=e(v),w(E,e(v)?"Importing...":"Import")}),L("change",m,I=>c(a,I.target.files[0])),L("change",y,I=>c(l,I.target.files[0])),L("change",T,I=>c(o,I.target.files[0])),L("click",z,p),h(t,f),Dt()}var ad=C('<div style="margin-top: 8px;"> </div>'),rd=C('<div class="status"><strong> </strong> <!></div>'),nd=C('<div class="currency-row svelte-15ahssj"><input type="text" placeholder="SEK" class="svelte-15ahssj"/> <input type="text" placeholder="Swedish krona" class="svelte-15ahssj"/> <input type="text" placeholder="1" class="svelte-15ahssj"/> <button class="secondary" type="button">Remove</button></div>'),sd=C('<div class="status"><strong> </strong> </div>'),id=C('<section class="card"><h2>Import price list</h2> <p>Updates product prices by SKU from a price list CSV.</p> <div class="field"><label for="price-csv">Price list CSV</label> <input id="price-csv" type="file" accept=".csv"/></div> <button> </button> <!></section> <section class="card"><h2>Currency settings</h2> <p>Store the currencies used by the frontend and the base currency for pricing.</p> <div class="field"><label for="base-currency">Base currency code</label> <input id="base-currency" type="text" placeholder="SEK"/></div> <div class="currency-grid svelte-15ahssj"><div class="currency-header svelte-15ahssj">Code</div> <div class="currency-header svelte-15ahssj">Name</div> <div class="currency-header svelte-15ahssj">Rate</div> <div class="currency-header svelte-15ahssj"></div> <!></div> <div class="inline" style="margin-top: 12px;"><button class="secondary" type="button">Add currency</button> <button type="button"> </button></div> <!></section>',1);function ld(t,r){Rt(r,!1);let a=S(),l=S(null),o=S(!1),d=S("SEK"),v=S([{code:"SEK",name:"Swedish krona",rate:1}]),p=S(null),f=S(!1);va(async()=>{try{const K=await uc();K!=null&&K.baseCurrency&&c(d,K.baseCurrency),Array.isArray(K==null?void 0:K.currencies)&&K.currencies.length&&c(v,K.currencies)}catch(K){c(p,{type:"error",message:K.message||"Could not load currency settings."})}});async function _(){if(c(l,null),!e(a)){c(l,{type:"error",message:"Choose a CSV file first."});return}c(o,!0);try{const K=new FormData;K.append("csv",e(a));const Ne=await vc(K);c(l,{type:"success",message:"Price list updated.",result:Ne})}catch(K){c(l,{type:"error",message:K.message||"Import failed."})}finally{c(o,!1)}}function m(){c(v,[...e(v),{code:"",name:"",rate:""}])}function b(K){c(v,e(v).filter((Ne,ye)=>ye!==K))}async function y(){c(p,null),c(f,!0);try{const K={baseCurrency:e(d),currencies:e(v)},Ne=await fc(K);c(d,Ne.baseCurrency),c(v,Ne.currencies),c(p,{type:"success",message:"Currency settings saved."})}catch(K){c(p,{type:"error",message:K.message||"Save failed."})}finally{c(f,!1)}}Ot();var x=id(),T=Oe(x),re=i(s(T),4),z=i(s(re),2);n(re);var E=i(re,2),Pe=s(E,!0);n(E);var fe=i(E,2);{var I=K=>{var Ne=rd(),ye=s(Ne),Ae=s(ye);n(ye);var ke=i(ye),Se=i(ke);{var qe=He=>{var H=ad(),J=s(H);n(H),R(()=>w(J,`Updated: ${e(l).result.updated??""} items. Missing: ${e(l).result.missing??""}.`)),h(He,H)};ne(Se,He=>{e(l).result&&He(qe)})}n(Ne),R(()=>{w(Ae,`${e(l).type==="error"?"Error":"Success"}:`),w(ke,` ${e(l).message??""} `)}),h(K,Ne)};ne(fe,K=>{e(l)&&K(I)})}n(T);var ce=i(T,2),W=i(s(ce),4),ie=i(s(W),2);ae(ie),n(W);var Z=i(W,2),V=i(s(Z),8);at(V,1,()=>e(v),st,(K,Ne,ye)=>{var Ae=nd(),ke=s(Ae);ae(ke);var Se=i(ke,2);ae(Se);var qe=i(Se,2);ae(qe);var He=i(qe,2);n(Ae),De(ke,()=>e(Ne).code,H=>(e(Ne).code=H,da(()=>e(v)))),De(Se,()=>e(Ne).name,H=>(e(Ne).name=H,da(()=>e(v)))),De(qe,()=>e(Ne).rate,H=>(e(Ne).rate=H,da(()=>e(v)))),L("click",He,()=>b(ye)),h(K,Ae)}),n(Z);var ve=i(Z,2),ze=s(ve),me=i(ze,2),_e=s(me,!0);n(me),n(ve);var we=i(ve,2);{var se=K=>{var Ne=sd(),ye=s(Ne),Ae=s(ye);n(ye);var ke=i(ye);n(Ne),R(()=>{w(Ae,`${e(p).type==="error"?"Error":"Success"}:`),w(ke,` ${e(p).message??""}`)}),h(K,Ne)};ne(we,K=>{e(p)&&K(se)})}n(ce),R(()=>{E.disabled=e(o),w(Pe,e(o)?"Updating...":"Update prices"),me.disabled=e(f),w(_e,e(f)?"Saving...":"Save settings")}),L("change",z,K=>c(a,K.target.files[0])),L("click",E,_),De(ie,()=>e(d),K=>c(d,K)),L("click",ze,m),L("click",me,y),h(t,x),Dt()}var od=C("<option> </option>"),cd=C('<div class="progress-container svelte-ersja0"><progress class="svelte-ersja0"></progress> <div class="progress-label svelte-ersja0"> </div></div>'),dd=C('<div style="margin-top: 8px;"> </div> <div> </div>',1),vd=C('<div class="status"><strong> </strong> <!></div>'),ud=C('<section class="card"><h2>Generate JSON files</h2> <p>Writes static JSON files for the frontend.</p> <div class="field"><label for="json-generate-for">Generate for</label> <select id="json-generate-for"><option>All main products</option><!></select></div> <!> <button> </button> <!></section>');function fd(t,r){Rt(r,!1);let a=S([]),l=S(""),o=S(null),d=S(!1),v=S(0),p=S(0),f=S("");va(async()=>{try{c(a,await ml())}catch(ce){c(o,{type:"error",message:ce.message||"Could not load main products."})}});async function _(){var ie;c(o,null),c(d,!0),c(v,0),c(f,"Initializing...");let ce=0;const W={outputDir:"",files:[]};try{if(e(l)){c(p,1),c(f,`Generating for ${e(l)}...`);const Z=await ys({mainKey:e(l)});ce=((ie=Z.files)==null?void 0:ie.length)||0,W.outputDir=Z.outputDir,c(v,1)}else{c(p,e(a).length+1);for(let V=0;V<e(a).length;V++){const ve=e(a)[V];c(f,`Processing ${ve.name} (${V+1}/${e(a).length})...`);const ze=await ys({mainKey:ve.key,skipGlobal:!0});ze.files&&(ce+=ze.files.length,W.outputDir||(W.outputDir=ze.outputDir)),c(v,V+1)}c(f,"Finalizing global files...");const Z=await ys({onlyGlobal:!0});Z.files&&(ce+=Z.files.length),c(v,e(v)+1)}c(o,{type:"success",message:"JSON generation complete.",result:{outputDir:W.outputDir,files:{length:ce}}})}catch(Z){c(o,{type:"error",message:Z.message||"Generation failed."})}finally{c(d,!1),c(f,"")}}Ot();var m=ud(),b=i(s(m),4),y=i(s(b),2);R(()=>{e(l),da(()=>{e(a)})});var x=s(y);x.value=x.__value="";var T=i(x);at(T,1,()=>e(a),st,(ce,W)=>{var ie=od(),Z=s(ie);n(ie);var V={};R(()=>{w(Z,`${e(W).name??""} (${e(W).key??""})`),V!==(V=e(W).key)&&(ie.value=(ie.__value=e(W).key)??"")}),h(ce,ie)}),n(y),n(b);var re=i(b,2);{var z=ce=>{var W=cd(),ie=s(W),Z=i(ie,2),V=s(Z,!0);n(Z),n(W),R(()=>{vt(ie,e(v)),ct(ie,"max",e(p)),w(V,e(f))}),h(ce,W)};ne(re,ce=>{e(d)&&ce(z)})}var E=i(re,2),Pe=s(E,!0);n(E);var fe=i(E,2);{var I=ce=>{var W=vd(),ie=s(W),Z=s(ie);n(ie);var V=i(ie),ve=i(V);{var ze=me=>{var _e=dd(),we=Oe(_e),se=s(we);n(we);var K=i(we,2),Ne=s(K);n(K),R(()=>{var ye;w(se,`Output: ${e(o).result.outputDir??""}`),w(Ne,`Total Files Generated: ${((ye=e(o).result.files)==null?void 0:ye.length)??""}`)}),h(me,_e)};ne(ve,me=>{e(o).result&&me(ze)})}n(W),R(()=>{w(Z,`${e(o).type==="error"?"Error":"Success"}:`),w(V,` ${e(o).message??""} `)}),h(ce,W)};ne(fe,ce=>{e(o)&&ce(I)})}n(m),R(()=>{E.disabled=e(d),w(Pe,e(d)?"Processing...":"Generate")}),Ta(y,()=>e(l),ce=>c(l,ce)),L("click",E,_),h(t,m),Dt()}var pd=C('<div class="status"><strong> </strong> </div>'),_d=C('<div class="lang-id svelte-8g558k"> </div> <div class="lang-sub svelte-8g558k"> </div>',1),hd=C('<div class="lang-id svelte-8g558k"> </div>'),gd=C('<div><div class="lang-meta svelte-8g558k"><!></div> <div class="lang-cols svelte-8g558k"><div class="lang-col svelte-8g558k"><h3 class="svelte-8g558k">SV</h3> <input type="text" placeholder="Name (SV)" class="svelte-8g558k"/> <textarea rows="3" placeholder="Description (SV)" class="svelte-8g558k"></textarea></div> <div class="lang-col svelte-8g558k"><h3 class="svelte-8g558k">EN</h3> <input type="text" placeholder="Name (EN)" class="svelte-8g558k"/> <textarea rows="3" placeholder="Description (EN)" class="svelte-8g558k"></textarea></div> <div class="lang-col svelte-8g558k"><h3 class="svelte-8g558k">PL</h3> <input type="text" placeholder="Name (PL)" class="svelte-8g558k"/> <textarea rows="3" placeholder="Description (PL)" class="svelte-8g558k"></textarea></div></div></div>'),md=C('<section class="panel"></section>'),yd=C('<section class="card"><h2>Language editor</h2> <p>Find products or categories, then update Swedish and English fields.</p> <div class="inline"><button type="button">Categories</button> <button type="button">Products</button></div> <div class="field" style="margin-top: 12px;"><label for="lang-search">Search</label> <input id="lang-search" type="text" placeholder="Key, SKU, name, or description"/></div> <div class="inline"><label class="inline" for="limit-input"><span style="margin-right: 8px;">Limit</span> <input id="limit-input" type="text" style="width: 80px;"/></label> <button type="button"> </button> <button class="secondary" type="button"> </button></div> <!></section> <!>',1);function bd(t,r){Rt(r,!1);let a=S("categories"),l=S(""),o=S(200),d=S([]),v=S(null),p=S(!1),f=S(!1);function _(ye){return ye.map(Ae=>({...Ae,dirty:!1}))}function m(){return e(d).filter(ye=>ye.dirty).length}async function b(){c(v,null),c(p,!0);try{const ye=e(a)==="categories"?await Ac({query:e(l),limit:e(o)}):await Mc({query:e(l),limit:e(o)});c(d,_(ye||[])),e(d).length||c(v,{type:"info",message:"No matches found."})}catch(ye){c(v,{type:"error",message:ye.message||"Could not load items."})}finally{c(p,!1)}}function y(ye,Ae,ke){const Se=[...e(d)];Se[ye]={...Se[ye],[Ae]:ke,dirty:!0},c(d,Se)}async function x(){const ye=e(d).filter(Ae=>Ae.dirty);if(!ye.length){c(v,{type:"info",message:"No pending changes."});return}c(v,null),c(f,!0);try{const Ae={type:e(a)==="categories"?"category":"product",items:ye},ke=await Ic(Ae);c(d,e(d).map(Se=>({...Se,dirty:!1}))),c(v,{type:"success",message:`Saved ${ke.updated} items.`})}catch(Ae){c(v,{type:"error",message:Ae.message||"Save failed."})}finally{c(f,!1)}}Ot();var T=yd(),re=Oe(T),z=i(s(re),4),E=s(z);let Pe;var fe=i(E,2);let I;n(z);var ce=i(z,2),W=i(s(ce),2);ae(W),n(ce);var ie=i(ce,2),Z=s(ie),V=i(s(Z),2);ae(V),n(Z);var ve=i(Z,2),ze=s(ve,!0);n(ve);var me=i(ve,2),_e=s(me,!0);n(me),n(ie);var we=i(ie,2);{var se=ye=>{var Ae=pd(),ke=s(Ae),Se=s(ke);n(ke);var qe=i(ke);n(Ae),R(()=>{w(Se,`${e(v).type==="error"?"Error":"Status"}:`),w(qe,` ${e(v).message??""}`)}),h(ye,Ae)};ne(we,ye=>{e(v)&&ye(se)})}n(re);var K=i(re,2);{var Ne=ye=>{var Ae=md();at(Ae,5,()=>e(d),st,(ke,Se,qe)=>{var He=gd(),H=s(He),J=s(H);{var Le=N=>{var G=_d(),F=Oe(G),Y=s(F);n(F);var Q=i(F,2),Me=s(Q);n(Q),R(()=>{w(Y,`Key: ${e(Se).key??""}`),w(Me,`Path: ${e(Se).path??""}`)}),h(N,G)},be=N=>{var G=hd(),F=s(G);n(G),R(()=>w(F,`SKU: ${e(Se).sku??""}`)),h(N,G)};ne(J,N=>{e(a)==="categories"?N(Le):N(be,!1)})}n(H);var Ke=i(H,2),ee=s(Ke),O=i(s(ee),2);ae(O);var he=i(O,2);nr(he),n(ee);var M=i(ee,2),k=i(s(M),2);ae(k);var B=i(k,2);nr(B),n(M);var g=i(M,2),P=i(s(g),2);ae(P);var A=i(P,2);nr(A),n(g),n(Ke),n(He),R(()=>{St(He,1,`lang-row ${e(Se).dirty?"dirty":""}`,"svelte-8g558k"),vt(O,e(Se).name_sv||""),vt(he,e(Se).desc_sv||""),vt(k,e(Se).name_en||""),vt(B,e(Se).desc_en||""),vt(P,e(Se).name_pl||""),vt(A,e(Se).desc_pl||"")}),L("input",O,N=>y(qe,"name_sv",N.target.value)),L("input",he,N=>y(qe,"desc_sv",N.target.value)),L("input",k,N=>y(qe,"name_en",N.target.value)),L("input",B,N=>y(qe,"desc_en",N.target.value)),L("input",P,N=>y(qe,"name_pl",N.target.value)),L("input",A,N=>y(qe,"desc_pl",N.target.value)),h(ke,He)}),n(Ae),h(ye,Ae)};ne(K,ye=>{e(d).length&&ye(Ne)})}R(ye=>{Pe=St(E,1,"secondary",null,Pe,{active:e(a)==="categories"}),I=St(fe,1,"secondary",null,I,{active:e(a)==="products"}),ve.disabled=e(p),w(ze,e(p)?"Loading...":"Load"),me.disabled=e(f),w(_e,ye)},[()=>e(f)?"Saving...":`Save changes (${m()})`]),L("click",E,()=>{e(a)!=="categories"&&(c(a,"categories"),b())}),L("click",fe,()=>{e(a)!=="products"&&(c(a,"products"),b())}),De(W,()=>e(l),ye=>c(l,ye)),L("keydown",W,ye=>{ye.key==="Enter"&&b()}),De(V,()=>e(o),ye=>c(o,ye)),L("click",ve,b),L("click",me,x),h(t,T),Dt()}var kd=C('<div class="status"><strong> </strong> </div>'),wd=C('<div class="tree-sub svelte-tsm5t5"> </div>'),xd=C('<div><div class="tree-meta svelte-tsm5t5"><div class="tree-title svelte-tsm5t5"> </div> <!></div> <div class="tree-fields svelte-tsm5t5"><div class="field-block svelte-tsm5t5"><div class="field-label svelte-tsm5t5">Name (SV)</div> <div class="field-help svelte-tsm5t5">Displayed in the catalog for Swedish.</div> <input type="text" placeholder="Name in Swedish"/></div> <div class="field-block svelte-tsm5t5"><div class="field-label svelte-tsm5t5">Name (EN)</div> <div class="field-help svelte-tsm5t5">Displayed in the catalog for English.</div> <input type="text" placeholder="Name in English"/></div> <div class="field-block svelte-tsm5t5"><div class="field-label svelte-tsm5t5">Description (SV)</div> <div class="field-help svelte-tsm5t5">Optional text for the category page.</div> <textarea rows="2" placeholder="Description in Swedish" class="svelte-tsm5t5"></textarea></div> <div class="field-block svelte-tsm5t5"><div class="field-label svelte-tsm5t5">Description (EN)</div> <div class="field-help svelte-tsm5t5">Optional text for the category page.</div> <textarea rows="2" placeholder="Description in English" class="svelte-tsm5t5"></textarea></div> <div class="inline"><div class="field-block compact svelte-tsm5t5"><div class="field-label svelte-tsm5t5">Position</div> <div class="field-help svelte-tsm5t5">Lower number sorts first.</div> <input type="text" style="width: 120px;" placeholder="Order"/></div> <label class="inline"><input type="checkbox"/> <span style="margin-left: 6px;">Main product</span></label> <button class="danger svelte-tsm5t5" type="button">Delete</button></div></div></div>'),Sd=C('<section class="panel"></section>'),Cd=C('<section class="card"><h2>Category editor</h2> <p>Edit category names and structure details.</p> <div class="panel-card svelte-tsm5t5"><div class="section-title svelte-tsm5t5">Find &amp; update</div> <div class="inline"><label class="inline"><span style="margin-right: 8px;">Search</span> <input type="text" placeholder="Key, name"/></label> <label class="inline"><span style="margin-right: 8px;">Limit</span> <input type="text" style="width: 80px;"/></label> <button type="button"> </button> <button class="secondary" type="button"> </button></div></div> <div class="panel-card svelte-tsm5t5"><div class="section-title svelte-tsm5t5">Add new category</div> <div class="form-grid svelte-tsm5t5"><input type="text" placeholder="Name SV"/> <input type="text" placeholder="Name EN"/> <input type="text" placeholder="Position"/> <label class="inline"><input type="checkbox"/> <span style="margin-left: 6px;">Main product</span></label> <button type="button">Add category</button></div></div> <!></section> <!>',1),Ed=C('<div class="status"><strong> </strong> </div>'),Pd=C('<span class="tag svelte-tsm5t5"> <button type="button" class="svelte-tsm5t5">x</button></span>'),Nd=C('<div><div class="tree-meta svelte-tsm5t5"><div class="tree-title svelte-tsm5t5"> </div></div> <div class="tree-fields svelte-tsm5t5"><div class="field-block svelte-tsm5t5"><div class="field-label svelte-tsm5t5">Name (SV)</div> <div class="field-help svelte-tsm5t5">Primary Swedish product name.</div> <input type="text" placeholder="Name in Swedish"/></div> <div class="field-block svelte-tsm5t5"><div class="field-label svelte-tsm5t5">Name (EN)</div> <div class="field-help svelte-tsm5t5">Primary English product name.</div> <input type="text" placeholder="Name in English"/></div> <div class="field-block svelte-tsm5t5"><div class="field-label svelte-tsm5t5">Description (SV)</div> <div class="field-help svelte-tsm5t5">Optional details shown in product view.</div> <textarea rows="2" placeholder="Description in Swedish" class="svelte-tsm5t5"></textarea></div> <div class="field-block svelte-tsm5t5"><div class="field-label svelte-tsm5t5">Description (EN)</div> <div class="field-help svelte-tsm5t5">Optional details shown in product view.</div> <textarea rows="2" placeholder="Description in English" class="svelte-tsm5t5"></textarea></div> <div class="inline"><div class="field-block compact svelte-tsm5t5"><div class="field-label svelte-tsm5t5">Position</div> <div class="field-help svelte-tsm5t5">Lower number sorts first.</div> <input type="text" style="width: 120px;" placeholder="Order"/></div> <div class="field-block compact svelte-tsm5t5"><div class="field-label svelte-tsm5t5">Units</div> <div class="field-help svelte-tsm5t5">Shown for kit quantities.</div> <input type="text" style="width: 120px;" placeholder="Units"/></div> <div class="field-block compact svelte-tsm5t5"><div class="field-label svelte-tsm5t5">Price</div> <div class="field-help svelte-tsm5t5">Overrides price list import.</div> <input type="text" style="width: 120px;" placeholder="Price"/></div> <button class="danger svelte-tsm5t5" type="button">Delete</button></div> <div class="category-tags svelte-tsm5t5"></div> <div class="inline"><input list="category-keys" type="text" placeholder="Add category key"/> <button type="button" class="secondary svelte-tsm5t5">Add category</button></div></div></div>'),Td=C('<section class="panel"></section>'),Ld=C('<section class="card"><h2>Product editor</h2> <p>Edit product details and assign categories.</p> <div class="panel-card svelte-tsm5t5"><div class="section-title svelte-tsm5t5">Find &amp; update</div> <div class="inline"><label class="inline"><span style="margin-right: 8px;">Search</span> <input type="text" placeholder="SKU or name"/></label> <label class="inline"><span style="margin-right: 8px;">Limit</span> <input type="text" style="width: 80px;"/></label> <button type="button"> </button> <button class="secondary" type="button"> </button></div></div> <div class="panel-card svelte-tsm5t5"><div class="section-title svelte-tsm5t5">Add new product</div> <div class="form-grid svelte-tsm5t5"><input type="text" placeholder="SKU"/> <input type="text" placeholder="Name SV"/> <input type="text" placeholder="Name EN"/> <input type="text" placeholder="Price"/> <button type="button">Add product</button></div></div> <!></section> <!>',1),zd=C("<option></option>"),$d=C('<datalist id="category-keys"></datalist>'),Ad=C("<!> <!> <!>",1);function fi(t,r){Rt(r,!1);let a=$t(r,"mode",8,"both"),l=S(""),o=S(200),d=S([]),v=S(null),p=S(!1),f=S(!1),_=S({path:"",name_sv:"",name_en:"",desc_sv:"",desc_en:"",position:"",is_main:!1}),m=S(""),b=S(200),y=S([]),x=S(null),T=S(!1),re=S(!1),z=S([]),E=S({sku:"",name_sv:"",name_en:"",desc_sv:"",desc_en:"",pos_num:"",no_units:"",price:""});va(async()=>{await I()});function Pe(H){return H.map(J=>({...J,dirty:!1}))}function fe(H){return H.map(J=>({...J,dirty:!1,categoryInput:""}))}async function I(){try{const H=await As({query:"",limit:500});c(z,H.map(J=>J.key))}catch{c(z,[])}}async function ce(){c(v,null),c(p,!0);try{const H=await As({query:e(l),limit:e(o)});c(d,Pe(H)),e(d).length||c(v,{type:"info",message:"No categories found."})}catch(H){c(v,{type:"error",message:H.message||"Could not load categories."})}finally{c(p,!1)}}function W(H,J,Le){const be=[...e(d)];be[H]={...be[H],[J]:Le,dirty:!0},c(d,be)}async function ie(){const H=e(d).filter(J=>J.dirty);if(!H.length){c(v,{type:"info",message:"No pending changes."});return}c(v,null),c(f,!0);try{await bc({items:H}),c(d,e(d).map(J=>({...J,dirty:!1}))),c(v,{type:"success",message:`Saved ${H.length} categories.`})}catch(J){c(v,{type:"error",message:J.message||"Save failed."})}finally{c(f,!1)}}async function Z(){if(c(v,null),!e(_).path){const H=e(_).name_sv||e(_).name_en;H&&c(_,{...e(_),path:H})}if(!e(_).path){c(v,{type:"error",message:"Category name is required."});return}try{await yc(e(_)),c(_,{path:"",name_sv:"",name_en:"",desc_sv:"",desc_en:"",position:"",is_main:!1}),await ce(),await I(),c(v,{type:"success",message:"Category created."})}catch(H){c(v,{type:"error",message:H.message||"Create failed."})}}async function V(H){if(c(v,null),!!window.confirm("Delete this category?"))try{await kc(H,{cascade:!0}),await ce(),await I()}catch(J){c(v,{type:"error",message:J.message||"Delete failed."})}}async function ve(){c(x,null),c(T,!0);try{const H=await Pc({query:e(m),limit:e(b)});c(y,fe(H)),e(y).length||c(x,{type:"info",message:"No products found."})}catch(H){c(x,{type:"error",message:H.message||"Could not load products."})}finally{c(T,!1)}}function ze(H,J,Le){const be=[...e(y)],Ke=J!=="categoryInput";be[H]={...be[H],[J]:Le,dirty:Ke?!0:be[H].dirty},c(y,be)}async function me(){const H=e(y).filter(J=>J.dirty);if(!H.length){c(x,{type:"info",message:"No pending changes."});return}c(x,null),c(re,!0);try{await Tc({items:H}),c(y,e(y).map(J=>({...J,dirty:!1}))),c(x,{type:"success",message:`Saved ${H.length} products.`})}catch(J){c(x,{type:"error",message:J.message||"Save failed."})}finally{c(re,!1)}}async function _e(){if(c(x,null),!e(E).sku){c(x,{type:"error",message:"SKU is required."});return}try{await Nc(e(E)),c(E,{sku:"",name_sv:"",name_en:"",desc_sv:"",desc_en:"",pos_num:"",no_units:"",price:""}),await ve(),c(x,{type:"success",message:"Product created."})}catch(H){c(x,{type:"error",message:H.message||"Create failed."})}}async function we(H){if(c(x,null),!!window.confirm("Delete this product?"))try{await Lc(H),await ve()}catch(J){c(x,{type:"error",message:J.message||"Delete failed."})}}async function se(H,J){var be,Ke;const Le=(Ke=(be=e(y)[J])==null?void 0:be.categoryInput)==null?void 0:Ke.trim();if(Le){c(x,null);try{await zc(H,Le);const ee=[...e(y)],O=ee[J].categories||[];O.includes(Le)||(ee[J].categories=[...O,Le]),ee[J].categoryInput="",c(y,ee)}catch(ee){c(x,{type:"error",message:ee.message||"Add category failed."})}}}async function K(H,J,Le){c(x,null);try{await $c(H,J);const be=[...e(y)];be[Le].categories=(be[Le].categories||[]).filter(Ke=>Ke!==J),c(y,be)}catch(be){c(x,{type:"error",message:be.message||"Remove category failed."})}}Ot();var Ne=Ad(),ye=Oe(Ne);{var Ae=H=>{var J=Cd(),Le=Oe(J),be=i(s(Le),4),Ke=i(s(be),2),ee=s(Ke),O=i(s(ee),2);ae(O),n(ee);var he=i(ee,2),M=i(s(he),2);ae(M),n(he);var k=i(he,2),B=s(k,!0);n(k);var g=i(k,2),P=s(g,!0);n(g),n(Ke),n(be);var A=i(be,2),N=i(s(A),2),G=s(N);ae(G);var F=i(G,2);ae(F);var Y=i(F,2);ae(Y);var Q=i(Y,2),Me=s(Q);ae(Me),Vt(2),n(Q);var Ee=i(Q,2);n(N),n(A);var Ce=i(A,2);{var Je=$=>{var D=kd(),U=s(D),q=s(U);n(U);var X=i(U);n(D),R(()=>{w(q,`${e(v),u(()=>e(v).type==="error"?"Error":"Status")??""}:`),w(X,` ${e(v),u(()=>e(v).message)??""}`)}),h($,D)};ne(Ce,$=>{e(v)&&$(Je)})}n(Le);var Be=i(Le,2);{var le=$=>{var D=Sd();at(D,5,()=>e(d),st,(U,q,X)=>{var Te=xd(),de=s(Te),xe=s(de),ge=s(xe,!0);n(xe);var Ze=i(xe,2);{var it=Xe=>{var Ve=wd(),_t=s(Ve);n(Ve),R(()=>w(_t,`Parent: ${e(q),u(()=>e(q).parent_key)??""}`)),h(Xe,Ve)};ne(Ze,Xe=>{e(q),u(()=>e(q).parent_key)&&Xe(it)})}n(de);var rt=i(de,2),j=s(rt),pe=i(s(j),4);ae(pe),n(j);var $e=i(j,2),Ye=i(s($e),4);ae(Ye),n($e);var et=i($e,2),Qe=i(s(et),4);nr(Qe),n(et);var We=i(et,2),Ue=i(s(We),4);nr(Ue),n(We);var Ie=i(We,2),ue=s(Ie),te=i(s(ue),4);ae(te),n(ue);var je=i(ue,2),Ge=s(je);ae(Ge),Vt(2),n(je);var lt=i(je,2);n(Ie),n(rt),n(Te),R(()=>{St(Te,1,(e(q),u(()=>`tree-row ${e(q).dirty?"dirty":""}`)),"svelte-tsm5t5"),w(ge,(e(q),u(()=>e(q).key))),vt(pe,(e(q),u(()=>e(q).name_sv||""))),vt(Ye,(e(q),u(()=>e(q).name_en||""))),vt(Qe,(e(q),u(()=>e(q).desc_sv||""))),vt(Ue,(e(q),u(()=>e(q).desc_en||""))),vt(te,(e(q),u(()=>e(q).position||""))),zs(Ge,(e(q),u(()=>e(q).is_main===1)))}),L("input",pe,Xe=>W(X,"name_sv",Xe.target.value)),L("input",Ye,Xe=>W(X,"name_en",Xe.target.value)),L("input",Qe,Xe=>W(X,"desc_sv",Xe.target.value)),L("input",Ue,Xe=>W(X,"desc_en",Xe.target.value)),L("input",te,Xe=>W(X,"position",Xe.target.value)),L("change",Ge,Xe=>W(X,"is_main",Xe.target.checked)),L("click",lt,()=>V(e(q).key)),h(U,Te)}),n(D),h($,D)};ne(Be,$=>{e(d),u(()=>e(d).length)&&$(le)})}R(()=>{k.disabled=e(p),w(B,e(p)?"Loading...":"Load"),g.disabled=e(f),w(P,e(f)?"Saving...":"Save changes")}),De(O,()=>e(l),$=>c(l,$)),De(M,()=>e(o),$=>c(o,$)),L("click",k,ce),L("click",g,ie),De(G,()=>e(_).name_sv,$=>Fe(_,e(_).name_sv=$)),De(F,()=>e(_).name_en,$=>Fe(_,e(_).name_en=$)),De(Y,()=>e(_).position,$=>Fe(_,e(_).position=$)),dn(Me,()=>e(_).is_main,$=>Fe(_,e(_).is_main=$)),L("click",Ee,Z),h(H,J)};ne(ye,H=>{a()!=="products"&&H(Ae)})}var ke=i(ye,2);{var Se=H=>{var J=Ld(),Le=Oe(J),be=i(s(Le),4),Ke=i(s(be),2),ee=s(Ke),O=i(s(ee),2);ae(O),n(ee);var he=i(ee,2),M=i(s(he),2);ae(M),n(he);var k=i(he,2),B=s(k,!0);n(k);var g=i(k,2),P=s(g,!0);n(g),n(Ke),n(be);var A=i(be,2),N=i(s(A),2),G=s(N);ae(G);var F=i(G,2);ae(F);var Y=i(F,2);ae(Y);var Q=i(Y,2);ae(Q);var Me=i(Q,2);n(N),n(A);var Ee=i(A,2);{var Ce=le=>{var $=Ed(),D=s($),U=s(D);n(D);var q=i(D);n($),R(()=>{w(U,`${e(x),u(()=>e(x).type==="error"?"Error":"Status")??""}:`),w(q,` ${e(x),u(()=>e(x).message)??""}`)}),h(le,$)};ne(Ee,le=>{e(x)&&le(Ce)})}n(Le);var Je=i(Le,2);{var Be=le=>{var $=Td();at($,5,()=>e(y),st,(D,U,q)=>{var X=Nd(),Te=s(X),de=s(Te),xe=s(de);n(de),n(Te);var ge=i(Te,2),Ze=s(ge),it=i(s(Ze),4);ae(it),n(Ze);var rt=i(Ze,2),j=i(s(rt),4);ae(j),n(rt);var pe=i(rt,2),$e=i(s(pe),4);nr($e),n(pe);var Ye=i(pe,2),et=i(s(Ye),4);nr(et),n(Ye);var Qe=i(Ye,2),We=s(Qe),Ue=i(s(We),4);ae(Ue),n(We);var Ie=i(We,2),ue=i(s(Ie),4);ae(ue),n(Ie);var te=i(Ie,2),je=i(s(te),4);ae(je),n(te);var Ge=i(te,2);n(Qe);var lt=i(Qe,2);at(lt,5,()=>(e(U),u(()=>e(U).categories||[])),st,(nt,Nt)=>{var gt=Pd(),Ut=s(gt),pt=i(Ut);n(gt),R(()=>w(Ut,`${e(Nt)??""} `)),L("click",pt,()=>K(e(U).sku,e(Nt),q)),h(nt,gt)}),n(lt);var Xe=i(lt,2),Ve=s(Xe);ae(Ve);var _t=i(Ve,2);n(Xe),n(ge),n(X),R(()=>{St(X,1,(e(U),u(()=>`tree-row ${e(U).dirty?"dirty":""}`)),"svelte-tsm5t5"),w(xe,`SKU: ${e(U),u(()=>e(U).sku)??""}`),vt(it,(e(U),u(()=>e(U).name_sv||""))),vt(j,(e(U),u(()=>e(U).name_en||""))),vt($e,(e(U),u(()=>e(U).desc_sv||""))),vt(et,(e(U),u(()=>e(U).desc_en||""))),vt(Ue,(e(U),u(()=>e(U).pos_num||""))),vt(ue,(e(U),u(()=>e(U).no_units||""))),vt(je,(e(U),u(()=>e(U).price||""))),vt(Ve,(e(U),u(()=>e(U).categoryInput)))}),L("input",it,nt=>ze(q,"name_sv",nt.target.value)),L("input",j,nt=>ze(q,"name_en",nt.target.value)),L("input",$e,nt=>ze(q,"desc_sv",nt.target.value)),L("input",et,nt=>ze(q,"desc_en",nt.target.value)),L("input",Ue,nt=>ze(q,"pos_num",nt.target.value)),L("input",ue,nt=>ze(q,"no_units",nt.target.value)),L("input",je,nt=>ze(q,"price",nt.target.value)),L("click",Ge,()=>we(e(U).sku)),L("input",Ve,nt=>ze(q,"categoryInput",nt.target.value)),L("click",_t,()=>se(e(U).sku,q)),h(D,X)}),n($),h(le,$)};ne(Je,le=>{e(y),u(()=>e(y).length)&&le(Be)})}R(()=>{k.disabled=e(T),w(B,e(T)?"Loading...":"Load"),g.disabled=e(re),w(P,e(re)?"Saving...":"Save changes")}),De(O,()=>e(m),le=>c(m,le)),De(M,()=>e(b),le=>c(b,le)),L("click",k,ve),L("click",g,me),De(G,()=>e(E).sku,le=>Fe(E,e(E).sku=le)),De(F,()=>e(E).name_sv,le=>Fe(E,e(E).name_sv=le)),De(Y,()=>e(E).name_en,le=>Fe(E,e(E).name_en=le)),De(Q,()=>e(E).price,le=>Fe(E,e(E).price=le)),L("click",Me,_e),h(H,J)};ne(ke,H=>{a()!=="categories"&&H(Se)})}var qe=i(ke,2);{var He=H=>{var J=$d();at(J,5,()=>e(z),st,(Le,be)=>{var Ke=zd(),ee={};R(()=>{ee!==(ee=e(be))&&(Ke.value=(Ke.__value=e(be))??"")}),h(Le,Ke)}),n(J),h(H,J)};ne(qe,H=>{a()!=="categories"&&H(He)})}h(t,Ne),Dt()}var Md=C('<div class="status"><strong> </strong> </div>'),Id=C('<img class="svelte-1ttx7x9"/>'),Rd=C('<div class="catalog-empty svelte-1ttx7x9">No catalog image</div>'),Dd=C('<div class="catalog-row svelte-1ttx7x9"><div><div class="catalog-title svelte-1ttx7x9"> </div> <div class="catalog-sub svelte-1ttx7x9"> </div></div> <div class="catalog-preview svelte-1ttx7x9"><!></div> <div class="catalog-actions svelte-1ttx7x9"><input type="file" accept="image/*"/> <div class="inline"><button type="button" class="secondary">Upload</button> <button type="button" class="danger">Remove</button></div></div></div>'),jd=C('<section class="panel"></section>'),Od=C('<section class="card"><h2>Main products</h2> <p>Upload catalog images for each main product category.</p> <div class="inline"><button type="button"> </button></div> <!></section> <!>',1);function Ud(t,r){Rt(r,!1);let a=S([]),l=S(null),o=S(!1),d={};const v=(typeof import.meta<"u"?"http://localhost:8788/api":"")||"",p=v?v.replace(/\/api\/?$/,""):"";async function f(){c(l,null),c(o,!0);try{const W=await lc();c(a,W||[]),e(a).length||c(l,{type:"info",message:"No main products yet. Mark a category as main first."})}catch(W){c(l,{type:"error",message:W.message||"Could not load main products."})}finally{c(o,!1)}}va(f);function _(W,ie){d={...d,[W]:ie}}async function m(W){const ie=d[W];if(!ie){c(l,{type:"error",message:"Choose a file first."});return}c(l,null);try{const Z=await oc(W,ie);c(a,e(a).map(V=>V.key===W?{...V,...Z}:V)),d={...d,[W]:null},c(l,{type:"success",message:`Updated catalog image for ${W}.`})}catch(Z){c(l,{type:"error",message:Z.message||"Upload failed."})}}async function b(W){c(l,null);try{const ie=await cc(W);c(a,e(a).map(Z=>Z.key===W?{...Z,...ie}:Z))}catch(ie){c(l,{type:"error",message:ie.message||"Remove failed."})}}function y(W){return W?/^https?:\/\//i.test(W)?W:W.startsWith("/")&&p?`${p}${W}`:W:""}Ot();var x=Od(),T=Oe(x),re=i(s(T),4),z=s(re),E=s(z,!0);n(z),n(re);var Pe=i(re,2);{var fe=W=>{var ie=Md(),Z=s(ie),V=s(Z);n(Z);var ve=i(Z);n(ie),R(()=>{w(V,`${e(l).type==="error"?"Error":"Status"}:`),w(ve,` ${e(l).message??""}`)}),h(W,ie)};ne(Pe,W=>{e(l)&&W(fe)})}n(T);var I=i(T,2);{var ce=W=>{var ie=jd();at(ie,5,()=>e(a),st,(Z,V)=>{var ve=Dd(),ze=s(ve),me=s(ze),_e=s(me,!0);n(me);var we=i(me,2),se=s(we);n(we),n(ze);var K=i(ze,2),Ne=s(K);{var ye=J=>{var Le=Id();R(be=>{ct(Le,"src",be),ct(Le,"alt",`Catalog for ${e(V).key}`)},[()=>y(e(V).catalog_url)]),h(J,Le)},Ae=J=>{var Le=Rd();h(J,Le)};ne(Ne,J=>{e(V).catalog_url?J(ye):J(Ae,!1)})}n(K);var ke=i(K,2),Se=s(ke),qe=i(Se,2),He=s(qe),H=i(He,2);n(qe),n(ke),n(ve),R(()=>{w(_e,e(V).name),w(se,`Key: ${e(V).key??""}`)}),L("change",Se,J=>_(e(V).key,J.target.files[0])),L("click",He,()=>m(e(V).key)),L("click",H,()=>b(e(V).key)),h(Z,ve)}),n(ie),h(W,ie)};ne(I,W=>{e(a).length&&W(ce)})}R(()=>{z.disabled=e(o),w(E,e(o)?"Loading...":"Refresh list")}),L("click",z,f),h(t,x),Dt()}function Kn(t){return t?t.replace(/\/+$/,""):""}function yl(){const t=typeof import.meta<"u"?"http://localhost:8788/api/ce":"";if(t)return Kn(t);const r=typeof import.meta<"u"?"http://localhost:8788/api":"";return r?Kn(r.replace(/\/api\/?$/,"/api/ce")):typeof window>"u"?"":Kn(`${window.location.origin}/api/ce`)}function Fd(t){const r=new URLSearchParams;return Object.entries(t).forEach(([a,l])=>{const o=l==null?"":String(l);r.append(a,o)}),r.toString()}async function Kd(t){if((t.headers.get("content-type")||"").includes("application/json"))return t.json();const a=await t.text();try{return JSON.parse(a)}catch{return a}}async function pi(t,r={}){const a=await fetch(t,r);if(!a.ok){const l=await a.text();throw new Error(l||`Request failed (${a.status})`)}return Kd(a)}function _i(t){const r=Kn(t||yl());if(!r)return{baseUrl:"",searchProducts:async()=>[],getProduct:async()=>null,saveProduct:async()=>!1,createProduct:async()=>!1,deleteProduct:async()=>!1,listModels:async()=>[],getModel:async()=>null,saveModel:async()=>!1,createModel:async()=>!1,deleteModel:async()=>!1};const a=o=>pi(`${r}${o}`),l=(o,d)=>pi(`${r}${o}`,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:Fd(d)});return{baseUrl:r,searchProducts:o=>l("/ce-och-motorintyg-products-search",{serienummerText:o}),getProduct:o=>a(`/get-single-ce-och-motorintyg-product/${encodeURIComponent(o)}`),saveProduct:o=>l("/save-ce-och-motorintyg-product",o),createProduct:o=>l("/create-new-ce-och-motorintyg-product",{serienummer:o}),deleteProduct:o=>l("/delete-ce-och-motorintyg-product",{serienummer:o}),listModels:()=>a("/get-all-ce-och-motorintyg-models"),getModel:o=>l("/get-single-ce-och-motorintyg-model",{modellNamn:o}),saveModel:o=>l("/save-ce-och-motorintyg-model",o),createModel:o=>l("/create-new-ce-och-motorintyg-model",{modellNamn:o}),deleteModel:o=>l("/delete-ce-och-motorintyg-model",{modellNamn:o})}}var qd=C('<tr><td> </td><td> </td><td> </td><td><button class="ghost">Edit</button></td></tr>'),Bd=C('<table class="table"><thead><tr><th>Model</th><th>Serial</th><th>Engine number</th><th></th></tr></thead><tbody></tbody></table>'),Vd=C('<div class="helper">Search results will show here.</div>'),Wd=C('<div class="helper">Loading...</div>'),Hd=C("<textarea></textarea>"),Jd=C("<option> </option>"),Gd=C("<option>Select model</option> <!>",1),Yd=C("<option> </option>"),Zd=C("<select><!></select>"),Qd=C('<input class="input" type="text"/>'),Xd=C("<div><label> </label> <!></div>"),ev=C('<form class="form-grid"></form>'),tv=C('<div class="helper">Select a product to edit.</div>'),av=C('<div class="panel"><section class="card"><div class="card-header"><div><h2 class="card-title">Create product</h2> <div class="helper">Add a new serial number and jump straight into edit mode.</div></div> <div class="stack"><input class="input" placeholder="Serial number"/> <button class="secondary">Create</button></div></div></section> <section class="card"><div class="card-header"><div><h2 class="card-title">Find product</h2> <div class="helper">Search existing serial numbers and open the editor.</div></div> <div class="stack"><input class="input" placeholder="Search serial number"/> <button class="ghost">Search</button></div></div> <!></section> <section class="card"><div class="card-header"><div><h2 class="card-title">Product editor</h2> <div class="helper">Save changes to regenerate PDFs automatically.</div></div> <div class="stack"><button class="ghost">Clear</button> <button>Save</button> <button class="danger">Delete</button></div></div> <!></section></div>');function rv(t,r){Rt(r,!1);let a=$t(r,"api",8),l=$t(r,"notify",8),o=S(""),d=S([]),v=S(""),p=S(!1),f=S(!1),_=S(!1),m=S(!1),b=S(!1),y=S(null),x=S([]);const T={modell:"",serienummer:"",motornummer:"",tillverkningsar:"",godkand_av:"",maskinslag_ce:"",maskinslag:"",fabrikat:"",motorfabrikat:"",motoreffekt:"",motorvolym:"",uppfyller_avgaskrav:"",certifikat_nummer:"",rek_bransle:"",originalmotor:"",hyudralolja:"",harmoniserande_standarder:"",enligt_villkoren_i_direktiv:"",anmalt_organ_for_direktiv:"",uppmatt_ljudeffektniva:"",garanterad_ljud_och_effektniva:"",namn_och_underskrift:"",is_dynapac_ce:"0",maskin_marke:""},re=[{key:"modell",label:"Model",type:"select",source:"models"},{key:"is_dynapac_ce",label:"CE document type",type:"select",options:[{value:"0",label:"Swepac"},{value:"1",label:"Dynapac"}]},{key:"maskin_marke",label:"Machine brand",type:"text"},{key:"serienummer",label:"Serial number",type:"text",readonly:!0},{key:"motornummer",label:"Engine number",type:"text"},{key:"tillverkningsar",label:"Manufacture year",type:"text"},{key:"godkand_av",label:"Approved by",type:"text"},{key:"maskinslag_ce",label:"Machine type (CE)",type:"text"},{key:"maskinslag",label:"Machine type",type:"text"},{key:"fabrikat",label:"Brand",type:"text"},{key:"motorfabrikat",label:"Engine brand",type:"text"},{key:"motoreffekt",label:"Engine power",type:"text"},{key:"motorvolym",label:"Engine volume",type:"text"},{key:"uppfyller_avgaskrav",label:"Emission compliance",type:"text"},{key:"certifikat_nummer",label:"Certificate number",type:"text"},{key:"rek_bransle",label:"Recommended fuel",type:"text"},{key:"originalmotor",label:"Original engine",type:"text"},{key:"hyudralolja",label:"Hydraulic oil",type:"text"},{key:"harmoniserande_standarder",label:"Harmonized standards",type:"textarea"},{key:"enligt_villkoren_i_direktiv",label:"According to directive terms",type:"textarea"},{key:"anmalt_organ_for_direktiv",label:"Notified body for directive",type:"textarea"},{key:"uppmatt_ljudeffektniva",label:"Measured sound power",type:"text"},{key:"garanterad_ljud_och_effektniva",label:"Guaranteed sound power",type:"text"},{key:"namn_och_underskrift",label:"Name and signature",type:"text"}],z=["maskinslag_ce","maskinslag","fabrikat","motorfabrikat","motoreffekt","motorvolym","uppfyller_avgaskrav","certifikat_nummer","rek_bransle","originalmotor","hyudralolja","harmoniserande_standarder","enligt_villkoren_i_direktiv","anmalt_organ_for_direktiv","uppmatt_ljudeffektniva","garanterad_ljud_och_effektniva","namn_och_underskrift","is_dynapac_ce","maskin_marke"];function E(M){return M===!0||M==="true"||M===1}function Pe(M){const k={...T};return M&&Object.keys(k).forEach(B=>{const g=M[B];k[B]=g==null?"":String(g)}),k}async function fe(M){if(!e(y))return;const k=(M||"").trim();if(k){c(b,!0);try{const B=await a().getModel(k);if(!B){l()("error","Model could not be loaded.");return}const g={...e(y),modell:k};z.forEach(P=>{P in B&&(g[P]=B[P]??"")}),c(y,Pe(g))}catch(B){l()("error",B.message||"Could not apply model.")}finally{c(b,!1)}}}async function I(){if(!e(o).trim()){l()("error","Enter a serial number to search.");return}c(p,!0);try{const M=await a().searchProducts(e(o).trim());c(d,Array.isArray(M)?M:[]),e(d).length||l()("error","No products found.")}catch(M){l()("error",M.message||"Search failed.")}finally{c(p,!1)}}async function ce(M){if(M){c(f,!0);try{const k=await a().getProduct(M),B=(k==null?void 0:k.databaseResults)||[];if(!B.length){l()("error","Product not found.");return}c(x,((k==null?void 0:k.availableModelNames)||[]).slice().sort((g,P)=>{const A=g.modellNamn||"",N=P.modellNamn||"";return A.localeCompare(N)})),c(y,Pe(B[0]))}catch(k){l()("error",k.message||"Could not load product.")}finally{c(f,!1)}}}async function W(){const M=e(v).trim();if(!M){l()("error","Enter a serial number to create.");return}if(!/^\d+$/.test(M)){l()("error","Serial number must be numeric.");return}c(f,!0);try{const k=await a().createProduct(M);if(!E(k)){l()("error","Product could not be created.");return}c(v,""),await ce(M),l()("success","Product created.")}catch(k){l()("error",k.message||"Create failed.")}finally{c(f,!1)}}async function ie(){var M;if(!((M=e(y))!=null&&M.serienummer)){l()("error","Load a product before saving.");return}c(_,!0);try{const k={};Object.keys(T).forEach(g=>{k[g]=e(y)[g]??""}),k.serienummer=e(y).serienummer;const B=await a().saveProduct(k);if(!E(B)){l()("error","Save failed.");return}l()("success","Product saved.")}catch(k){l()("error",k.message||"Save failed.")}finally{c(_,!1)}}async function Z(){var M;if((M=e(y))!=null&&M.serienummer&&confirm(`Delete product ${e(y).serienummer}?`)){c(m,!0);try{const k=await a().deleteProduct(e(y).serienummer);if(!E(k)){l()("error","Delete failed.");return}c(y,null),l()("success","Product deleted.")}catch(k){l()("error",k.message||"Delete failed.")}finally{c(m,!1)}}}Ot();var V=av(),ve=s(V),ze=s(ve),me=i(s(ze),2),_e=s(me);ae(_e);var we=i(_e,2);n(me),n(ze),n(ve);var se=i(ve,2),K=s(se),Ne=i(s(K),2),ye=s(Ne);ae(ye);var Ae=i(ye,2);n(Ne),n(K);var ke=i(K,2);{var Se=M=>{var k=Bd(),B=i(s(k));at(B,5,()=>e(d),st,(g,P)=>{var A=qd(),N=s(A),G=s(N,!0);n(N);var F=i(N),Y=s(F,!0);n(F);var Q=i(F),Me=s(Q,!0);n(Q);var Ee=i(Q),Ce=s(Ee);n(Ee),n(A),R(()=>{w(G,(e(P),u(()=>e(P).modell))),w(Y,(e(P),u(()=>e(P).serienummer))),w(Me,(e(P),u(()=>e(P).motornummer)))}),L("click",Ce,()=>ce(e(P).serienummer)),h(g,A)}),n(B),n(k),h(M,k)},qe=M=>{var k=Vd();h(M,k)};ne(ke,M=>{e(d),u(()=>e(d).length)?M(Se):M(qe,!1)})}n(se);var He=i(se,2),H=s(He),J=i(s(H),2),Le=s(J),be=i(Le,2),Ke=i(be,2);n(J),n(H);var ee=i(H,2);{var O=M=>{var k=Wd();h(M,k)},he=M=>{var k=ot(),B=Oe(k);{var g=A=>{var N=ev();at(N,5,()=>re,st,(G,F)=>{var Y=Xd(),Q=s(Y),Me=s(Q,!0);n(Q);var Ee=i(Q,2);{var Ce=Be=>{var le=Hd();nr(le),R(()=>ct(le,"id",(e(F),u(()=>`product-${e(F).key}`)))),De(le,()=>e(y)[e(F).key],$=>Fe(y,e(y)[e(F).key]=$)),h(Be,le)},Je=Be=>{var le=ot(),$=Oe(le);{var D=q=>{var X=Zd();R(()=>{e(y),da(()=>{e(F),e(b),e(x)})});var Te=s(X);{var de=ge=>{var Ze=Gd(),it=Oe(Ze);it.value=it.__value="";var rt=i(it,2);at(rt,1,()=>e(x),st,(j,pe)=>{var $e=Jd(),Ye=s($e,!0);n($e);var et={};R(()=>{w(Ye,(e(pe),u(()=>e(pe).modellNamn))),et!==(et=(e(pe),u(()=>e(pe).modellNamn)))&&($e.value=($e.__value=(e(pe),u(()=>e(pe).modellNamn)))??"")}),h(j,$e)}),h(ge,Ze)},xe=ge=>{var Ze=ot(),it=Oe(Ze);at(it,1,()=>(e(F),u(()=>e(F).options)),st,(rt,j)=>{var pe=Yd(),$e=s(pe,!0);n(pe);var Ye={};R(()=>{w($e,(e(j),u(()=>e(j).label))),Ye!==(Ye=(e(j),u(()=>e(j).value)))&&(pe.value=(pe.__value=(e(j),u(()=>e(j).value)))??"")}),h(rt,pe)}),h(ge,Ze)};ne(Te,ge=>{e(F),u(()=>e(F).source==="models")?ge(de):ge(xe,!1)})}n(X),R(()=>{ct(X,"id",(e(F),u(()=>`product-${e(F).key}`))),X.disabled=(e(F),e(b),u(()=>e(F).readonly||e(b)))}),Ta(X,()=>e(y)[e(F).key],ge=>Fe(y,e(y)[e(F).key]=ge)),L("change",X,ge=>{e(F).source==="models"&&fe(ge.target.value)}),h(q,X)},U=q=>{var X=Qd();ae(X),R(()=>{ct(X,"id",(e(F),u(()=>`product-${e(F).key}`))),X.readOnly=(e(F),u(()=>e(F).readonly))}),De(X,()=>e(y)[e(F).key],Te=>Fe(y,e(y)[e(F).key]=Te)),h(q,X)};ne($,q=>{e(F),u(()=>e(F).type==="select")?q(D):q(U,!1)},!0)}h(Be,le)};ne(Ee,Be=>{e(F),u(()=>e(F).type==="textarea")?Be(Ce):Be(Je,!1)})}n(Y),R(()=>{St(Y,1,(e(F),u(()=>`field ${e(F).type==="textarea"?"wide":""}`))),ct(Q,"for",(e(F),u(()=>`product-${e(F).key}`))),w(Me,(e(F),u(()=>e(F).label)))}),h(G,Y)}),n(N),L("submit",N,Ja(ie)),h(A,N)},P=A=>{var N=tv();h(A,N)};ne(B,A=>{e(y)?A(g):A(P,!1)},!0)}h(M,k)};ne(ee,M=>{e(f)?M(O):M(he,!1)})}n(He),n(V),R(()=>{we.disabled=e(f),Ae.disabled=e(p),Le.disabled=!e(y),be.disabled=!e(y)||e(_),Ke.disabled=!e(y)||e(m)}),De(_e,()=>e(v),M=>c(v,M)),L("click",we,W),De(ye,()=>e(o),M=>c(o,M)),L("click",Ae,I),L("click",Le,()=>c(y,null)),L("click",be,ie),L("click",Ke,Z),h(t,V),Dt()}var nv=C('<div class="helper">Loading...</div>'),sv=C('<tr><td> </td><td> </td><td><button class="ghost">Edit</button></td></tr>'),iv=C('<table class="table"><thead><tr><th>Model</th><th>CE search</th><th></th></tr></thead><tbody></tbody></table>'),lv=C('<div class="helper">No models found.</div>'),ov=C("<textarea></textarea>"),cv=C("<option> </option>"),dv=C("<select></select>"),vv=C('<input class="input" type="text"/>'),uv=C("<div><label> </label> <!></div>"),fv=C('<form class="form-grid"></form>'),pv=C('<div class="helper">Select a model to edit.</div>'),_v=C('<div class="panel"><section class="card"><div class="card-header"><div><h2 class="card-title">Create model</h2> <div class="helper">Register a new model and open it immediately.</div></div> <div class="stack"><input class="input" placeholder="Model name"/> <button class="secondary">Create</button></div></div></section> <section class="card"><div class="card-header"><div><h2 class="card-title">Model library</h2> <div class="helper">Browse or filter all registered models.</div></div> <div class="stack"><input class="input" placeholder="Filter models"/> <button class="ghost">Refresh</button></div></div> <!></section> <section class="card"><div class="card-header"><div><h2 class="card-title">Model editor</h2> <div class="helper">Changes apply to all products using the model.</div></div> <div class="stack"><button class="ghost">Clear</button> <button>Save</button> <button class="danger">Delete</button></div></div> <!></section></div>');function hv(t,r){Rt(r,!1);const a=S();let l=$t(r,"api",8),o=$t(r,"notify",8),d=S([]),v=S(""),p=S(null),f=S(""),_=S(!1),m=S(!1),b=S(!1),y=S();const x={modellNamn:"",maskinslag_ce:"",maskinslag:"",fabrikat:"",motorfabrikat:"",motoreffekt:"",motorvolym:"",uppfyller_avgaskrav:"",certifikat_nummer:"",rek_bransle:"",originalmotor:"",hyudralolja:"",harmoniserande_standarder:"",enligt_villkoren_i_direktiv:"",anmalt_organ_for_direktiv:"",uppmatt_ljudeffektniva:"",garanterad_ljud_och_effektniva:"",namn_och_underskrift:"",is_dynapac_ce:"0",maskin_marke:""},T=[{key:"modellNamn",label:"Model name",type:"text",readonly:!0},{key:"is_dynapac_ce",label:"CE document type",type:"select",options:[{value:"0",label:"Swepac"},{value:"1",label:"Dynapac"}]},{key:"maskin_marke",label:"Machine brand",type:"text"},{key:"maskinslag_ce",label:"Machine type (CE)",type:"text"},{key:"maskinslag",label:"Machine type",type:"text"},{key:"fabrikat",label:"Brand",type:"text"},{key:"motorfabrikat",label:"Engine brand",type:"text"},{key:"motoreffekt",label:"Engine power",type:"text"},{key:"motorvolym",label:"Engine volume",type:"text"},{key:"uppfyller_avgaskrav",label:"Emission compliance",type:"text"},{key:"certifikat_nummer",label:"Certificate number",type:"text"},{key:"rek_bransle",label:"Recommended fuel",type:"text"},{key:"originalmotor",label:"Original engine",type:"text"},{key:"hyudralolja",label:"Hydraulic oil",type:"text"},{key:"harmoniserande_standarder",label:"Harmonized standards",type:"textarea"},{key:"enligt_villkoren_i_direktiv",label:"According to directive terms",type:"textarea"},{key:"anmalt_organ_for_direktiv",label:"Notified body for directive",type:"textarea"},{key:"uppmatt_ljudeffektniva",label:"Measured sound power",type:"text"},{key:"garanterad_ljud_och_effektniva",label:"Guaranteed sound power",type:"text"},{key:"namn_och_underskrift",label:"Name and signature",type:"text"}];function re(ee){return ee===!0||ee==="true"||ee===1}function z(ee){const O={...x};return ee&&Object.keys(O).forEach(he=>{const M=ee[he];O[he]=M==null?"":String(M)}),O}async function E(){c(_,!0);try{const ee=await l().listModels();c(d,Array.isArray(ee)?ee:[])}catch(ee){o()("error",ee.message||"Could not load models.")}finally{c(_,!1)}}async function Pe(ee){var O;if(ee){c(_,!0);try{const he=await l().getModel(ee);c(p,z(he)),await vl(),(O=e(y))==null||O.scrollIntoView({behavior:"smooth",block:"start"})}catch(he){o()("error",he.message||"Could not load model.")}finally{c(_,!1)}}}async function fe(){const ee=e(f).trim();if(!ee){o()("error","Enter a model name.");return}c(_,!0);try{const O=await l().createModel(ee);if(!re(O)){o()("error","Model could not be created.");return}c(f,""),await Pe(ee),await E(),o()("success","Model created.")}catch(O){o()("error",O.message||"Create failed.")}finally{c(_,!1)}}async function I(){var ee;if(!((ee=e(p))!=null&&ee.modellNamn)){o()("error","Load a model before saving.");return}c(m,!0);try{const O={};Object.keys(x).forEach(M=>{O[M]=e(p)[M]??""}),O.modellNamn=e(p).modellNamn;const he=await l().saveModel(O);if(!re(he)){o()("error","Save failed.");return}o()("success","Model saved.")}catch(O){o()("error",O.message||"Save failed.")}finally{c(m,!1)}}async function ce(){var ee;if((ee=e(p))!=null&&ee.modellNamn&&confirm(`Delete model ${e(p).modellNamn}?`)){c(b,!0);try{const O=await l().deleteModel(e(p).modellNamn);if(!re(O)){o()("error","Delete failed.");return}c(p,null),await E(),o()("success","Model deleted.")}catch(O){o()("error",O.message||"Delete failed.")}finally{c(b,!1)}}}va(E),ft(()=>(e(d),e(v)),()=>{c(a,e(d).filter(ee=>{var O;return(O=ee.modellNamn)==null?void 0:O.toLowerCase().includes(e(v).toLowerCase())}).sort((ee,O)=>(ee.modellNamn||"").localeCompare(O.modellNamn||"")))}),wa(),Ot();var W=_v(),ie=s(W),Z=s(ie),V=i(s(Z),2),ve=s(V);ae(ve);var ze=i(ve,2);n(V),n(Z),n(ie),Gn(ie,ee=>c(y,ee),()=>e(y));var me=i(ie,2),_e=s(me),we=i(s(_e),2),se=s(we);ae(se);var K=i(se,2);n(we),n(_e);var Ne=i(_e,2);{var ye=ee=>{var O=nv();h(ee,O)},Ae=ee=>{var O=ot(),he=Oe(O);{var M=B=>{var g=iv(),P=i(s(g));at(P,5,()=>e(a),st,(A,N)=>{var G=sv(),F=s(G),Y=s(F,!0);n(F);var Q=i(F),Me=s(Q,!0);n(Q);var Ee=i(Q),Ce=s(Ee);n(Ee),n(G),R(()=>{w(Y,(e(N),u(()=>e(N).modellNamn))),w(Me,(e(N),u(()=>e(N).created_for_ce_search==="1"?"Yes":"")))}),L("click",Ce,()=>Pe(e(N).modellNamn)),h(A,G)}),n(P),n(g),h(B,g)},k=B=>{var g=lv();h(B,g)};ne(he,B=>{e(a),u(()=>e(a).length)?B(M):B(k,!1)},!0)}h(ee,O)};ne(Ne,ee=>{e(_)?ee(ye):ee(Ae,!1)})}n(me);var ke=i(me,2),Se=s(ke),qe=i(s(Se),2),He=s(qe),H=i(He,2),J=i(H,2);n(qe),n(Se);var Le=i(Se,2);{var be=ee=>{var O=fv();at(O,5,()=>T,st,(he,M)=>{var k=uv(),B=s(k),g=s(B,!0);n(B);var P=i(B,2);{var A=G=>{var F=ov();nr(F),R(()=>ct(F,"id",(e(M),u(()=>`model-${e(M).key}`)))),De(F,()=>e(p)[e(M).key],Y=>Fe(p,e(p)[e(M).key]=Y)),h(G,F)},N=G=>{var F=ot(),Y=Oe(F);{var Q=Ee=>{var Ce=dv();R(()=>{e(p),da(()=>{e(M)})}),at(Ce,5,()=>(e(M),u(()=>e(M).options)),st,(Je,Be)=>{var le=cv(),$=s(le,!0);n(le);var D={};R(()=>{w($,(e(Be),u(()=>e(Be).label))),D!==(D=(e(Be),u(()=>e(Be).value)))&&(le.value=(le.__value=(e(Be),u(()=>e(Be).value)))??"")}),h(Je,le)}),n(Ce),R(()=>{ct(Ce,"id",(e(M),u(()=>`model-${e(M).key}`))),Ce.disabled=(e(M),u(()=>e(M).readonly))}),Ta(Ce,()=>e(p)[e(M).key],Je=>Fe(p,e(p)[e(M).key]=Je)),h(Ee,Ce)},Me=Ee=>{var Ce=vv();ae(Ce),R(()=>{ct(Ce,"id",(e(M),u(()=>`model-${e(M).key}`))),Ce.readOnly=(e(M),u(()=>e(M).readonly))}),De(Ce,()=>e(p)[e(M).key],Je=>Fe(p,e(p)[e(M).key]=Je)),h(Ee,Ce)};ne(Y,Ee=>{e(M),u(()=>e(M).type==="select")?Ee(Q):Ee(Me,!1)},!0)}h(G,F)};ne(P,G=>{e(M),u(()=>e(M).type==="textarea")?G(A):G(N,!1)})}n(k),R(()=>{St(k,1,(e(M),u(()=>`field ${e(M).type==="textarea"?"wide":""}`))),ct(B,"for",(e(M),u(()=>`model-${e(M).key}`))),w(g,(e(M),u(()=>e(M).label)))}),h(he,k)}),n(O),L("submit",O,Ja(I)),h(ee,O)},Ke=ee=>{var O=pv();h(ee,O)};ne(Le,ee=>{e(p)?ee(be):ee(Ke,!1)})}n(ke),n(W),R(()=>{ze.disabled=e(_),K.disabled=e(_),He.disabled=!e(p),H.disabled=!e(p)||e(m),J.disabled=!e(p)||e(b)}),De(ve,()=>e(f),ee=>c(f,ee)),L("click",ze,fe),De(se,()=>e(v),ee=>c(v,ee)),L("click",K,E),L("click",He,()=>c(p,null)),L("click",H,I),L("click",J,ce),h(t,W),Dt()}var gv=C("<div> </div>"),mv=C('<div class="ce-panel"><!> <section class="card"><div class="card-header"><div><h2 class="card-title">CE / Motorintyg</h2> <div class="helper">Manage CE/Motorintyg products, models, and PDF generation.</div></div> <div class="stack"><div class="tab-bar"><button>Products</button> <button>Models</button></div></div></div></section> <!></div>');function yv(t,r){Rt(r,!1);let a=S("products"),l=S(_i("")),o=S(null),d;function v(fe,I){c(o,{type:fe,text:I}),clearTimeout(d),d=setTimeout(()=>{c(o,null)},3500)}va(()=>{c(l,_i(yl()))}),Ot();var p=mv(),f=s(p);{var _=fe=>{var I=gv(),ce=s(I,!0);n(I),R(()=>{St(I,1,`ce-toast ${e(o).type}`),w(ce,e(o).text)}),h(fe,I)};ne(f,fe=>{e(o)&&fe(_)})}var m=i(f,2),b=s(m),y=i(s(b),2),x=s(y),T=s(x),re=i(T,2);n(x),n(y),n(b),n(m);var z=i(m,2);{var E=fe=>{rv(fe,{get api(){return e(l)},notify:v})},Pe=fe=>{hv(fe,{get api(){return e(l)},notify:v})};ne(z,fe=>{e(a)==="products"?fe(E):fe(Pe,!1)})}n(p),R(()=>{St(T,1,`tab ${e(a)==="products"?"active":""}`),St(re,1,`tab ${e(a)==="models"?"active":""}`)}),L("click",T,()=>c(a,"products")),L("click",re,()=>c(a,"models")),h(t,p),Dt()}var bv=C("<option> </option>"),kv=C('<div class="status"><strong> </strong> </div>'),wv=C('<div class="tree-sub svelte-1l0pob"> </div>'),xv=C("<option> </option>"),Sv=C('<span class="tag svelte-1l0pob"> <input type="text" class="tag-input svelte-1l0pob"/> <button type="button" class="svelte-1l0pob">x</button></span>'),Cv=C('<div><div class="tree-meta svelte-1l0pob"><div class="tree-title svelte-1l0pob"> </div> <div class="tree-sub svelte-1l0pob"> </div> <!></div> <div class="tree-fields svelte-1l0pob"><div class="field-block svelte-1l0pob"><div class="field-label svelte-1l0pob">Name (SV)</div> <div class="field-help svelte-1l0pob">Displayed in Swedish.</div> <input type="text" placeholder="Name in Swedish"/></div> <div class="field-block svelte-1l0pob"><div class="field-label svelte-1l0pob">Name (EN)</div> <div class="field-help svelte-1l0pob">Displayed in English.</div> <input type="text" placeholder="Name in English"/></div> <div class="inline"><div class="field-block compact svelte-1l0pob"><div class="field-label svelte-1l0pob">Position</div> <div class="field-help svelte-1l0pob">Lower number sorts first.</div> <input type="text" style="width: 120px;" placeholder="Order"/></div> <div class="field-block compact svelte-1l0pob"><div class="field-label svelte-1l0pob">Parent</div> <div class="field-help svelte-1l0pob">Optional parent group.</div> <select><option>No parent</option><!></select></div> <button class="danger svelte-1l0pob" type="button">Delete</button></div> <div class="link-section svelte-1l0pob"><div class="field-label svelte-1l0pob">Linked product categories</div> <div class="field-help svelte-1l0pob">Add product category keys to show under this machine category.</div> <div class="category-tags svelte-1l0pob"></div> <div class="inline"><input list="machine-category-keys" type="text" placeholder="Add category key"/> <input type="text" style="width: 110px;" placeholder="Position"/> <button type="button" class="secondary svelte-1l0pob">Add link</button> <button type="button" class="secondary svelte-1l0pob">Save link positions</button></div></div></div></div>'),Ev=C('<section class="panel"></section>'),Pv=C("<option></option>"),Nv=C('<section class="card"><h2>Machine categories</h2> <p>Create and map machine categories to product categories.</p> <div class="panel-card svelte-1l0pob"><div class="section-title svelte-1l0pob">Find &amp; update</div> <div class="inline"><label class="inline"><span style="margin-right: 8px;">Search</span> <input type="text" placeholder="Key or name"/></label> <label class="inline"><span style="margin-right: 8px;">Limit</span> <input type="text" style="width: 80px;"/></label> <button type="button"> </button> <button class="secondary" type="button"> </button> <label class="inline"><input type="checkbox"/> <span style="margin-left: 6px;">Cascade delete</span></label></div></div> <div class="panel-card svelte-1l0pob"><div class="section-title svelte-1l0pob">Add new machine category</div> <div class="form-grid svelte-1l0pob"><input type="text" placeholder="Key (optional)"/> <input type="text" placeholder="Name SV"/> <input type="text" placeholder="Name EN"/> <input type="text" placeholder="Position"/> <select><option>No parent</option><!></select> <button type="button">Add machine category</button></div></div> <!></section> <!> <datalist id="machine-category-keys"></datalist>',1);function Tv(t,r){Rt(r,!1);let a=S(""),l=S(200),o=S([]),d=S(null),v=S(!1),p=S(!1),f=S(!1),_=S([]),m=S({key:"",name_sv:"",name_en:"",position:"",parent_id:"0"});function b(g){return g.map(P=>({...P,dirty:!1,linkDirty:!1,newLinkKey:"",newLinkPosition:""}))}async function y(){try{const g=await As({query:"",limit:500});c(_,g.map(P=>P.key))}catch{c(_,[])}}async function x(){c(d,null),c(v,!0);try{const g=await wc({query:e(a),limit:e(l)});c(o,b(g||[])),e(o).length||c(d,{type:"info",message:"No machine categories found."})}catch(g){c(d,{type:"error",message:g.message||"Could not load machine categories."})}finally{c(v,!1)}}va(()=>{y()});function T(g,P,A){const N=[...e(o)];N[g]={...N[g],[P]:A,dirty:!0},c(o,N)}function re(g,P,A){const N=[...e(o)],G=[...N[g].product_categories||[]];G[P]={...G[P],position:A},N[g]={...N[g],product_categories:G,linkDirty:!0},c(o,N)}async function z(){const g=e(o).filter(P=>P.dirty);if(!g.length){c(d,{type:"info",message:"No pending changes."});return}c(d,null),c(p,!0);try{await Sc({items:g}),c(o,e(o).map(P=>({...P,dirty:!1}))),c(d,{type:"success",message:`Saved ${g.length} machine categories.`})}catch(P){c(d,{type:"error",message:P.message||"Save failed."})}finally{c(p,!1)}}async function E(){if(c(d,null),!e(m).key&&!e(m).name_sv&&!e(m).name_en){c(d,{type:"error",message:"Provide a key or a name."});return}try{await xc(e(m)),c(m,{key:"",name_sv:"",name_en:"",position:"",parent_id:"0"}),await x(),c(d,{type:"success",message:"Machine category created."})}catch(g){c(d,{type:"error",message:g.message||"Create failed."})}}async function Pe(g){if(c(d,null),!!confirm("Delete this machine category?"))try{await Cc(g,{cascade:e(f)}),await x()}catch(P){c(d,{type:"error",message:P.message||"Delete failed."})}}async function fe(g){var G;const P=e(o)[g],A=(G=P.newLinkKey)==null?void 0:G.trim();if(!A)return;const N=P.newLinkPosition?Number(P.newLinkPosition):0;try{await ui(P.id,A,Number.isNaN(N)?0:N);const F=[...e(o)],Y=F[g].product_categories||[];Y.find(Q=>Q.key===A)||Y.push({key:A,slug:A,position:String(N||0),name:A,lang_name:{se:"",en:""}}),F[g]={...F[g],product_categories:Y,newLinkKey:"",newLinkPosition:""},c(o,F)}catch(F){c(d,{type:"error",message:F.message||"Add link failed."})}}async function I(g,P){const A=e(o)[g];try{await Ec(A.id,P);const N=[...e(o)];N[g]={...N[g],product_categories:(N[g].product_categories||[]).filter(G=>G.key!==P)},c(o,N)}catch(N){c(d,{type:"error",message:N.message||"Remove link failed."})}}async function ce(g){const P=e(o)[g],A=P.product_categories||[];if(A.length){c(d,null);try{await Promise.all(A.map(G=>ui(P.id,G.key,Number(G.position||0))));const N=[...e(o)];N[g]={...N[g],linkDirty:!1},c(o,N),c(d,{type:"success",message:"Linked category positions saved."})}catch(N){c(d,{type:"error",message:N.message||"Save links failed."})}}}Ot();var W=Nv(),ie=Oe(W),Z=i(s(ie),4),V=i(s(Z),2),ve=s(V),ze=i(s(ve),2);ae(ze),n(ve);var me=i(ve,2),_e=i(s(me),2);ae(_e),n(me);var we=i(me,2),se=s(we,!0);n(we);var K=i(we,2),Ne=s(K,!0);n(K);var ye=i(K,2),Ae=s(ye);ae(Ae),Vt(2),n(ye),n(V),n(Z);var ke=i(Z,2),Se=i(s(ke),2),qe=s(Se);ae(qe);var He=i(qe,2);ae(He);var H=i(He,2);ae(H);var J=i(H,2);ae(J);var Le=i(J,2);R(()=>{e(m),da(()=>{e(o)})});var be=s(Le);be.value=be.__value="0";var Ke=i(be);at(Ke,1,()=>e(o),st,(g,P)=>{var A=bv(),N=s(A,!0);n(A);var G={};R(()=>{w(N,e(P).name_sv||e(P).name_en||e(P).key),G!==(G=e(P).id)&&(A.value=(A.__value=e(P).id)??"")}),h(g,A)}),n(Le);var ee=i(Le,2);n(Se),n(ke);var O=i(ke,2);{var he=g=>{var P=kv(),A=s(P),N=s(A);n(A);var G=i(A);n(P),R(()=>{w(N,`${e(d).type==="error"?"Error":"Status"}:`),w(G,` ${e(d).message??""}`)}),h(g,P)};ne(O,g=>{e(d)&&g(he)})}n(ie);var M=i(ie,2);{var k=g=>{var P=Ev();at(P,5,()=>e(o),st,(A,N,G)=>{var F=Cv(),Y=s(F),Q=s(Y),Me=s(Q,!0);n(Q);var Ee=i(Q,2),Ce=s(Ee);n(Ee);var Je=i(Ee,2);{var Be=Ie=>{var ue=wv(),te=s(ue);n(ue),R(()=>w(te,`Parent: ${e(N).parent_id??""}`)),h(Ie,ue)};ne(Je,Ie=>{e(N).parent_id&&Ie(Be)})}n(Y);var le=i(Y,2),$=s(le),D=i(s($),4);ae(D),n($);var U=i($,2),q=i(s(U),4);ae(q),n(U);var X=i(U,2),Te=s(X),de=i(s(Te),4);ae(de),n(Te);var xe=i(Te,2),ge=i(s(xe),4),Ze=s(ge);Ze.value=Ze.__value="0";var it=i(Ze);at(it,1,()=>e(o),st,(Ie,ue)=>{var te=xv(),je=s(te,!0);n(te);var Ge={};R(()=>{w(je,e(ue).name_sv||e(ue).name_en||e(ue).key),Ge!==(Ge=e(ue).id)&&(te.value=(te.__value=e(ue).id)??"")}),h(Ie,te)}),n(ge);var rt;Cn(ge),n(xe);var j=i(xe,2);n(X);var pe=i(X,2),$e=i(s(pe),4);at($e,5,()=>e(N).product_categories||[],st,(Ie,ue,te)=>{var je=Sv(),Ge=s(je),lt=i(Ge);ae(lt);var Xe=i(lt,2);n(je),R(()=>{w(Ge,`${e(ue).key??""} `),vt(lt,e(ue).position||"0")}),L("input",lt,Ve=>re(G,te,Ve.target.value)),L("click",Xe,()=>I(G,e(ue).key)),h(Ie,je)}),n($e);var Ye=i($e,2),et=s(Ye);ae(et);var Qe=i(et,2);ae(Qe);var We=i(Qe,2),Ue=i(We,2);n(Ye),n(pe),n(le),n(F),R(()=>{St(F,1,`tree-row ${e(N).dirty?"dirty":""}`,"svelte-1l0pob"),w(Me,e(N).key),w(Ce,`ID: ${e(N).id??""}`),vt(D,e(N).name_sv||""),vt(q,e(N).name_en||""),vt(de,e(N).position||""),rt!==(rt=e(N).parent_id||0)&&(ge.value=(ge.__value=e(N).parent_id||0)??"",cn(ge,e(N).parent_id||0)),vt(et,e(N).newLinkKey),vt(Qe,e(N).newLinkPosition),Ue.disabled=!e(N).linkDirty}),L("input",D,Ie=>T(G,"name_sv",Ie.target.value)),L("input",q,Ie=>T(G,"name_en",Ie.target.value)),L("input",de,Ie=>T(G,"position",Ie.target.value)),L("change",ge,Ie=>T(G,"parent_id",Ie.target.value)),L("click",j,()=>Pe(e(N).id)),L("input",et,Ie=>T(G,"newLinkKey",Ie.target.value)),L("input",Qe,Ie=>T(G,"newLinkPosition",Ie.target.value)),L("click",We,()=>fe(G)),L("click",Ue,()=>ce(G)),h(A,F)}),n(P),h(g,P)};ne(M,g=>{e(o).length&&g(k)})}var B=i(M,2);at(B,5,()=>e(_),st,(g,P)=>{var A=Pv(),N={};R(()=>{N!==(N=e(P))&&(A.value=(A.__value=e(P))??"")}),h(g,A)}),n(B),R(()=>{we.disabled=e(v),w(se,e(v)?"Loading...":"Load"),K.disabled=e(p),w(Ne,e(p)?"Saving...":"Save changes")}),De(ze,()=>e(a),g=>c(a,g)),De(_e,()=>e(l),g=>c(l,g)),L("click",we,x),L("click",K,z),dn(Ae,()=>e(f),g=>c(f,g)),De(qe,()=>e(m).key,g=>Fe(m,e(m).key=g)),De(He,()=>e(m).name_sv,g=>Fe(m,e(m).name_sv=g)),De(H,()=>e(m).name_en,g=>Fe(m,e(m).name_en=g)),De(J,()=>e(m).position,g=>Fe(m,e(m).position=g)),Ta(Le,()=>e(m).parent_id,g=>Fe(m,e(m).parent_id=g)),L("click",ee,E),h(t,W),Dt()}var Lv=C("<option> </option>"),zv=C('<div class="status"><strong> </strong> </div>'),$v=C('<p class="muted svelte-3thb0k">No categories found.</p>'),Av=C('<div class="list-meta svelte-3thb0k"> </div>'),Mv=C('<button type="button"><span> </span> <span> </span></button> <!>',1),Iv=C('<div class="list svelte-3thb0k"></div>'),Rv=C('<p class="muted svelte-3thb0k">Select a category to start editing.</p>'),Dv=pl('<circle class="handle svelte-3thb0k" r="6"></circle>'),jv=pl('<rect></rect><text class="hotspot-label svelte-3thb0k"> </text><!>',1),Ov=C('<div class="canvas-wrapper svelte-3thb0k"><img class="svelte-3thb0k"/> <svg class="overlay svelte-3thb0k"></svg></div>'),Uv=C('<p class="muted svelte-3thb0k"> </p>'),Fv=C('<div class="mini-row svelte-3thb0k"><span> </span> <span> </span></div>'),Kv=C('<div class="field-help svelte-3thb0k">Duplicate positions detected in data. Labels are shown as list order (1, 2, 3...).</div>'),qv=C('<div class="field-block svelte-3thb0k"><div class="field-label svelte-3thb0k">Child categories</div> <div class="field-help svelte-3thb0k">Use the label shown below as the hotspot number.</div> <div class="mini-list svelte-3thb0k"></div> <!></div>'),Bv=C('<div class="field-block svelte-3thb0k"><div class="field-label svelte-3thb0k">Highlight mode</div> <div class="field-help svelte-3thb0k">No sub-categories. Hotspots will link by number.</div></div>'),Vv=C('<div class="field-block svelte-3thb0k"><div class="field-label svelte-3thb0k">Hotspot number</div> <input type="text"/></div> <button class="danger" type="button">Delete hotspot</button>',1),Wv=C('<p class="muted svelte-3thb0k">Click a hotspot to edit its number.</p>'),Hv=C('<div class="editor-grid svelte-3thb0k"><div class="editor-canvas"><!></div> <div class="editor-sidebar svelte-3thb0k"><div class="sidebar-column svelte-3thb0k"><div class="field-block svelte-3thb0k"><div class="field-label svelte-3thb0k">Selected category</div> <div class="field-help svelte-3thb0k"> </div></div> <!></div> <div class="sidebar-column svelte-3thb0k"><!> <div class="inline"><button type="button"> </button> <button class="secondary" type="button">Clear map</button></div></div></div></div>'),Jv=C('<section class="card"><h2>Bildkartor</h2> <p>Create and edit hotspots for spare part diagrams.</p> <div class="inline"><label class="inline"><span style="margin-right: 8px;">Main key</span> <select></select></label> <label class="inline"><input type="checkbox"/> <span style="margin-left: 6px;">Only missing maps</span></label> <button type="button"> </button></div> <!></section> <section class="map-layout svelte-3thb0k"><div class="card map-list svelte-3thb0k"><h3 class="svelte-3thb0k">Categories</h3> <!></div> <div class="card map-editor svelte-3thb0k"><h3 class="svelte-3thb0k">Editor</h3> <!></div></section>',1);function Gv(t,r){Rt(r,!1);let a=S([]),l=S(""),o=S([]),d=S(""),v=S(null),p=S([]),f=S(""),_=S(null),m=S(!1),b=S(!1),y=S(!1),x=S(null),T=S(null),re=1,z=1,E=S(1),Pe=S(1),fe=null,I=S(null);const ce=(typeof import.meta<"u"?"http://localhost:8788/api":"")||"",W=ce?ce.replace(/\/api\/?$/,""):"";let ie=S({});function Z($){return String($||"").trim()}function V($){return $?/^https?:\/\//i.test($)?$:$.startsWith("/")&&W?`${W}${$}`:$:""}function ve($,D,U){return Math.max(D,Math.min(U,$))}function ze($){if(!e(x))return{x:0,y:0};const D=e(x).getBoundingClientRect(),U=$.clientX-D.left,q=$.clientY-D.top,X=U/(re||1),Te=q/(z||1);return{x:ve(X,0,e(E)||1),y:ve(Te,0,e(Pe)||1)}}function me(){if(!e(x))return;const $=e(x).getBoundingClientRect();if(!e(x).naturalWidth||!e(x).naturalHeight){re=1,z=1;return}c(E,e(x).naturalWidth),c(Pe,e(x).naturalHeight),re=$.width/e(x).naturalWidth,z=$.height/e(x).naturalHeight,e(p).length&&c(p,e(p).map(_e))}function _e($){const D=Math.min($.x1,$.x2),U=Math.max($.x1,$.x2),q=Math.min($.y1,$.y2),X=Math.max($.y1,$.y2),Te=e(E)>1?e(E):U,de=e(Pe)>1?e(Pe):X;return{...$,x1:ve(D,0,Te),x2:ve(U,0,Te),y1:ve(q,0,de),y2:ve(X,0,de)}}function we($){if(!$)return[];try{const U=new DOMParser().parseFromString($,"text/html");return Array.from(U.querySelectorAll("area")).map(X=>{const Te=(X.getAttribute("coords")||"").split(",").map(ge=>Number(ge.trim()));if(Te.length!==4||Te.some(ge=>Number.isNaN(ge)))return null;const de=X.getAttribute("href")||"";let xe=X.getAttribute("title")||"";if(!xe&&de.includes("highlight=")){const ge=de.match(/[?&]highlight=([^&]+)/);ge&&(xe=ge[1])}return!xe&&de&&!de.startsWith("?")&&(xe=de),{id:crypto.randomUUID(),x1:Te[0],y1:Te[1],x2:Te[2],y2:Te[3],label:Z(xe)}}).filter(Boolean).map(_e)}catch{return[]}}function se($){const D=String($||"").match(/\d+/g);return D?D.join(""):""}function K($){var de;const D=Z($);if(!D)return"#";const U=((de=e(v))==null?void 0:de.child_categories)||[];if(!U.length)return`?highlight=${D}`;const q=U.filter(xe=>Z(xe.display_label||xe.pos_label)===D);if(q.length===1)return q[0].key;if(q.length>1)return q.map((xe,ge)=>`slug_${ge+1}=${xe.key}`).reduce((xe,ge,Ze)=>Ze===0?`?${ge}`:`${xe}&${ge}`,"");const X=se(D),Te=U.filter(xe=>se(xe.display_label||xe.pos_label)===X);if(Te.length===1)return Te[0].key;if(Te.length>1)return Te.map((xe,ge)=>`slug_${ge+1}=${xe.key}`).reduce((xe,ge,Ze)=>Ze===0?`?${ge}`:`${xe}&${ge}`,"");if(/^\d+$/.test(D)){const xe=Number(D)-1;if(xe>=0&&xe<U.length)return U[xe].key}return"#"}function Ne(){return`<map name="imagemap">${e(p).map(D=>{const U=[Math.round(D.x1),Math.round(D.y1),Math.round(D.x2),Math.round(D.y2)],q=K(D.label),X=Z(D.label),Te=X?` title="${X}"`:"";return`<area shape="rect" coords="${U.join(",")}" href="${q}"${Te}>`}).join("")}</map>`}function ye(){var q;const $=((q=e(v))==null?void 0:q.child_categories)||[];if($.length){const X=$.map(xe=>Z(xe.display_label||xe.pos_label)),Te=new Set(e(p).map(xe=>Z(xe.label)));return X.find(xe=>xe&&!Te.has(xe))||X[0]||""}const D=new Set(e(p).map(X=>Number(se(X.label))).filter(X=>Number.isFinite(X)&&X>0));let U=1;for(;D.has(U);)U+=1;return String(U)}async function Ae(){try{c(a,await ml()),!e(l)&&e(a).length&&c(l,e(a)[0].key)}catch{c(a,[])}}async function ke(){if(!e(l)){c(o,[]);return}c(_,null),c(m,!0);try{const $=await Rc(e(l));c(o,e(y)?$.filter(D=>!D.has_map):$),e(d)&&!e(o).find(D=>D.key===e(d))&&(c(d,""),c(v,null),c(p,[]),c(f,""))}catch($){c(_,{type:"error",message:$.message||"Could not load image maps."})}finally{c(m,!1)}}async function Se($){var D,U,q,X;c(d,$),c(_,null),c(m,!0);try{c(v,await Dc($)),c(p,we(((U=(D=e(v))==null?void 0:D.map)==null?void 0:U.html)||"")),c(f,((q=e(p)[0])==null?void 0:q.id)||"");const Te=(((X=e(v))==null?void 0:X.child_categories)||[]).map(de=>Z(de.pos_label||de.position));c(ie,Te.reduce((de,xe)=>(xe&&(de[xe]=(de[xe]||0)+1),de),{})),me()}catch(Te){c(v,null),c(p,[]),c(_,{type:"error",message:Te.message||"Could not load image map."})}finally{c(m,!1)}}async function qe(){if(e(v)){c(_,null),c(b,!0);try{const $=Ne();await jc(e(v).key,$),c(_,{type:"success",message:"Image map saved."}),await ke()}catch($){c(_,{type:"error",message:$.message||"Save failed."})}finally{c(b,!1)}}}async function He(){if(e(v)&&confirm("Delete image map for this category?")){c(_,null);try{await Oc(e(v).key),c(p,[]),c(v,{...e(v),map:{html:"",updated_at:""}}),await ke()}catch($){c(_,{type:"error",message:$.message||"Delete failed."})}}}function H($,D,U){c(p,e(p).map(q=>q.id===$?{...q,[D]:U}:q))}function J($){var D;c(p,e(p).filter(U=>U.id!==$)),e(f)===$&&c(f,((D=e(p)[0])==null?void 0:D.id)||"")}function Le($){var de,xe;if(!e(v)||!e(x))return;me();const D=$.target,U=ze($);if((de=D==null?void 0:D.dataset)!=null&&de.handle&&D.dataset.hotspotId){const ge=e(p).find(Ze=>Ze.id===D.dataset.hotspotId);if(!ge)return;c(f,ge.id),fe={mode:"resize",id:ge.id,handle:D.dataset.handle,startX:U.x,startY:U.y,origin:{...ge}};return}if((xe=D==null?void 0:D.dataset)!=null&&xe.hotspotId){const ge=e(p).find(Ze=>Ze.id===D.dataset.hotspotId);if(!ge)return;c(f,ge.id),fe={mode:"move",id:ge.id,startX:U.x,startY:U.y,origin:{...ge}};return}const q=crypto.randomUUID(),X=ye(),Te={id:q,x1:U.x,y1:U.y,x2:U.x,y2:U.y,label:X};c(p,[...e(p),Te]),c(f,q),fe={mode:"create",id:q,startX:U.x,startY:U.y,origin:{...Te}}}function be($){if(!fe)return;const D=ze($),{id:U,origin:q}=fe;if(q){if(fe.mode==="create"){H(U,"x2",D.x),H(U,"y2",D.y),c(p,e(p).map(X=>X.id===U?_e(X):X));return}if(fe.mode==="move"){const X=D.x-fe.startX,Te=D.y-fe.startY;H(U,"x1",q.x1+X),H(U,"y1",q.y1+Te),H(U,"x2",q.x2+X),H(U,"y2",q.y2+Te),c(p,e(p).map(de=>de.id===U?_e(de):de));return}if(fe.mode==="resize"){let{x1:X,y1:Te,x2:de,y2:xe}=q;fe.handle.includes("e")&&(de=D.x),fe.handle.includes("w")&&(X=D.x),fe.handle.includes("s")&&(xe=D.y),fe.handle.includes("n")&&(Te=D.y),H(U,"x1",X),H(U,"y1",Te),H(U,"x2",de),H(U,"y2",xe),c(p,e(p).map(ge=>ge.id===U?_e(ge):ge))}}}function Ke(){if(!fe)return;const{id:$}=fe,D=e(p).find(U=>U.id===$);if(D){const U=Math.abs(D.x2-D.x1),q=Math.abs(D.y2-D.y1);(U<10||q<10)&&J($)}fe=null}va(async()=>{await Ae(),await ke()}),ft(()=>e(l),()=>{e(l)&&ke()}),ft(()=>e(v),()=>{e(v)||c(ie,{})}),ft(()=>(e(T),e(I)),()=>{e(T)&&!e(I)&&(c(I,new ResizeObserver(me)),e(I).observe(e(T)))}),wa(),Ot();var ee=Jv(),O=Oe(ee),he=i(s(O),4),M=s(he),k=i(s(M),2);R(()=>{e(l),da(()=>{e(a)})}),at(k,5,()=>e(a),st,($,D)=>{var U=Lv(),q=s(U,!0);n(U);var X={};R(()=>{w(q,(e(D),u(()=>e(D).name))),X!==(X=(e(D),u(()=>e(D).key)))&&(U.value=(U.__value=(e(D),u(()=>e(D).key)))??"")}),h($,U)}),n(k),n(M);var B=i(M,2),g=s(B);ae(g),Vt(2),n(B);var P=i(B,2),A=s(P,!0);n(P),n(he);var N=i(he,2);{var G=$=>{var D=zv(),U=s(D),q=s(U);n(U);var X=i(U);n(D),R(()=>{w(q,`${e(_),u(()=>e(_).type==="error"?"Error":"Status")??""}:`),w(X,` ${e(_),u(()=>e(_).message)??""}`)}),h($,D)};ne(N,$=>{e(_)&&$(G)})}n(O);var F=i(O,2),Y=s(F),Q=i(s(Y),2);{var Me=$=>{var D=$v();h($,D)},Ee=$=>{var D=Iv();at(D,5,()=>e(o),st,(U,q)=>{var X=Mv(),Te=Oe(X),de=s(Te),xe=s(de,!0);n(de);var ge=i(de,2),Ze=s(ge,!0);n(ge),n(Te);var it=i(Te,2);{var rt=j=>{var pe=Av(),$e=s(pe);n(pe),R(()=>w($e,`Updated: ${e(q),u(()=>e(q).updated_at)??""}`)),h(j,pe)};ne(it,j=>{e(q),u(()=>e(q).updated_at)&&j(rt)})}R(()=>{St(Te,1,(e(d),e(q),u(()=>`list-item ${e(d)===e(q).key?"active":""}`)),"svelte-3thb0k"),w(xe,(e(q),u(()=>e(q).name))),St(ge,1,(e(q),u(()=>`pill ${e(q).has_map?"ok":"missing"}`)),"svelte-3thb0k"),w(Ze,(e(q),u(()=>e(q).has_map?"Has map":"Missing")))}),L("click",Te,()=>Se(e(q).key)),h(U,X)}),n(D),h($,D)};ne(Q,$=>{e(o),u(()=>e(o).length===0)?$(Me):$(Ee,!1)})}n(Y);var Ce=i(Y,2),Je=i(s(Ce),2);{var Be=$=>{var D=Rv();h($,D)},le=$=>{var D=Hv(),U=s(D),q=s(U);{var X=te=>{var je=Ov(),Ge=s(je);Gn(Ge,Xe=>c(x,Xe),()=>e(x));var lt=i(Ge,2);at(lt,5,()=>e(p),st,(Xe,Ve)=>{var _t=jv(),nt=Oe(_t),Nt=i(nt),gt=s(Nt,!0);n(Nt);var Ut=i(Nt);{var pt=tt=>{var At=ot(),Mt=Oe(At);at(Mt,0,()=>["nw","ne","sw","se"],st,(mt,Lt)=>{var ht=Dv();R((qt,Jt)=>{ct(ht,"data-hotspot-id",(e(Ve),u(()=>e(Ve).id))),ct(ht,"data-handle",Lt),ct(ht,"cx",qt),ct(ht,"cy",Jt)},[()=>(e(Ve),u(()=>Lt.includes("e")?e(Ve).x2:e(Ve).x1)),()=>(e(Ve),u(()=>Lt.includes("s")?e(Ve).y2:e(Ve).y1))]),h(mt,ht)}),h(tt,At)};ne(Ut,tt=>{e(f),e(Ve),u(()=>e(f)===e(Ve).id)&&tt(pt)})}R(()=>{ct(nt,"data-hotspot-id",(e(Ve),u(()=>e(Ve).id))),ct(nt,"x",(e(Ve),u(()=>e(Ve).x1))),ct(nt,"y",(e(Ve),u(()=>e(Ve).y1))),ct(nt,"width",(e(Ve),u(()=>e(Ve).x2-e(Ve).x1))),ct(nt,"height",(e(Ve),u(()=>e(Ve).y2-e(Ve).y1))),St(nt,0,(e(f),e(Ve),u(()=>`hotspot ${e(f)===e(Ve).id?"active":""}`)),"svelte-3thb0k"),ct(Nt,"x",(e(Ve),u(()=>e(Ve).x1+4))),ct(Nt,"y",(e(Ve),u(()=>e(Ve).y1+14))),w(gt,(e(Ve),u(()=>e(Ve).label)))}),h(Xe,_t)}),n(lt),n(je),Gn(je,Xe=>c(T,Xe),()=>e(T)),R(Xe=>{ct(Ge,"src",Xe),ct(Ge,"alt",(e(v),u(()=>e(v).name))),ct(lt,"viewBox",`0 0 ${e(E)||1} ${e(Pe)||1}`)},[()=>(e(v),u(()=>V(e(v).image_url)))]),L("load",Ge,me),L("pointerdown",lt,Ja(Le)),L("pointermove",lt,Ja(be)),L("pointerup",lt,Ja(Ke)),L("pointerleave",lt,Ja(Ke)),h(te,je)},Te=te=>{var je=Uv(),Ge=s(je);n(je),R(()=>w(Ge,`No image found for ${e(v),u(()=>e(v).key)??""}. Upload image ZIP first.`)),h(te,je)};ne(q,te=>{e(v),u(()=>e(v).image_url)?te(X):te(Te,!1)})}n(U);var de=i(U,2),xe=s(de),ge=s(xe),Ze=i(s(ge),2),it=s(Ze,!0);n(Ze),n(ge);var rt=i(ge,2);{var j=te=>{var je=qv(),Ge=i(s(je),4);at(Ge,5,()=>(e(v),u(()=>e(v).child_categories)),st,(Ve,_t)=>{var nt=Fv(),Nt=s(nt),gt=s(Nt,!0);n(Nt);var Ut=i(Nt,2),pt=s(Ut,!0);n(Ut),n(nt),R(tt=>{St(Nt,1,tt,"svelte-3thb0k"),w(gt,(e(_t),u(()=>e(_t).display_label||e(_t).pos_label||e(_t).position))),w(pt,(e(_t),u(()=>e(_t).name)))},[()=>(e(ie),e(_t),u(()=>`tag ${e(ie)[Z(e(_t).pos_label||e(_t).position)]>1?"tag-dup":""}`))]),h(Ve,nt)}),n(Ge);var lt=i(Ge,2);{var Xe=Ve=>{var _t=Kv();h(Ve,_t)};ne(lt,Ve=>{e(ie),u(()=>Object.values(e(ie)).some(_t=>_t>1))&&Ve(Xe)})}n(je),h(te,je)},pe=te=>{var je=Bv();h(te,je)};ne(rt,te=>{e(v),u(()=>{var je;return(je=e(v).child_categories)==null?void 0:je.length})?te(j):te(pe,!1)})}n(xe);var $e=i(xe,2),Ye=s($e);{var et=te=>{var je=ot(),Ge=Oe(je);at(Ge,1,()=>(e(p),e(f),u(()=>e(p).filter(lt=>lt.id===e(f)))),st,(lt,Xe)=>{var Ve=Vv(),_t=Oe(Ve),nt=i(s(_t),2);ae(nt),n(_t);var Nt=i(_t,2);R(()=>vt(nt,(e(Xe),u(()=>e(Xe).label)))),L("input",nt,gt=>H(e(Xe).id,"label",gt.target.value)),L("click",Nt,()=>J(e(Xe).id)),h(lt,Ve)}),h(te,je)},Qe=te=>{var je=Wv();h(te,je)};ne(Ye,te=>{e(f)?te(et):te(Qe,!1)})}var We=i(Ye,2),Ue=s(We),Ie=s(Ue,!0);n(Ue);var ue=i(Ue,2);n(We),n($e),n(de),n(D),R(()=>{w(it,(e(v),u(()=>e(v).name))),Ue.disabled=e(b),w(Ie,e(b)?"Saving...":"Save map")}),L("click",Ue,qe),L("click",ue,He),h($,D)};ne(Je,$=>{e(v)?$(le,!1):$(Be)})}n(Ce),n(F),R(()=>{P.disabled=e(m),w(A,e(m)?"Loading...":"Refresh list")}),Ta(k,()=>e(l),$=>c(l,$)),dn(g,()=>e(y),$=>c(y,$)),L("click",P,ke),h(t,ee),Dt()}var Yv=C("<div> </div>"),Zv=C("<option> </option>"),Qv=C("<option> </option>"),Xv=C("<p>Loading...</p>"),eu=C('<p class="empty">No users.</p>'),tu=C("<option> </option>"),au=C('<div class="admin-card"><div class="admin-card__header"><div><strong> </strong> <span class="admin-card__meta"> </span></div> <span> </span></div> <div class="admin-card__grid admin-card__grid--users"><label>Email <input type="text"/></label> <label>First name <input type="text"/></label> <label>Last name <input type="text"/></label> <label>Phone <input type="text"/></label> <label>Status <select><option>active</option><option>pending</option><option>disabled</option></select></label> <label>Company <select><option>(none)</option><!></select></label> <label>New password <input type="text" placeholder="Leave blank"/></label> <div class="admin-role"><span class="role-title">Roles</span> <label class="checkbox"><input type="checkbox"/> Order manager</label> <label class="checkbox"><input type="checkbox"/> CE admin</label></div></div> <div class="admin-card__actions"><button class="secondary">Save</button> <button class="danger">Delete</button></div></div>'),ru=C('<section><h2>Users</h2> <p class="hint">Create and manage users, roles, and company assignments.</p> <!> <div class="panel-grid"><div class="panel-card"><h3>Create user</h3> <div class="form-grid"><label>Email<input type="text"/></label> <label>Password<input type="text"/></label> <label>First name<input type="text"/></label> <label>Last name<input type="text"/></label> <label>Phone<input type="text"/></label> <label>Status <select><option>active</option><option>pending</option><option>disabled</option></select></label> <label>Company <select><option>(none)</option><!></select></label> <label class="checkbox"><input type="checkbox"/> Order manager</label> <label class="checkbox"><input type="checkbox"/> CE admin</label></div> <button>Create</button></div></div> <div class="panel-card"><h3>Filter users</h3> <div class="form-grid"><label>Search <input type="text" placeholder="Email, name, phone, company"/></label> <label>Status <select><option>(all)</option><option>active</option><option>pending</option><option>disabled</option></select></label> <label>Company <select><option>(all)</option><!></select></label> <label>Role <select><option>(all)</option><option>Order manager</option><option>CE admin</option><option>Both roles</option><option>No roles</option></select></label></div></div> <div class="card-list"><!></div></section>');function nu(t,r){Rt(r,!1);const a=S(),l=S(),o=S();let d=S([]),v=S([]),p=S(null),f=S(!1),_=S(!1),m=S(""),b=S(""),y=S(""),x=S(""),T=S({email:"",password:"",first_name:"",last_name:"",phone:"",status:"active",company_id:"",is_order_manager:!1,is_ce_admin:!1});function re(j){return j.map(pe=>({...pe,dirty:!1,password:""}))}async function z(){c(p,null),c(f,!0);try{const[j,pe]=await Promise.all([Uc(),Js()]);c(d,re(j||[])),c(v,pe||[])}catch(j){c(p,{type:"error",message:j.message||"Could not load users."})}finally{c(f,!1)}}va(z);function E(j,pe,$e){const Ye=[...e(d)];Ye[j]={...Ye[j],[pe]:$e,dirty:!0},c(d,Ye)}async function Pe(j,pe){c(p,null),c(_,!0);try{await Kc(j.id,{email:j.email,first_name:j.first_name,last_name:j.last_name,phone:j.phone,status:j.status,company_id:j.company_id||null,is_order_manager:j.is_order_manager?1:0,is_ce_admin:j.is_ce_admin?1:0,password:j.password||""});const $e=[...e(d)];$e[pe]={...j,dirty:!1,password:""},c(d,$e),c(p,{type:"success",message:"User saved."})}catch($e){c(p,{type:"error",message:$e.message||"Save failed."})}finally{c(_,!1)}}async function fe(){if(c(p,null),!e(T).email||!e(T).password){c(p,{type:"error",message:"Email and password are required."});return}try{await Fc({...e(T),company_id:e(T).company_id||null,is_order_manager:e(T).is_order_manager?1:0,is_ce_admin:e(T).is_ce_admin?1:0}),c(T,{email:"",password:"",first_name:"",last_name:"",phone:"",status:"active",company_id:"",is_order_manager:!1,is_ce_admin:!1}),await z(),c(p,{type:"success",message:"User created."})}catch(j){c(p,{type:"error",message:j.message||"Create failed."})}}async function I(j){if(c(p,null),!!confirm("Delete this user?"))try{await qc(j),c(d,e(d).filter(pe=>pe.id!==j)),c(p,{type:"success",message:"User deleted."})}catch(pe){c(p,{type:"error",message:pe.message||"Delete failed."})}}function ce(j){return String(j||"").toLowerCase().trim()}ft(()=>e(v),()=>{c(a,new Map(e(v).map(j=>[String(j.id),j.name])))}),ft(()=>e(m),()=>{c(l,ce(e(m)))}),ft(()=>(e(d),e(b),e(y),e(x),e(l),e(a)),()=>{c(o,e(d).filter(j=>{if(e(b)&&j.status!==e(b)||e(y)&&String(j.company_id||"")!==e(y)||e(x)&&(e(x)==="order_manager"&&!j.is_order_manager||e(x)==="ce_admin"&&!j.is_ce_admin||e(x)==="both"&&!(j.is_order_manager&&j.is_ce_admin)||e(x)==="none"&&(j.is_order_manager||j.is_ce_admin)))return!1;if(!e(l))return!0;const pe=ce(j.email),$e=ce(j.first_name),Ye=ce(j.last_name),et=ce(j.phone),Qe=ce(e(a).get(String(j.company_id||"")));return pe.includes(e(l))||$e.includes(e(l))||Ye.includes(e(l))||et.includes(e(l))||Qe.includes(e(l))}))}),wa(),Ot();var W=ru(),ie=i(s(W),4);{var Z=j=>{var pe=Yv(),$e=s(pe,!0);n(pe),R(()=>{St(pe,1,(e(p),u(()=>`status ${e(p).type}`))),w($e,(e(p),u(()=>e(p).message)))}),h(j,pe)};ne(ie,j=>{e(p)&&j(Z)})}var V=i(ie,2),ve=s(V),ze=i(s(ve),2),me=s(ze),_e=i(s(me));ae(_e),n(me);var we=i(me,2),se=i(s(we));ae(se),n(we);var K=i(we,2),Ne=i(s(K));ae(Ne),n(K);var ye=i(K,2),Ae=i(s(ye));ae(Ae),n(ye);var ke=i(ye,2),Se=i(s(ke));ae(Se),n(ke);var qe=i(ke,2),He=i(s(qe));R(()=>{e(T),da(()=>{})});var H=s(He);H.value=H.__value="active";var J=i(H);J.value=J.__value="pending";var Le=i(J);Le.value=Le.__value="disabled",n(He),n(qe);var be=i(qe,2),Ke=i(s(be));R(()=>{e(T),da(()=>{e(v)})});var ee=s(Ke);ee.value=ee.__value="";var O=i(ee);at(O,1,()=>e(v),st,(j,pe)=>{var $e=Zv(),Ye=s($e,!0);n($e);var et={};R(Qe=>{w(Ye,(e(pe),u(()=>e(pe).name))),et!==(et=Qe)&&($e.value=($e.__value=Qe)??"")},[()=>(e(pe),u(()=>String(e(pe).id)))]),h(j,$e)}),n(Ke),n(be);var he=i(be,2),M=s(he);ae(M),Vt(),n(he);var k=i(he,2),B=s(k);ae(B),Vt(),n(k),n(ze);var g=i(ze,2);n(ve),n(V);var P=i(V,2),A=i(s(P),2),N=s(A),G=i(s(N));ae(G),n(N);var F=i(N,2),Y=i(s(F));R(()=>{e(b),da(()=>{})});var Q=s(Y);Q.value=Q.__value="";var Me=i(Q);Me.value=Me.__value="active";var Ee=i(Me);Ee.value=Ee.__value="pending";var Ce=i(Ee);Ce.value=Ce.__value="disabled",n(Y),n(F);var Je=i(F,2),Be=i(s(Je));R(()=>{e(y),da(()=>{e(v)})});var le=s(Be);le.value=le.__value="";var $=i(le);at($,1,()=>e(v),st,(j,pe)=>{var $e=Qv(),Ye=s($e,!0);n($e);var et={};R(Qe=>{w(Ye,(e(pe),u(()=>e(pe).name))),et!==(et=Qe)&&($e.value=($e.__value=Qe)??"")},[()=>(e(pe),u(()=>String(e(pe).id)))]),h(j,$e)}),n(Be),n(Je);var D=i(Je,2),U=i(s(D));R(()=>{e(x),da(()=>{})});var q=s(U);q.value=q.__value="";var X=i(q);X.value=X.__value="order_manager";var Te=i(X);Te.value=Te.__value="ce_admin";var de=i(Te);de.value=de.__value="both";var xe=i(de);xe.value=xe.__value="none",n(U),n(D),n(A),n(P);var ge=i(P,2),Ze=s(ge);{var it=j=>{var pe=Xv();h(j,pe)},rt=j=>{var pe=ot(),$e=Oe(pe);{var Ye=Qe=>{var We=eu();h(Qe,We)},et=Qe=>{var We=ot(),Ue=Oe(We);at(Ue,1,()=>e(o),st,(Ie,ue,te)=>{var je=au(),Ge=s(je),lt=s(Ge),Xe=s(lt),Ve=s(Xe,!0);n(Xe);var _t=i(Xe,2),nt=s(_t);n(_t),n(lt);var Nt=i(lt,2),gt=s(Nt,!0);n(Nt),n(Ge);var Ut=i(Ge,2),pt=s(Ut),tt=i(s(pt));ae(tt),n(pt);var At=i(pt,2),Mt=i(s(At));ae(Mt),n(At);var mt=i(At,2),Lt=i(s(mt));ae(Lt),n(mt);var ht=i(mt,2),qt=i(s(ht));ae(qt),n(ht);var Jt=i(ht,2),ua=i(s(Jt)),Xt=s(ua);Xt.value=Xt.__value="active";var Wt=i(Xt);Wt.value=Wt.__value="pending";var ia=i(Wt);ia.value=ia.__value="disabled",n(ua);var qa;Cn(ua),n(Jt);var fa=i(Jt,2),Gt=i(s(fa)),dt=s(Gt);dt.value=dt.__value="";var Et=i(dt);at(Et,1,()=>e(v),st,(It,dr)=>{var Yt=tu(),xr=s(Yt,!0);n(Yt);var Kr={};R(qr=>{w(xr,(e(dr),u(()=>e(dr).name))),Kr!==(Kr=qr)&&(Yt.value=(Yt.__value=qr)??"")},[()=>(e(dr),u(()=>String(e(dr).id)))]),h(It,Yt)}),n(Gt);var zt;Cn(Gt),n(fa);var Bt=i(fa,2),Kt=i(s(Bt));ae(Kt),n(Bt);var jt=i(Bt,2),la=i(s(jt),2),Xa=s(la);ae(Xa),Vt(),n(la);var oa=i(la,2),ta=s(oa);ae(ta),Vt(),n(oa),n(jt),n(Ut);var ea=i(Ut,2),ja=s(ea),wr=i(ja,2);n(ea),n(je),R(It=>{w(Ve,(e(ue),u(()=>e(ue).email))),w(nt,`${e(ue),u(()=>e(ue).first_name)??""} ${e(ue),u(()=>e(ue).last_name)??""}`),St(Nt,1,(e(ue),u(()=>`admin-badge ${e(ue).status==="active"?"admin-badge--success":e(ue).status==="pending"?"admin-badge--warning":"admin-badge--danger"}`))),w(gt,(e(ue),u(()=>e(ue).status))),vt(tt,(e(ue),u(()=>e(ue).email))),vt(Mt,(e(ue),u(()=>`${e(ue).first_name||""}`))),vt(Lt,(e(ue),u(()=>`${e(ue).last_name||""}`))),vt(qt,(e(ue),u(()=>e(ue).phone||""))),qa!==(qa=(e(ue),u(()=>e(ue).status)))&&(ua.value=(ua.__value=(e(ue),u(()=>e(ue).status)))??"",cn(ua,(e(ue),u(()=>e(ue).status)))),zt!==(zt=It)&&(Gt.value=(Gt.__value=It)??"",cn(Gt,It)),vt(Kt,(e(ue),u(()=>e(ue).password||""))),zs(Xa,(e(ue),u(()=>!!e(ue).is_order_manager))),zs(ta,(e(ue),u(()=>!!e(ue).is_ce_admin))),ja.disabled=(e(ue),e(_),u(()=>!e(ue).dirty||e(_)))},[()=>(e(ue),u(()=>e(ue).company_id?String(e(ue).company_id):""))]),L("input",tt,It=>E(te,"email",It.target.value)),L("input",Mt,It=>E(te,"first_name",It.target.value)),L("input",Lt,It=>E(te,"last_name",It.target.value)),L("input",qt,It=>E(te,"phone",It.target.value)),L("change",ua,It=>E(te,"status",It.target.value)),L("change",Gt,It=>E(te,"company_id",It.target.value?Number(It.target.value):"")),L("input",Kt,It=>E(te,"password",It.target.value)),L("change",Xa,It=>E(te,"is_order_manager",It.target.checked)),L("change",ta,It=>E(te,"is_ce_admin",It.target.checked)),L("click",ja,()=>Pe(e(ue),te)),L("click",wr,()=>I(e(ue).id)),h(Ie,je)}),h(Qe,We)};ne($e,Qe=>{e(o),u(()=>e(o).length===0)?Qe(Ye):Qe(et,!1)},!0)}h(j,pe)};ne(Ze,j=>{e(f)?j(it):j(rt,!1)})}n(ge),n(W),De(_e,()=>e(T).email,j=>Fe(T,e(T).email=j)),De(se,()=>e(T).password,j=>Fe(T,e(T).password=j)),De(Ne,()=>e(T).first_name,j=>Fe(T,e(T).first_name=j)),De(Ae,()=>e(T).last_name,j=>Fe(T,e(T).last_name=j)),De(Se,()=>e(T).phone,j=>Fe(T,e(T).phone=j)),Ta(He,()=>e(T).status,j=>Fe(T,e(T).status=j)),Ta(Ke,()=>e(T).company_id,j=>Fe(T,e(T).company_id=j)),dn(M,()=>e(T).is_order_manager,j=>Fe(T,e(T).is_order_manager=j)),dn(B,()=>e(T).is_ce_admin,j=>Fe(T,e(T).is_ce_admin=j)),L("click",g,fe),De(G,()=>e(m),j=>c(m,j)),Ta(Y,()=>e(b),j=>c(b,j)),Ta(Be,()=>e(y),j=>c(y,j)),Ta(U,()=>e(x),j=>c(x,j)),h(t,W),Dt()}var su=C("<div> </div>"),iu=C("<p>Loading...</p>"),lu=C('<p class="empty">No companies.</p>'),ou=C('<div class="admin-card"><div class="admin-card__header"><div><strong> </strong> <span class="admin-card__meta"> </span></div></div> <div class="admin-card__grid"><label>Name <input type="text"/></label> <label>Customer no <input type="text"/></label> <label>Discount % <input type="number" min="0" max="100"/></label> <label>Country <input type="text"/></label></div> <div class="admin-card__actions"><button class="secondary">Save</button> <button class="danger">Delete</button></div></div>'),cu=C('<section><!> <div class="panel-card"><h3>Create company</h3> <div class="form-grid"><label>Name<input type="text"/></label> <label>Customer no<input type="text"/></label> <label>Discount %<input type="number" min="0" max="100"/></label> <label>Country<input type="text"/></label></div> <button>Create</button></div> <div class="card-list"><!></div></section>');function du(t,r){Rt(r,!1);let a=S([]),l=S(null),o=S(!1),d=S(!1),v=S({name:"",customer_number:"",discount_percent:0,country_code:""});function p(se){return se.map(K=>({...K,dirty:!1}))}async function f(){c(l,null),c(o,!0);try{const se=await Js();c(a,p(se||[]))}catch(se){c(l,{type:"error",message:se.message||"Could not load companies."})}finally{c(o,!1)}}va(f);function _(se,K,Ne){const ye=[...e(a)];ye[se]={...ye[se],[K]:Ne,dirty:!0},c(a,ye)}async function m(se,K){c(l,null),c(d,!0);try{await Vc(se.id,{name:se.name,customer_number:se.customer_number,discount_percent:se.discount_percent||0,country_code:se.country_code});const Ne=[...e(a)];Ne[K]={...se,dirty:!1},c(a,Ne),c(l,{type:"success",message:"Company saved."})}catch(Ne){c(l,{type:"error",message:Ne.message||"Save failed."})}finally{c(d,!1)}}async function b(){if(c(l,null),!e(v).name){c(l,{type:"error",message:"Company name is required."});return}try{await Bc({...e(v),discount_percent:Number(e(v).discount_percent||0)}),c(v,{name:"",customer_number:"",discount_percent:0,country_code:""}),await f(),c(l,{type:"success",message:"Company created."})}catch(se){c(l,{type:"error",message:se.message||"Create failed."})}}async function y(se){if(c(l,null),!!confirm("Delete this company?"))try{await Wc(se),c(a,e(a).filter(K=>K.id!==se)),c(l,{type:"success",message:"Company deleted."})}catch(K){c(l,{type:"error",message:K.message||"Delete failed."})}}Ot();var x=cu(),T=s(x);{var re=se=>{var K=su(),Ne=s(K,!0);n(K),R(()=>{St(K,1,`status ${e(l).type}`),w(Ne,e(l).message)}),h(se,K)};ne(T,se=>{e(l)&&se(re)})}var z=i(T,2),E=i(s(z),2),Pe=s(E),fe=i(s(Pe));ae(fe),n(Pe);var I=i(Pe,2),ce=i(s(I));ae(ce),n(I);var W=i(I,2),ie=i(s(W));ae(ie),n(W);var Z=i(W,2),V=i(s(Z));ae(V),n(Z),n(E);var ve=i(E,2);n(z);var ze=i(z,2),me=s(ze);{var _e=se=>{var K=iu();h(se,K)},we=se=>{var K=ot(),Ne=Oe(K);{var ye=ke=>{var Se=lu();h(ke,Se)},Ae=ke=>{var Se=ot(),qe=Oe(Se);at(qe,1,()=>e(a),st,(He,H,J)=>{var Le=ou(),be=s(Le),Ke=s(be),ee=s(Ke),O=s(ee,!0);n(ee);var he=i(ee,2),M=s(he);n(he),n(Ke),n(be);var k=i(be,2),B=s(k),g=i(s(B));ae(g),n(B);var P=i(B,2),A=i(s(P));ae(A),n(P);var N=i(P,2),G=i(s(N));ae(G),n(N);var F=i(N,2),Y=i(s(F));ae(Y),n(F),n(k);var Q=i(k,2),Me=s(Q),Ee=i(Me,2);n(Q),n(Le),R(()=>{w(O,e(H).name),w(M,`Customer #${(e(H).customer_number||"-")??""}`),vt(g,e(H).name),vt(A,e(H).customer_number||""),vt(G,e(H).discount_percent||0),vt(Y,e(H).country_code||""),Me.disabled=!e(H).dirty||e(d)}),L("input",g,Ce=>_(J,"name",Ce.target.value)),L("input",A,Ce=>_(J,"customer_number",Ce.target.value)),L("input",G,Ce=>_(J,"discount_percent",Ce.target.value)),L("input",Y,Ce=>_(J,"country_code",Ce.target.value)),L("click",Me,()=>m(e(H),J)),L("click",Ee,()=>y(e(H).id)),h(He,Le)}),h(ke,Se)};ne(Ne,ke=>{e(a).length===0?ke(ye):ke(Ae,!1)},!0)}h(se,K)};ne(me,se=>{e(o)?se(_e):se(we,!1)})}n(ze),n(x),De(fe,()=>e(v).name,se=>Fe(v,e(v).name=se)),De(ce,()=>e(v).customer_number,se=>Fe(v,e(v).customer_number=se)),De(ie,()=>e(v).discount_percent,se=>Fe(v,e(v).discount_percent=se)),De(V,()=>e(v).country_code,se=>Fe(v,e(v).country_code=se)),L("click",ve,b),h(t,x),Dt()}var vu=C("<div> </div>"),uu=C("<option> </option>"),fu=C("<option> </option>"),pu=C("<p>Loading...</p>"),_u=C('<p class="empty">No addresses.</p>'),hu=C("<option> </option>"),gu=C('<div class="admin-card"><div class="admin-card__header"><div><strong> </strong> <span class="admin-card__meta"> </span></div> <span class="admin-badge"> </span></div> <div class="admin-card__grid"><label>Company <select><option>(none)</option><!></select></label> <label>First name <input type="text"/></label> <label>Last name <input type="text"/></label> <label>Street <input type="text"/></label> <label>Street 2 <input type="text"/></label> <label>Zip <input type="text"/></label> <label>City <input type="text"/></label> <label>Country <input type="text"/></label> <label>Delivery id <input type="text"/></label></div> <div class="admin-card__actions"><button class="secondary">Save</button> <button class="danger">Delete</button></div></div>'),mu=C('<section><h2>Delivery addresses</h2> <p class="hint">Manage delivery addresses per company.</p> <!> <div class="panel-card"><h3>Filter</h3> <div class="form-grid"><label>Company <select><option>All</option><!></select></label></div></div> <div class="panel-card"><h3>Create address</h3> <div class="form-grid"><label>Company <select><option>Select</option><!></select></label> <label>First name<input type="text"/></label> <label>Last name<input type="text"/></label> <label>Street<input type="text"/></label> <label>Street 2<input type="text"/></label> <label>Zip<input type="text"/></label> <label>City<input type="text"/></label> <label>Country<input type="text"/></label> <label>Delivery id<input type="text"/></label></div> <button>Create</button></div> <div class="card-list"><!></div></section>');function yu(t,r){Rt(r,!1);let a=S([]),l=S([]),o=S(null),d=S(!1),v=S(!1),p=S(""),f=S({company_id:"",attn_first_name:"",attn_last_name:"",street:"",street_2:"",zip_code:"",postal_area:"",country:"",delivery_id:""});function _(g){return g.map(P=>({...P,dirty:!1}))}async function m(){c(o,null),c(d,!0);try{const[g,P]=await Promise.all([Hc(e(p)),Js()]);c(a,_(g||[])),c(l,P||[])}catch(g){c(o,{type:"error",message:g.message||"Could not load delivery addresses."})}finally{c(d,!1)}}va(m);function b(g,P,A){const N=[...e(a)];N[g]={...N[g],[P]:A,dirty:!0},c(a,N)}async function y(g,P){c(o,null),c(v,!0);try{await Gc(g.id,{...g,company_id:g.company_id||null});const A=[...e(a)];A[P]={...g,dirty:!1},c(a,A),c(o,{type:"success",message:"Address saved."})}catch(A){c(o,{type:"error",message:A.message||"Save failed."})}finally{c(v,!1)}}async function x(){if(c(o,null),!e(f).company_id){c(o,{type:"error",message:"Company is required."});return}try{await Jc({...e(f),company_id:Number(e(f).company_id)}),c(f,{company_id:"",attn_first_name:"",attn_last_name:"",street:"",street_2:"",zip_code:"",postal_area:"",country:"",delivery_id:""}),await m(),c(o,{type:"success",message:"Address created."})}catch(g){c(o,{type:"error",message:g.message||"Create failed."})}}async function T(g){if(c(o,null),!!confirm("Delete this address?"))try{await Yc(g),c(a,e(a).filter(P=>P.id!==g)),c(o,{type:"success",message:"Address deleted."})}catch(P){c(o,{type:"error",message:P.message||"Delete failed."})}}Ot();var re=mu(),z=i(s(re),4);{var E=g=>{var P=vu(),A=s(P,!0);n(P),R(()=>{St(P,1,`status ${e(o).type}`),w(A,e(o).message)}),h(g,P)};ne(z,g=>{e(o)&&g(E)})}var Pe=i(z,2),fe=i(s(Pe),2),I=s(fe),ce=i(s(I));R(()=>{e(p),da(()=>{e(l)})});var W=s(ce);W.value=W.__value="";var ie=i(W);at(ie,1,()=>e(l),st,(g,P)=>{var A=uu(),N=s(A,!0);n(A);var G={};R(F=>{w(N,e(P).name),G!==(G=F)&&(A.value=(A.__value=F)??"")},[()=>String(e(P).id)]),h(g,A)}),n(ce),n(I),n(fe),n(Pe);var Z=i(Pe,2),V=i(s(Z),2),ve=s(V),ze=i(s(ve));R(()=>{e(f),da(()=>{e(l)})});var me=s(ze);me.value=me.__value="";var _e=i(me);at(_e,1,()=>e(l),st,(g,P)=>{var A=fu(),N=s(A,!0);n(A);var G={};R(F=>{w(N,e(P).name),G!==(G=F)&&(A.value=(A.__value=F)??"")},[()=>String(e(P).id)]),h(g,A)}),n(ze),n(ve);var we=i(ve,2),se=i(s(we));ae(se),n(we);var K=i(we,2),Ne=i(s(K));ae(Ne),n(K);var ye=i(K,2),Ae=i(s(ye));ae(Ae),n(ye);var ke=i(ye,2),Se=i(s(ke));ae(Se),n(ke);var qe=i(ke,2),He=i(s(qe));ae(He),n(qe);var H=i(qe,2),J=i(s(H));ae(J),n(H);var Le=i(H,2),be=i(s(Le));ae(be),n(Le);var Ke=i(Le,2),ee=i(s(Ke));ae(ee),n(Ke),n(V);var O=i(V,2);n(Z);var he=i(Z,2),M=s(he);{var k=g=>{var P=pu();h(g,P)},B=g=>{var P=ot(),A=Oe(P);{var N=F=>{var Y=_u();h(F,Y)},G=F=>{var Y=ot(),Q=Oe(Y);at(Q,1,()=>e(a),st,(Me,Ee,Ce)=>{var Je=gu(),Be=s(Je),le=s(Be),$=s(le),D=s($,!0);n($);var U=i($,2),q=s(U);n(U),n(le);var X=i(le,2),Te=s(X,!0);n(X),n(Be);var de=i(Be,2),xe=s(de),ge=i(s(xe)),Ze=s(ge);Ze.value=Ze.__value="";var it=i(Ze);at(it,1,()=>e(l),st,(gt,Ut)=>{var pt=hu(),tt=s(pt,!0);n(pt);var At={};R(Mt=>{w(tt,e(Ut).name),At!==(At=Mt)&&(pt.value=(pt.__value=Mt)??"")},[()=>String(e(Ut).id)]),h(gt,pt)}),n(ge);var rt;Cn(ge),n(xe);var j=i(xe,2),pe=i(s(j));ae(pe),n(j);var $e=i(j,2),Ye=i(s($e));ae(Ye),n($e);var et=i($e,2),Qe=i(s(et));ae(Qe),n(et);var We=i(et,2),Ue=i(s(We));ae(Ue),n(We);var Ie=i(We,2),ue=i(s(Ie));ae(ue),n(Ie);var te=i(Ie,2),je=i(s(te));ae(je),n(te);var Ge=i(te,2),lt=i(s(Ge));ae(lt),n(Ge);var Xe=i(Ge,2),Ve=i(s(Xe));ae(Ve),n(Xe),n(de);var _t=i(de,2),nt=s(_t),Nt=i(nt,2);n(_t),n(Je),R(()=>{w(D,e(Ee).street||"Address"),w(q,`${(e(Ee).postal_area||"")??""} ${(e(Ee).zip_code||"")??""}`),w(Te,e(Ee).country||"-"),rt!==(rt=e(Ee).company_id||"")&&(ge.value=(ge.__value=e(Ee).company_id||"")??"",cn(ge,e(Ee).company_id||"")),vt(pe,`${e(Ee).attn_first_name||""}`),vt(Ye,`${e(Ee).attn_last_name||""}`),vt(Qe,e(Ee).street||""),vt(Ue,e(Ee).street_2||""),vt(ue,e(Ee).zip_code||""),vt(je,e(Ee).postal_area||""),vt(lt,e(Ee).country||""),vt(Ve,e(Ee).delivery_id||""),nt.disabled=!e(Ee).dirty||e(v)}),L("change",ge,gt=>b(Ce,"company_id",gt.target.value)),L("input",pe,gt=>b(Ce,"attn_first_name",gt.target.value)),L("input",Ye,gt=>b(Ce,"attn_last_name",gt.target.value)),L("input",Qe,gt=>b(Ce,"street",gt.target.value)),L("input",Ue,gt=>b(Ce,"street_2",gt.target.value)),L("input",ue,gt=>b(Ce,"zip_code",gt.target.value)),L("input",je,gt=>b(Ce,"postal_area",gt.target.value)),L("input",lt,gt=>b(Ce,"country",gt.target.value)),L("input",Ve,gt=>b(Ce,"delivery_id",gt.target.value)),L("click",nt,()=>y(e(Ee),Ce)),L("click",Nt,()=>T(e(Ee).id)),h(Me,Je)}),h(F,Y)};ne(A,F=>{e(a).length===0?F(N):F(G,!1)},!0)}h(g,P)};ne(M,g=>{e(d)?g(k):g(B,!1)})}n(he),n(re),Ta(ce,()=>e(p),g=>c(p,g)),L("change",ce,m),Ta(ze,()=>e(f).company_id,g=>Fe(f,e(f).company_id=g)),De(se,()=>e(f).attn_first_name,g=>Fe(f,e(f).attn_first_name=g)),De(Ne,()=>e(f).attn_last_name,g=>Fe(f,e(f).attn_last_name=g)),De(Ae,()=>e(f).street,g=>Fe(f,e(f).street=g)),De(Se,()=>e(f).street_2,g=>Fe(f,e(f).street_2=g)),De(He,()=>e(f).zip_code,g=>Fe(f,e(f).zip_code=g)),De(J,()=>e(f).postal_area,g=>Fe(f,e(f).postal_area=g)),De(be,()=>e(f).country,g=>Fe(f,e(f).country=g)),De(ee,()=>e(f).delivery_id,g=>Fe(f,e(f).delivery_id=g)),L("click",O,x),h(t,re),Dt()}var bu=C('<section class="hero"><div class="container"><p> </p></div></section> <section class="intro"><div class="container"><div class="home-content"><h1> </h1> <p class="lead svelte-1m668wg"> </p> <div class="info-block svelte-1m668wg"><h3 class="svelte-1m668wg"> </h3> <p class="svelte-1m668wg"><!></p></div> <div class="info-block svelte-1m668wg"><h3 class="svelte-1m668wg"> </h3> <p class="svelte-1m668wg"><!></p></div> <div class="info-block svelte-1m668wg"><h3 class="svelte-1m668wg"> </h3> <p class="svelte-1m668wg"><!></p></div> <div class="split-feature svelte-1m668wg"><div class="text svelte-1m668wg"><h3> </h3> <p><!></p></div> <div class="image svelte-1m668wg"><img src="/design/assets/machine.jpg" alt="Swepac Machine" class="svelte-1m668wg"/></div></div></div></div></section>',1);function ku(t,r){Rt(r,!1);const a=S();let l=$t(r,"language",8,"se");const o={se:{hero:"VÃLKOMMEN TILL SWEPACS RESERVDELSPORTAL",title:"RESERVDELAR",intro:"Enklast och bekvÃ¤mast Ã¤r att bestÃ¤lla via Reservdelsportalen.",webOrderTitle:"Web-bestÃ¤llning",webOrderBody:`Klicka pÃ¥ Reservdelar eller Konto i menyraden hÃ¶gst upp

FÃ¶r webbestÃ¤llning av reservdelar klickar du pÃ¥ "Alla produkter" och vÃ¤ljer produkttyp, dÃ¤refter guidas du fram via tydliga sprÃ¤ngskisser Ã¶ver produkterna, vÃ¤ljer reservdel(ar) och antal samt gÃ¥r vidare till kunddata och leveransadress.`,ljungbyTitle:"Order Ljungby",ljungbyBody:`Ãppettider i samband med Jul och NyÃ¥r
Tisdagen den 23.12 stÃ¤nger vi kl.12.00
Fredag den 2.1.2026 stÃ¤ngt
Ãvriga dagar Ã¶ppet som vanligt.

MÃ¥ndag-Torsdag 08.00-16.00

Fredag 08.00-15.00`,vasbyTitle:"Serviceverkstad Upplands VÃ¤sby",vasbyBody:`Ãppettider serviceverkstad i Upplands VÃ¤sby Jul och NyÃ¥r
StÃ¤ngt mellan 2025.12.22 till 2026.01.02
Ãppnar igen 2026.01.05

MÃ¥ndag-Torsdag 7.00-16.30

Fredag 7.00-14.00`,innovationTitle:"Innovation och hÃ¶g produktkvalitet",innovationBody:"Swepac Ã¤r ett ledande helsvenskt fÃ¶retag som utvecklar och tillverkar produkter fÃ¶r jordpackning och betongbearbetning. Produkterna Ã¤r utvecklade i nÃ¤ra samarbete med kunder och har starkt fokus pÃ¥ funktion, sÃ¤kerhet, god ergonomi, hÃ¶g kvalitet och ett medvetet miljÃ¶tÃ¤nkande."},en:{hero:"WELCOME TO SWEPAC'S SPARE PARTS PORTAL",title:"SPARE PARTS",intro:"The easiest way is to order via the Spare Parts Portal.",webOrderTitle:"Web Ordering",webOrderBody:`Click on Spare Parts or Account in the top menu.

For web ordering of spare parts, click on "All products" and select the product type, then you will be guided via clear exploded views of the products, select spare part(s) and quantity and proceed to customer data and delivery address.`,ljungbyTitle:"Order Ljungby",ljungbyBody:`Opening hours during Christmas and New Year
Tuesday 23.12 closing at 12.00
Friday 2.1.2026 closed
Other days open as usual.

Monday-Thursday 08.00-16.00

Friday 08.00-15.00`,vasbyTitle:"Service Workshop Upplands VÃ¤sby",vasbyBody:`Service workshop opening hours Upplands VÃ¤sby Christmas and New Year
Closed between 2025.12.22 to 2026.01.02
Opens again 2026.01.05

Monday-Thursday 7.00-16.30

Friday 7.00-14.00`,innovationTitle:"Innovation and high product quality",innovationBody:"Swepac is a leading all-Swedish company that develops and manufactures products for soil compaction and concrete processing. The products are developed in close cooperation with customers and have a strong focus on function, safety, good ergonomics, high quality and conscious environmental thinking."},pl:{hero:"WITAMY W PORTALU CZÄÅCI ZAMIENNYCH SWEPAC",title:"CZÄÅCI ZAMIENNE",intro:"Najwygodniej zamawiaÄ przez portal czÄÅci zamiennych.",webOrderTitle:"ZamÃ³wienia internetowe",webOrderBody:`Kliknij CzÄÅci zamienne lub Konto w gÃ³rnym menu.

Aby zamÃ³wiÄ czÄÅci zamienne przez internet, kliknij "Wszystkie produkty" i wybierz typ produktu. NastÄpnie zostaniesz poprowadzony przez czytelne schematy produktÃ³w, wybierz czÄÅÄ(i) i iloÅÄ, a nastÄpnie przejdÅº do danych klienta i adresu dostawy.`,ljungbyTitle:"ZamÃ³wienia Ljungby",ljungbyBody:`Godziny otwarcia w okresie ÅwiÄteczno-noworocznym
Wtorek 23.12 zamykamy o 12.00
PiÄtek 2.1.2026 nieczynne
PozostaÅe dni otwarte jak zwykle.

PoniedziaÅek-Czwartek 08.00-16.00

PiÄtek 08.00-15.00`,vasbyTitle:"Warsztat serwisowy Upplands VÃ¤sby",vasbyBody:`Godziny otwarcia warsztatu serwisowego Upplands VÃ¤sby BoÅ¼e Narodzenie i Nowy Rok
ZamkniÄte od 2025.12.22 do 2026.01.02
Otwarte ponownie 2026.01.05

PoniedziaÅek-Czwartek 7.00-16.30

PiÄtek 7.00-14.00`,innovationTitle:"Innowacja i wysoka jakoÅÄ produktÃ³w",innovationBody:"Swepac to wiodÄca szwedzka firma, ktÃ³ra opracowuje i produkuje produkty do zagÄszczania gruntu i obrÃ³bki betonu. Produkty sÄ opracowywane w ÅcisÅej wspÃ³Åpracy z klientami i kÅadÄ duÅ¼y nacisk na funkcjonalnoÅÄ, bezpieczeÅstwo, dobrÄ ergonomiÄ, wysokÄ jakoÅÄ i Åwiadome myÅlenie ekologiczne."}};function d(He){return He?He.replace(/\n/g,"<br>"):""}ft(()=>ut(l()),()=>{c(a,o[l()]||o.se)}),wa();var v=bu(),p=Oe(v),f=s(p),_=s(f),m=s(_,!0);n(_),n(f),n(p);var b=i(p,2),y=s(b),x=s(y),T=s(x),re=s(T,!0);n(T);var z=i(T,2),E=s(z,!0);n(z);var Pe=i(z,2),fe=s(Pe),I=s(fe,!0);n(fe);var ce=i(fe,2),W=s(ce);Re(W,()=>(e(a),u(()=>d(e(a).webOrderBody)))),n(ce),n(Pe);var ie=i(Pe,2),Z=s(ie),V=s(Z,!0);n(Z);var ve=i(Z,2),ze=s(ve);Re(ze,()=>(e(a),u(()=>d(e(a).ljungbyBody)))),n(ve),n(ie);var me=i(ie,2),_e=s(me),we=s(_e,!0);n(_e);var se=i(_e,2),K=s(se);Re(K,()=>(e(a),u(()=>d(e(a).vasbyBody)))),n(se),n(me);var Ne=i(me,2),ye=s(Ne),Ae=s(ye),ke=s(Ae,!0);n(Ae);var Se=i(Ae,2),qe=s(Se);Re(qe,()=>(e(a),u(()=>d(e(a).innovationBody)))),n(Se),n(ye),Vt(2),n(Ne),n(x),n(y),n(b),R(()=>{w(m,(e(a),u(()=>e(a).hero))),w(re,(e(a),u(()=>e(a).title))),w(E,(e(a),u(()=>e(a).intro))),w(I,(e(a),u(()=>e(a).webOrderTitle))),w(V,(e(a),u(()=>e(a).ljungbyTitle))),w(we,(e(a),u(()=>e(a).vasbyTitle))),w(ke,(e(a),u(()=>e(a).innovationTitle)))}),h(t,v),Dt()}const Yr={},wu="http://localhost:8788/api",gn=typeof import.meta<"u"&&(Yr==null?void 0:Yr.VITE_PUBLIC_API_BASE)||typeof import.meta<"u"&&"http://localhost:8788/api"||wu,cs=typeof import.meta<"u"&&(Yr==null?void 0:Yr.VITE_PUBLIC_JSON_BASE)||gn.replace(/\/api\/?$/,"")+"/json",xu=gn.replace(/\/api\/?$/,"");async function br(t){const r=await fetch(t);if(!r.ok)throw new Error(`Request failed: ${r.status}`);return r.json()}function bl(){return xu}async function Su(){return br(`${gn}/main-products`)}async function kl(t){return br(`${cs}/categories-${encodeURIComponent(t)}.json`)}async function Cu(t){return br(`${cs}/products-${encodeURIComponent(t)}.json`)}async function Eu(){return br(`${cs}/machine-categories.json`)}async function Pu(t,r=50){const a=new URLSearchParams;return t&&a.set("query",t),r&&a.set("limit",String(r)),br(`${gn}/products?${a.toString()}`)}async function Nu(t,r=50,a="sv"){const l=new URLSearchParams;return t&&l.set("query",t),r&&l.set("limit",String(r)),a&&l.set("lang",a==="se"?"sv":a),br(`${gn}/search?${l.toString()}`)}async function Tu(t){return br(`${gn}/image-maps/${encodeURIComponent(t)}`)}async function Lu(){return br(`${cs}/price-settings.json`)}var zu=C("<p> </p>"),$u=C('<div class="search-results__empty"> </div>'),Au=C('<button class="chip" type="button"> </button>'),Mu=C('<tr><td> </td><td> </td><td><div class="chip-list"></div></td></tr>'),Iu=C('<table class="search-table"><thead><tr><th> </th><th> </th><th> </th></tr></thead><tbody></tbody></table>'),Ru=C('<div class="search-results"><div class="search-results__title"> </div> <!></div>'),Du=C("<p> </p>"),ju=C("<p> </p>"),Ou=C("<img/>"),Uu=C("<img/>"),Fu=C('<div class="placeholder"></div>'),Ku=C('<button class="expanded-card"><!> <span> </span></button>'),qu=C('<div class="expanded-grid inline-grid"></div>'),Bu=C('<div class="list-item-block"><button class="list-item"><span class="caret"></span> </button> <!></div>'),Vu=C('<article class="list-card"><h3> </h3> <div class="list"></div></article>'),Wu=C("<img/>"),Hu=C("<img/>"),Ju=C('<div class="placeholder"></div>'),Gu=C('<button class="expanded-card"><!> <span> </span></button>'),Yu=C('<div class="expanded-grid inline-grid"></div>'),Zu=C('<div class="list-item-block"><button class="list-item"><span class="caret"></span> </button> <!></div>'),Qu=C('<article class="list-card"><h3> </h3> <div class="list"></div></article>'),Xu=C('<div class="product-columns"><div class="column"></div> <div class="column"></div></div>'),ef=C('<section class="product-page"><div class="container"><h2 class="page-title"> </h2> <div class="search-card"><div><h3> </h3> <p> </p></div> <form class="search-input"><input type="text"/> <button type="submit">ð</button></form></div> <!> <!></div></section>');function tf(t,r){Rt(r,!1);const a=S();let l=$t(r,"onNavigate",8,()=>{}),o=$t(r,"language",8,"se"),d=S("loading");const v=bl();let p=S([]),f=S([]),_=S("se"),m=[],b={},y=S(""),x=S("idle"),T=S([]);const re={se:{title:"Alla produkter",searchTitle:"SÃ¶k produkt via serienummer",searchHint:"Hitta en produkt genom att sÃ¶ka med ett serienummer nedan:",searchPlaceholder:"SÃ¶k...",searchButton:"SÃ¶k",searchEmpty:"Inga artiklar hittades.",searchResults:"SÃ¶kresultat",searchSku:"Artikel.nr",searchName:"BenÃ¤mning",searchCategories:"Kategorier",loading:"Laddar produkter...",error:"Kunde inte hÃ¤mta produktlistan."},en:{title:"All products",searchTitle:"Search by serial number",searchHint:"Find a product by searching for a serial number below:",searchPlaceholder:"Search...",searchButton:"Search",searchEmpty:"No articles found.",searchResults:"Search results",searchSku:"Item no",searchName:"Description",searchCategories:"Categories",loading:"Loading products...",error:"Could not load the product list."},pl:{title:"Wszystkie produkty",searchTitle:"Szukaj po numerze seryjnym",searchHint:"ZnajdÅº produkt, wyszukujÄc numer seryjny poniÅ¼ej:",searchPlaceholder:"Szukaj...",searchButton:"Szukaj",searchEmpty:"Nie znaleziono pozycji.",searchResults:"Wyniki wyszukiwania",searchSku:"Nr artykuÅu",searchName:"Nazwa",searchCategories:"Kategorie",loading:"Åadowanie produktÃ³w...",error:"Nie udaÅo siÄ pobraÄ listy produktÃ³w."}};function z(O){return O?/^https?:\/\//i.test(O)?O:O.startsWith("/")?`${v}${O}`:O:""}async function E(O){const he=new Set;O.forEach(k=>{(k.product_categories||[]).forEach(B=>{const g=B.key||B.slug;if(g){const[P]=String(g).split("-");P&&he.add(P)}})});const M={};for(const k of he)try{M[k]=await kl(k)}catch{M[k]=[]}return M}function Pe(O,he){if(!he)return null;const M=String(he).split("-")[0];return(O[M]||[]).find(B=>(B.key||B.slug)===he)||null}function fe(O){const he=O==null?void 0:O.showForLang;return!he||!he.length?!1:he.map(M=>String(M).toLowerCase()).includes(e(_))}function I(O,he){var k;return O&&(((k=O.lang_name)==null?void 0:k[he])||O.title||O.name||O.label)||""}function ce(O){var B;if(!O)return O;const he=String(O).split("-")[0],k=(b[he]||[]).find(g=>(g.key||g.slug)===O);return k&&(((B=k.lang_name)==null?void 0:B[e(_)])||k.name)||O}async function W(){const O=e(y).trim();if(!O){c(T,[]),c(x,"idle");return}c(x,"loading");try{const he=await Pu(O,50);c(T,Array.isArray(he)?he:[]),c(x,"ready")}catch{c(T,[]),c(x,"error")}}function ie(){const he=(Array.isArray(m)?m.filter(M=>!M.parent):[]).map(M=>{const k=(M.children||[]).slice();k.sort((P,A)=>Number(P.menu_order||0)-Number(A.menu_order||0));const g=k.map(P=>{let A=(P.product_categories||[]).map(N=>{var G;return{...N,key:N.key||N.slug,image:((G=Pe(b,N.key||N.slug))==null?void 0:G.image)||null}}).filter(N=>N.key);return A=A.filter(N=>fe(N)).sort((N,G)=>Number(N.position||0)-Number(G.position||0)),{...P,product_categories:A}}).filter(P=>P.product_categories.length>0);return{key:String(M.id),root:{name:I(M)||"Category"},children:g,childrenByParent:new Map(g.map(P=>[P.id,P.product_categories||[]]))}}).filter(M=>M.children.length>0);c(p,he.filter((M,k)=>k%2===0)),c(f,he.filter((M,k)=>k%2===1))}va(async()=>{try{m=await Eu(),b=await E(m||[]),ie(),c(d,"ready")}catch{c(d,"error")}});let Z=S({});function V(O,he){c(Z,{...e(Z),[O]:e(Z)[O]===he.id?null:he.id})}function ve(O){const he=e(Z)[O.key];return he?O.childrenByParent.get(he)||[]:[]}ft(()=>ut(o()),()=>{c(_,o())}),ft(()=>ut(o()),()=>{c(a,re[o()]||re.se)}),ft(()=>(e(d),ut(o())),()=>{e(d)==="ready"&&(o(),ie())}),wa(),Ot();var ze=ef(),me=s(ze),_e=s(me),we=s(_e,!0);n(_e);var se=i(_e,2),K=s(se),Ne=s(K),ye=s(Ne,!0);n(Ne);var Ae=i(Ne,2),ke=s(Ae,!0);n(Ae),n(K);var Se=i(K,2),qe=s(Se);ae(qe);var He=i(qe,2);n(Se),n(se);var H=i(se,2);{var J=O=>{var he=zu(),M=s(he);n(he),R(()=>w(M,`${e(a),u(()=>e(a).searchResults)??""}: ...`)),h(O,he)},Le=O=>{var he=ot(),M=Oe(he);{var k=B=>{var g=Ru(),P=s(g),A=s(P,!0);n(P);var N=i(P,2);{var G=Y=>{var Q=$u(),Me=s(Q,!0);n(Q),R(()=>w(Me,(e(a),u(()=>e(a).searchEmpty)))),h(Y,Q)},F=Y=>{var Q=Iu(),Me=s(Q),Ee=s(Me),Ce=s(Ee),Je=s(Ce,!0);n(Ce);var Be=i(Ce),le=s(Be,!0);n(Be);var $=i(Be),D=s($,!0);n($),n(Ee),n(Me);var U=i(Me);at(U,5,()=>e(T),st,(q,X)=>{var Te=Mu(),de=s(Te),xe=s(de,!0);n(de);var ge=i(de),Ze=s(ge,!0);n(ge);var it=i(ge),rt=s(it);at(rt,5,()=>(e(X),u(()=>e(X).categories||[])),st,(j,pe)=>{var $e=Au(),Ye=s($e,!0);n($e),R(et=>w(Ye,et),[()=>(e(pe),u(()=>ce(e(pe))))]),L("click",$e,()=>l()(`/category/${e(pe)}`)),h(j,$e)}),n(rt),n(it),n(Te),R(j=>{w(xe,(e(X),u(()=>e(X).sku))),w(Ze,j)},[()=>(e(X),ut(o()),u(()=>I(e(X),o())))]),h(q,Te)}),n(U),n(Q),R(()=>{w(Je,(e(a),u(()=>e(a).searchSku))),w(le,(e(a),u(()=>e(a).searchName))),w(D,(e(a),u(()=>e(a).searchCategories)))}),h(Y,Q)};ne(N,Y=>{e(T),u(()=>e(T).length===0)?Y(G):Y(F,!1)})}n(g),R(()=>w(A,(e(a),u(()=>e(a).searchResults)))),h(B,g)};ne(M,B=>{e(x)==="ready"&&B(k)},!0)}h(O,he)};ne(H,O=>{e(x)==="loading"?O(J):O(Le,!1)})}var be=i(H,2);{var Ke=O=>{var he=Du(),M=s(he,!0);n(he),R(()=>w(M,(e(a),u(()=>e(a).loading)))),h(O,he)},ee=O=>{var he=ot(),M=Oe(he);{var k=g=>{var P=ju(),A=s(P,!0);n(P),R(()=>w(A,(e(a),u(()=>e(a).error)))),h(g,P)},B=g=>{var P=Xu(),A=s(P);at(A,5,()=>e(p),st,(G,F)=>{var Y=Vu(),Q=s(Y),Me=s(Q,!0);n(Q);var Ee=i(Q,2);at(Ee,5,()=>(e(F),u(()=>e(F).children)),st,(Ce,Je)=>{var Be=Bu(),le=s(Be),$=i(s(le));n(le);var D=i(le,2);{var U=q=>{var X=qu();at(X,5,()=>(e(F),u(()=>ve(e(F)))),st,(Te,de)=>{var xe=Ku(),ge=s(xe);{var Ze=pe=>{var $e=Ou();R((Ye,et)=>{ct($e,"src",Ye),ct($e,"alt",et)},[()=>(e(de),u(()=>z(e(de).product_catalog_image_url))),()=>(e(de),ut(o()),u(()=>I(e(de),o())))]),h(pe,$e)},it=pe=>{var $e=ot(),Ye=Oe($e);{var et=We=>{var Ue=Uu();R((Ie,ue)=>{ct(Ue,"src",Ie),ct(Ue,"alt",ue)},[()=>(e(de),u(()=>z(e(de).image.src))),()=>(e(de),ut(o()),u(()=>I(e(de),o())))]),h(We,Ue)},Qe=We=>{var Ue=Fu();h(We,Ue)};ne(Ye,We=>{e(de),u(()=>{var Ue;return(Ue=e(de).image)==null?void 0:Ue.src})?We(et):We(Qe,!1)},!0)}h(pe,$e)};ne(ge,pe=>{e(de),u(()=>e(de).product_catalog_image_url)?pe(Ze):pe(it,!1)})}var rt=i(ge,2),j=s(rt,!0);n(rt),n(xe),R(pe=>w(j,pe),[()=>(e(de),ut(o()),u(()=>I(e(de),o())))]),L("click",xe,()=>l()(`/category/${e(de).key}`)),h(Te,xe)}),n(X),h(q,X)};ne(D,q=>{e(Z),e(F),e(Je),u(()=>e(Z)[e(F).key]===e(Je).id)&&q(U)})}n(Be),R(q=>w($,` ${q??""}`),[()=>(e(Je),ut(o()),u(()=>I(e(Je),o())))]),L("click",le,()=>V(e(F).key,e(Je))),h(Ce,Be)}),n(Ee),n(Y),R(()=>w(Me,(e(F),u(()=>{var Ce;return((Ce=e(F).root)==null?void 0:Ce.name)||e(F).key})))),h(G,Y)}),n(A);var N=i(A,2);at(N,5,()=>e(f),st,(G,F)=>{var Y=Qu(),Q=s(Y),Me=s(Q,!0);n(Q);var Ee=i(Q,2);at(Ee,5,()=>(e(F),u(()=>e(F).children)),st,(Ce,Je)=>{var Be=Zu(),le=s(Be),$=i(s(le));n(le);var D=i(le,2);{var U=q=>{var X=Yu();at(X,5,()=>(e(F),u(()=>ve(e(F)))),st,(Te,de)=>{var xe=Gu(),ge=s(xe);{var Ze=pe=>{var $e=Wu();R((Ye,et)=>{ct($e,"src",Ye),ct($e,"alt",et)},[()=>(e(de),u(()=>z(e(de).product_catalog_image_url))),()=>(e(de),ut(o()),u(()=>I(e(de),o())))]),h(pe,$e)},it=pe=>{var $e=ot(),Ye=Oe($e);{var et=We=>{var Ue=Hu();R((Ie,ue)=>{ct(Ue,"src",Ie),ct(Ue,"alt",ue)},[()=>(e(de),u(()=>z(e(de).image.src))),()=>(e(de),ut(o()),u(()=>I(e(de),o())))]),h(We,Ue)},Qe=We=>{var Ue=Ju();h(We,Ue)};ne(Ye,We=>{e(de),u(()=>{var Ue;return(Ue=e(de).image)==null?void 0:Ue.src})?We(et):We(Qe,!1)},!0)}h(pe,$e)};ne(ge,pe=>{e(de),u(()=>e(de).product_catalog_image_url)?pe(Ze):pe(it,!1)})}var rt=i(ge,2),j=s(rt,!0);n(rt),n(xe),R(pe=>w(j,pe),[()=>(e(de),ut(o()),u(()=>I(e(de),o())))]),L("click",xe,()=>l()(`/category/${e(de).key}`)),h(Te,xe)}),n(X),h(q,X)};ne(D,q=>{e(Z),e(F),e(Je),u(()=>e(Z)[e(F).key]===e(Je).id)&&q(U)})}n(Be),R(q=>w($,` ${q??""}`),[()=>(e(Je),ut(o()),u(()=>I(e(Je),o())))]),L("click",le,()=>V(e(F).key,e(Je))),h(Ce,Be)}),n(Ee),n(Y),R(()=>w(Me,(e(F),u(()=>{var Ce;return((Ce=e(F).root)==null?void 0:Ce.name)||e(F).key})))),h(G,Y)}),n(N),n(P),h(g,P)};ne(M,g=>{e(d)==="error"?g(k):g(B,!1)},!0)}h(O,he)};ne(be,O=>{e(d)==="loading"?O(Ke):O(ee,!1)})}n(me),n(ze),R(()=>{w(we,(e(a),u(()=>e(a).title))),w(ye,(e(a),u(()=>e(a).searchTitle))),w(ke,(e(a),u(()=>e(a).searchHint))),ct(qe,"placeholder",(e(a),u(()=>e(a).searchPlaceholder))),ct(He,"aria-label",(e(a),u(()=>e(a).searchButton)))}),De(qe,()=>e(y),O=>c(y,O)),L("submit",Se,Ja(W)),h(t,ze),Dt()}function af(){const{subscribe:t,update:r,set:a}=hl([]);return{subscribe:t,addItem:(l,o=1)=>{r(d=>{if(o<=0)return d;const v=d.findIndex(p=>p.sku===l.sku);if(v!==-1){const p=[...d];return p[v].qty+=o,p}else return[...d,{...l,qty:o}]})},removeItem:l=>{r(o=>o.filter(d=>d.sku!==l))},updateQuantity:(l,o)=>{r(d=>{const v=d.findIndex(p=>p.sku===l);if(v!==-1){const p=[...d];return p[v].qty=o,p}return d})},clear:()=>a([])}}const kr=af(),rf=gl(kr,t=>t.reduce((r,a)=>r+a.qty,0)),wl=gl(kr,t=>t.reduce((r,a)=>r+a.price*a.qty,0)),nf=kr.addItem,xl=kr.removeItem,Sl=kr.updateQuantity,Zr=kr.clear;var sf=C('<span aria-hidden="true"></span>'),lf=C('<span class="tree-spacer" aria-hidden="true"></span>'),of=C('<div class="tree-children"></div>'),cf=C('<div><button type="button"><!> <span class="tree-number"> </span> <span class="tree-label"> </span></button> <!></div>');function Cl(t,r){Rt(r,!1);const a=S(),l=S(),o=S(),d=S(),v=S(),p=S();let f=$t(r,"item",8),_=$t(r,"language",8,"se"),m=$t(r,"selectedKey",8,""),b=$t(r,"isChild",8,!1);const y=Dn();let x=S(!1);const T=_e=>(_e==null?void 0:_e.key)||(_e==null?void 0:_e.slug)||"";function re(_e,we){var se;if(!((se=_e==null?void 0:_e.children)!=null&&se.length))return!1;for(const K of _e.children)if(T(K)===we||re(K,we))return!0;return!1}function z(_e){_e&&_e.stopPropagation();const we=!e(x);c(x,we),we&&y("select",f())}function E(_e){_e&&_e.stopPropagation(),e(v)&&!e(x)&&c(x,!0),y("select",f())}ft(()=>(ut(f()),ut(_())),()=>{var _e;c(a,((_e=f().lang_name)==null?void 0:_e[_()])||f().name||f().slug||f().key||"")}),ft(()=>ut(f()),()=>{c(l,Number(f().pos_num||f().menu_order||f().position||0))}),ft(()=>e(l),()=>{c(o,e(l)>0?`${e(l)}.`:"")}),ft(()=>(ut(m()),ut(f())),()=>{c(d,m()===f().key||m()===f().slug)}),ft(()=>ut(f()),()=>{c(v,f().children&&f().children.length>0)}),ft(()=>(e(v),ut(f())),()=>{c(p,e(v)?[...f().children].sort((_e,we)=>{const se=Number(_e.pos_num||_e.menu_order||_e.position||0),K=Number(we.pos_num||we.menu_order||we.position||0);return se!==K?se-K:(_e.id||0)-(we.id||0)}):[])}),ft(()=>(e(v),ut(m()),ut(f())),()=>{e(v)&&m()&&(T(f())===m()||re(f(),m()))&&c(x,!0)}),wa(),Ot();var Pe=cf(),fe=s(Pe),I=s(fe);{var ce=_e=>{var we=sf();R(()=>St(we,1,`tree-caret ${e(x)?"open":""}`)),L("click",we,En(z)),h(_e,we)},W=_e=>{var we=lf();h(_e,we)};ne(I,_e=>{e(v)?_e(ce):_e(W,!1)})}var ie=i(I,2),Z=s(ie,!0);n(ie);var V=i(ie,2),ve=s(V,!0);n(V),n(fe);var ze=i(fe,2);{var me=_e=>{var we=of();at(we,5,()=>e(p),se=>se.id,(se,K)=>{var Ne=ot(),ye=Oe(Ne);Cl(ye,{get item(){return e(K)},get language(){return _()},get selectedKey(){return m()},isChild:!0,$$events:{select(Ae){Pn.call(this,r,Ae)}}}),h(se,Ne)}),n(we),h(_e,we)};ne(ze,_e=>{e(x),e(p),u(()=>e(x)&&e(p).length>0)&&_e(me)})}n(Pe),R(()=>{St(Pe,1,`tree-node ${b()?"child":""}`),St(fe,1,`tree-item ${b()?"child":""} ${e(d)?"active":""}`),w(Z,e(o)),w(ve,e(a))}),L("click",fe,E),h(t,Pe),Dt()}var df=C('<div class="tree-root"></div>');function vf(t,r){Rt(r,!1);let a=$t(r,"categories",24,()=>[]),l=$t(r,"mainKey",8,""),o=$t(r,"language",8,"se"),d=$t(r,"selectedKey",8,"");const v=Dn();let p=S([]);const f=b=>(b==null?void 0:b.key)||(b==null?void 0:b.slug)||"";function _(b){v("select",b.detail)}ft(()=>(ut(a()),ut(l())),()=>{if(a().length&&l()){const b=a().map(z=>({...z,children:[],_sortPos:Number(z.pos_num||z.menu_order||z.position||0)}));b.sort((z,E)=>{const Pe=z._sortPos-E._sortPos;return Pe!==0?Pe:(z.id||0)-(E.id||0)});const y=new Map,x=new Map;b.forEach(z=>y.set(z.id,z)),b.forEach(z=>{const E=f(z);E&&x.set(E,z)});const T=z=>{if(!z||z===l())return"";let E=z;for(;E.includes("-");){if(E=E.substring(0,E.lastIndexOf("-")),E===l())return"";if(x.has(E))return E}return""};b.forEach(z=>{if(!z.parent||z.parent===0){const E=f(z),Pe=T(E);if(Pe){const fe=x.get(Pe);fe!=null&&fe.id&&(z.parent=fe.id)}}});for(const z of b)z.parent&&y.has(z.parent)&&y.get(z.parent).children.push(z);const re=b.find(z=>f(z)===l());c(p,re?re.children:[])}else c(p,[])}),wa(),Ot();var m=df();at(m,5,()=>e(p),b=>b.id,(b,y)=>{Cl(b,{get item(){return e(y)},get language(){return o()},get selectedKey(){return d()},$$events:{select:_}})}),n(m),h(t,m),Dt()}var uf=C("<p>Laddar produktvy...</p>"),ff=C('<p> <br/><small style="color:red"> </small></p>'),pf=C("<img/>"),_f=C("<img/>"),hf=C('<div class="placeholder"></div>'),gf=C('<nav class="category-tree"><!></nav>'),mf=C('<div class="map-placeholder"> </div>'),yf=C('<div class="map-placeholder"> </div>'),bf=C("<img/>"),kf=C('<div class="map-content" role="presentation"><!> <!></div>'),wf=C('<div class="image-map-wrapper"><!></div>'),xf=C('<tr><td colspan="7" class="empty-row"> </td></tr>'),Sf=C('<tr><td class="svelte-1ugeskh"> </td><td class="svelte-1ugeskh"> </td><td class="svelte-1ugeskh"> </td><td class="svelte-1ugeskh"> </td><td class="svelte-1ugeskh"> </td><td class="svelte-1ugeskh"> </td><td class="svelte-1ugeskh"><div class="qty-cell"><input type="number" min="0" placeholder="0"/> <button class="cart-mini" type="button" aria-label="Add to cart"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="9" cy="21" r="1"></circle><circle cx="20" cy="21" r="1"></circle><path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path></svg></button></div></td></tr>'),Cf=C('<div class="category-layout"><aside class="category-sidebar"><div class="sidebar-title"> </div> <div class="product-card"><!></div> <div class="product-name"> </div> <!></aside> <div class="category-view"><div class="category-header"><h2> </h2> <button class="pdf-button" type="button"><span class="pdf-icon" aria-hidden="true"> </span></button></div> <div class="category-content"><!> <div class="articles-panel"><table class="articles-table"><thead><tr><th> </th><th> </th><th> </th><th> </th><th> </th><th> </th><th> </th></tr></thead><tbody><!></tbody></table></div></div></div></div>'),Ef=C('<section class="category-page"><div class="container"><!></div></section>');function Pf(t,r){Rt(r,!1);const a=S();let l=$t(r,"categoryKey",8,""),o=$t(r,"language",8,"se"),d=$t(r,"currency",8,"SEK"),v=$t(r,"currencyRate",8,1),p=$t(r,"onNavigate",8,()=>{});const f=bl(),_=Dn();let m=S("loading"),b=S(""),y=S(null),x=S(null),T=S(""),re=S("idle"),z=S(""),E=S([]),Pe=S("imagemap"),fe=S([]),I=S(""),ce="",W=S({}),ie=[],Z=S("");const V={se:{selected:"Vald produkt",pdf:"PDF",table:{nr:"Nr",sku:"Artikel.nr",name:"BenÃ¤mning",unit:"Enhet",list:"Listpris",net:"Nettopris",qty:"Antal"},empty:"Inga artiklar fÃ¶r vald kategori.",loadMap:"Laddar bildkarta...",mapError:"Kunde inte lÃ¤sa bildkartan.",mapNone:"Ingen bildkarta Ã¤n.",loadError:"Kunde inte hÃ¤mta produktdata."},en:{selected:"Selected product",pdf:"PDF",table:{nr:"No",sku:"Item no",name:"Description",unit:"Unit",list:"List price",net:"Net price",qty:"Qty"},empty:"No articles for selected category.",loadMap:"Loading image map...",mapError:"Could not load the image map.",mapNone:"No image map yet.",loadError:"Could not load product data."},pl:{selected:"Wybrany produkt",pdf:"PDF",table:{nr:"Nr",sku:"Nr artykuÅu",name:"Nazwa",unit:"Jednostka",list:"Cena katalogowa",net:"Cena netto",qty:"IloÅÄ"},empty:"Brak pozycji dla wybranej kategorii.",loadMap:"Åadowanie mapy obrazka...",mapError:"Nie udaÅo siÄ wczytaÄ mapy obrazka.",mapNone:"Brak mapy obrazka.",loadError:"Nie udaÅo siÄ pobraÄ danych produktu."}};function ve(k){return k?/^https?:\/\//i.test(k)?k:k.startsWith("/")?`${f}${k}`:k:""}function ze(k,B){var P;return k&&(((P=k.lang_name)==null?void 0:P[B])||k.name)||""}function me(k){return(k==null?void 0:k.key)||(k==null?void 0:k.slug)||""}function _e(k,B){return k.filter(g=>g.parent===B).sort((g,P)=>{const A=Number(g.pos_num||g.menu_order||g.position||0),N=Number(P.pos_num||P.menu_order||P.position||0);return A!==N?A-N:(g.id||0)-(P.id||0)})}function we(k,B){return k.length?k.find(g=>me(g)===B)||k.find(g=>!g.parent)||k[0]:null}function se(k,B,g){if(!k.length||!B)return null;const P=me(B);if(g&&g!==P){const N=k.find(G=>me(G)===g);if(N)return N}return _e(k,B.id||0)[0]||B}function K(k){if(!k)return"imagemap";const B=k.match(/<map[^>]*name=[\"']?([^\"'>\s]+)/i);return B?B[1]:"imagemap"}function Ne(k,B){if(!k||!Array.isArray(B)||!B.length)return k;const g=B.filter(P=>k===P||k.startsWith(`${P}-`));return g.length?g.sort((P,A)=>A.length-P.length)[0]:k}function ye(k){return k?k.replace(/<img[^>]*>/gi,""):""}let Ae=!0,ke=S(null),Se=S([]);function qe(k,B){return Ae&&k.pos_num&&k.pos_num!="0"?String(k.pos_num).trim():String(B+1)}function He(k){console.log("Map clicked",k.target,k.target.tagName);const B=k.target.closest("area");if(B){k.preventDefault();const g=B.getAttribute("alt"),P=B.getAttribute("title"),A=B.getAttribute("href");console.log("Area attributes:",{alt:g,title:P,href:A});let N=g||P;if(!N&&A)if(A.includes("highlight=")){const G=A.match(/highlight=([^&]+)/);G&&(N=G[1])}else A.includes("#")&&(N=A.split("#")[1]);if(N){c(ke,N.trim()),console.log("Highlighting:",e(ke));const G=new URL(window.location);G.searchParams.set("highlight",e(ke)),window.history.pushState({},"",G)}else console.warn("No identifier found on area tag")}else console.log("Click was not on an area tag (or closest failed)")}async function H(k){var P;const g=new URLSearchParams(window.location.search).get("highlight");if(g?c(ke,g):c(ke,null),c(Se,[]),!k){c(T,""),c(z,""),c(E,[]),c(re,"idle");return}c(re,"loading");try{const A=await Tu(k),N=((P=A==null?void 0:A.map)==null?void 0:P.html)||"";if(c(T,ye(N)),c(z,(A==null?void 0:A.image_url)||""),ie.length>0){const Me=ie.filter(le=>{var $;return($=le.categories)==null?void 0:$.some(D=>(D.key||D.slug)===k)}).map(le=>{const $=le.categories.find(D=>(D.key||D.slug)===k);return{...le,pos_num:($==null?void 0:$.pos_num)||le.pos_num||"0",no_units:($==null?void 0:$.no_units)||le.no_units||""}}),Ee=Me.filter(le=>Number(le.pos_num)>0);Ee.sort((le,$)=>{const D=Number(le.pos_num)-Number($.pos_num);return D!==0?D:le.sku.localeCompare($.sku)});const Ce=Me.filter(le=>(le.pos_num==="0"||le.pos_num===0)&&le.sku!==">"&&le.sku!=="<");Ce.sort((le,$)=>le.sku.localeCompare($.sku));const Je=Me.find(le=>(le.pos_num==="0"||le.pos_num===0)&&le.sku===">"),Be=Me.find(le=>(le.pos_num==="0"||le.pos_num===0)&&le.sku==="<");c(E,[...Ee]),Ce.length>0&&(Je&&e(E).push(Je),e(E).push(...Ce),Be&&e(E).push(Be))}else c(E,Array.isArray(A==null?void 0:A.products)?A.products:[]);const G=e(E).map(Q=>String(Q.pos_num||"").trim()).filter(Q=>Q&&Q!=="0"),F=new Set(G);Ae=!(e(E).length>1&&G.length>0&&F.size===1),c(W,{}),e(E).forEach(Q=>{const Me=Number(Q.no_units);!Number.isNaN(Me)&&Me>0&&Fe(W,e(W)[Q.sku]=Me)}),c(Pe,K(e(T))),c(re,"ready")}catch{c(T,""),c(z,""),c(E,[]),c(W,{}),c(re,"error")}}async function J(k){!k||k===ce||(ce=k,await H(k))}va(async()=>{if(!l()){c(m,"error");return}try{const k=await Su().catch(()=>[]),B=Array.isArray(k)?k.map(A=>A.key).filter(Boolean):[];c(Z,Ne(l(),B)),ie=await Cu(e(Z)).catch(A=>(console.error("Failed to load products JSON:",A),[]));const g=await kl(e(Z)),P=Array.isArray(g)?g:[];c(fe,P),c(y,we(P,e(Z))),c(x,se(P,e(y),l())),await J(me(e(x))),c(m,"ready"),c(m,"ready")}catch(k){console.error("CategoryPage load error:",k),c(b,k.message||String(k)),c(m,"error")}});function Le(k){if(!k)return;c(x,k);const B=me(k);B&&(typeof p()=="function"&&p()(`/category/${B}`),J(B))}function be(k,B){if(!k)return"";let g=Number(String(k).replace(",","."));return Number.isNaN(g)?k:(g=g/(B||1),g.toFixed(2).replace(".",","))}ft(()=>ut(o()),()=>{c(a,V[o()]||V.se)}),ft(()=>(e(y),ut(o()),e(I)),()=>{var A,N,G;const k=((A=e(y))==null?void 0:A.key)||"",B=((N=e(y))==null?void 0:N.lang_name)||{},g=((G=e(y))==null?void 0:G.name)||"",P=`${k}-${o()}-${B[o()]||g}`;P!==e(I)&&(c(I,P),_("productChange",{key:k,names:B,fallback:g}))}),ft(()=>(e(ke),e(E),e(Se)),()=>{if(e(ke)&&e(E).length&&e(Se).length){console.log("Checking match for:",e(ke)),e(E).forEach((B,g)=>{const P=qe(B,g);P==e(ke)&&console.log("Match found at index:",g,"Label:",P)});const k=e(E).findIndex((B,g)=>qe(B,g)===e(ke));k!==-1&&e(Se)[k]?(console.log("Scrolling to index:",k),e(Se)[k].scrollIntoView({behavior:"smooth",block:"center"})):console.warn("No match found or ref missing for:",e(ke))}}),ft(()=>(e(m),ut(l()),e(fe),e(y),e(x)),()=>{if(e(m)==="ready"&&l()&&e(fe).length){const k=se(e(fe),e(y),l());k&&me(k)!==me(e(x))&&(c(x,k),J(me(k)))}}),wa(),Ot();var Ke=Ef(),ee=s(Ke),O=s(ee);{var he=k=>{var B=uf();h(k,B)},M=k=>{var B=ot(),g=Oe(B);{var P=N=>{var G=ff(),F=s(G),Y=i(F,2),Q=s(Y,!0);n(Y),n(G),R(()=>{w(F,`${e(a),u(()=>e(a).loadError)??""} `),w(Q,e(b))}),h(N,G)},A=N=>{var G=Cf(),F=s(G),Y=s(F),Q=s(Y,!0);n(Y);var Me=i(Y,2),Ee=s(Me);{var Ce=pt=>{var tt=pf();R((At,Mt)=>{ct(tt,"src",At),ct(tt,"alt",Mt)},[()=>(e(y),u(()=>ve(e(y).product_catalog_image_url))),()=>(e(y),u(()=>ze(e(y))))]),h(pt,tt)},Je=pt=>{var tt=ot(),At=Oe(tt);{var Mt=Lt=>{var ht=_f();R((qt,Jt)=>{ct(ht,"src",qt),ct(ht,"alt",Jt)},[()=>(e(y),u(()=>ve(e(y).image.src))),()=>(e(y),u(()=>ze(e(y))))]),h(Lt,ht)},mt=Lt=>{var ht=hf();h(Lt,ht)};ne(At,Lt=>{e(y),u(()=>{var ht,qt;return(qt=(ht=e(y))==null?void 0:ht.image)==null?void 0:qt.src})?Lt(Mt):Lt(mt,!1)},!0)}h(pt,tt)};ne(Ee,pt=>{e(y),u(()=>{var tt;return(tt=e(y))==null?void 0:tt.product_catalog_image_url})?pt(Ce):pt(Je,!1)})}n(Me);var Be=i(Me,2),le=s(Be,!0);n(Be);var $=i(Be,2);Bo($,o,pt=>{var tt=gf(),At=s(tt);{let Mt=ss(()=>(e(x),u(()=>{var mt,Lt;return((mt=e(x))==null?void 0:mt.key)||((Lt=e(x))==null?void 0:Lt.slug)})));vf(At,{get categories(){return e(fe)},get mainKey(){return e(Z)},get language(){return o()},get selectedKey(){return e(Mt)},$$events:{select:mt=>Le(mt.detail)}})}n(tt),R(()=>ct(tt,"aria-label",(e(a),u(()=>e(a).selected)))),h(pt,tt)}),n(F);var D=i(F,2),U=s(D),q=s(U),X=s(q,!0);n(q);var Te=i(q,2),de=s(Te),xe=s(de,!0);n(de),n(Te),n(U);var ge=i(U,2),Ze=s(ge);{var it=pt=>{var tt=wf(),At=s(tt);{var Mt=Lt=>{var ht=mf(),qt=s(ht,!0);n(ht),R(()=>w(qt,(e(a),u(()=>e(a).loadMap)))),h(Lt,ht)},mt=Lt=>{var ht=ot(),qt=Oe(ht);{var Jt=Xt=>{var Wt=yf(),ia=s(Wt,!0);n(Wt),R(()=>w(ia,(e(a),u(()=>e(a).mapError)))),h(Xt,Wt)},ua=Xt=>{var Wt=ot(),ia=Oe(Wt);{var qa=fa=>{var Gt=kf(),dt=s(Gt);{var Et=Bt=>{var Kt=bf();R((jt,la)=>{ct(Kt,"src",jt),ct(Kt,"alt",la),ct(Kt,"usemap",`#${e(Pe)}`)},[()=>(e(z),u(()=>ve(e(z)))),()=>(e(x),ut(o()),u(()=>ze(e(x),o())))]),h(Bt,Kt)};ne(dt,Bt=>{e(z)&&Bt(Et)})}var zt=i(dt,2);Re(zt,()=>e(T)),n(Gt),L("click",Gt,He),L("keydown",Gt,Bt=>{Bt.key==="Enter"&&He(Bt)}),h(fa,Gt)};ne(ia,fa=>{e(T)&&fa(qa)},!0)}h(Xt,Wt)};ne(qt,Xt=>{e(re)==="error"?Xt(Jt):Xt(ua,!1)},!0)}h(Lt,ht)};ne(At,Lt=>{e(re)==="loading"?Lt(Mt):Lt(mt,!1)})}n(tt),h(pt,tt)};ne(Ze,pt=>{(e(re)==="loading"||e(re)==="error"||e(T))&&pt(it)})}var rt=i(Ze,2),j=s(rt),pe=s(j),$e=s(pe),Ye=s($e),et=s(Ye,!0);n(Ye);var Qe=i(Ye),We=s(Qe,!0);n(Qe);var Ue=i(Qe),Ie=s(Ue,!0);n(Ue);var ue=i(Ue),te=s(ue,!0);n(ue);var je=i(ue),Ge=s(je,!0);n(je);var lt=i(je),Xe=s(lt,!0);n(lt);var Ve=i(lt),_t=s(Ve,!0);n(Ve),n($e),n(pe);var nt=i(pe),Nt=s(nt);{var gt=pt=>{var tt=xf(),At=s(tt),Mt=s(At,!0);n(At),n(tt),R(()=>w(Mt,(e(a),u(()=>e(a).empty)))),h(pt,tt)},Ut=pt=>{var tt=ot(),At=Oe(tt);at(At,1,()=>e(E),st,(Mt,mt,Lt)=>{var ht=Sf();let qt;var Jt=s(ht),ua=s(Jt,!0);n(Jt);var Xt=i(Jt),Wt=s(Xt,!0);n(Xt);var ia=i(Xt),qa=s(ia,!0);n(ia);var fa=i(ia),Gt=s(fa,!0);n(fa);var dt=i(fa),Et=s(dt);n(dt);var zt=i(dt),Bt=s(zt);n(zt);var Kt=i(zt),jt=s(Kt),la=s(jt);ae(la);var Xa=i(la,2);n(jt),n(Kt),n(ht),Gn(ht,(oa,ta)=>Fe(Se,e(Se)[ta]=oa),oa=>{var ta;return(ta=e(Se))==null?void 0:ta[oa]},()=>[Lt]),R((oa,ta,ea,ja,wr)=>{qt=St(ht,1,"svelte-1ugeskh",null,qt,oa),w(ua,ta),w(Wt,(e(mt),u(()=>e(mt).sku))),w(qa,ea),w(Gt,(e(mt),u(()=>e(mt).no_units||""))),w(Et,`${ja??""}
                          ${d()??""}`),w(Bt,`${wr??""}
                          ${d()??""}`),vt(la,(e(W),e(mt),u(()=>e(W)[e(mt).sku]||"")))},[()=>({highlight:qe(e(mt),Lt)===e(ke)}),()=>(e(mt),u(()=>qe(e(mt),Lt))),()=>(e(mt),ut(o()),u(()=>ze(e(mt),o()))),()=>(e(mt),ut(v()),u(()=>be(e(mt).price,v()))),()=>(e(mt),ut(v()),u(()=>be(e(mt).price,v())))]),L("input",la,oa=>{Fe(W,e(W)[e(mt).sku]=Number(oa.target.value))}),L("click",Xa,oa=>{const ta=e(W)[e(mt).sku]||0;ta>0&&(nf(e(mt),ta),Fe(W,e(W)[e(mt).sku]=0),oa.target.closest(".qty-cell").querySelector("input").value="")}),h(Mt,ht)}),h(pt,tt)};ne(Nt,pt=>{e(E),u(()=>e(E).length===0)?pt(gt):pt(Ut,!1)})}n(nt),n(j),n(rt),n(ge),n(D),n(G),R((pt,tt)=>{w(Q,(e(a),u(()=>e(a).selected))),w(le,pt),w(X,tt),ct(Te,"aria-label",(e(a),u(()=>e(a).pdf))),w(xe,(e(a),u(()=>e(a).pdf))),w(et,(e(a),u(()=>e(a).table.nr))),w(We,(e(a),u(()=>e(a).table.sku))),w(Ie,(e(a),u(()=>e(a).table.name))),w(te,(e(a),u(()=>e(a).table.unit))),w(Ge,(e(a),u(()=>e(a).table.list))),w(Xe,(e(a),u(()=>e(a).table.net))),w(_t,(e(a),u(()=>e(a).table.qty)))},[()=>(e(y),u(()=>ze(e(y)))),()=>(e(x),ut(o()),u(()=>ze(e(x),o())))]),h(N,G)};ne(g,N=>{e(m)==="error"?N(P):N(A,!1)},!0)}h(k,B)};ne(O,k=>{e(m)==="loading"?k(he):k(M,!1)})}n(ee),n(Ke),h(t,Ke),Dt()}var Nf=C('<section class="info-page svelte-6rw159"><div class="container container--narrow svelte-6rw159"><article class="info-card svelte-6rw159"><header class="info-header svelte-6rw159"><h1 class="svelte-6rw159"> </h1></header> <div class="info-content svelte-6rw159"><p class="svelte-6rw159"> </p> <p class="svelte-6rw159"> <a href="mailto:info@swepac.com" class="svelte-6rw159">info@swepac.com</a></p> <div class="divider svelte-6rw159"></div> <h3 class="svelte-6rw159"> </h3> <p class="placeholder-text svelte-6rw159"> </p></div> <footer class="info-footer svelte-6rw159"><p> </p></footer></article></div></section>');function Tf(t,r){Rt(r,!1);const a=S();let l=$t(r,"language",8,"se");const o={se:{title:"Information",phone:"Kontakta oss pÃ¥ tel: 0372-156 05.",email:"Eller e-post:",instructions:"AnvÃ¤ndarinstruktioner",manuals:"HÃ¤r hittar du manualer och guider fÃ¶r reservdelsportalen.",version:"Â© Swepac Spareparts Portal v.1.0.0"},en:{title:"Information",phone:"Contact us by phone: +46 372-156 05.",email:"Or email:",instructions:"User Instructions",manuals:"Here you will find manuals and guides for the spare parts portal.",version:"Â© Swepac Spareparts Portal v.1.0.0"},pl:{title:"Informacja",phone:"Skontaktuj siÄ z nami telefonicznie: +46 372-156 05.",email:"Lub e-mail:",instructions:"Instrukcja obsÅugi",manuals:"Tutaj znajdziesz instrukcje i przewodniki po portalu czÄÅci zamiennych.",version:"Â© Swepac Spareparts Portal v.1.0.0"}};ft(()=>ut(l()),()=>{c(a,o[l()]||o.se)}),wa();var d=Nf(),v=s(d),p=s(v),f=s(p),_=s(f),m=s(_,!0);n(_),n(f);var b=i(f,2),y=s(b),x=s(y,!0);n(y);var T=i(y,2),re=s(T);Vt(),n(T);var z=i(T,4),E=s(z,!0);n(z);var Pe=i(z,2),fe=s(Pe,!0);n(Pe),n(b);var I=i(b,2),ce=s(I),W=s(ce,!0);n(ce),n(I),n(p),n(v),n(d),R(()=>{w(m,(e(a),u(()=>e(a).title))),w(x,(e(a),u(()=>e(a).phone))),w(re,`${e(a),u(()=>e(a).email)??""} `),w(E,(e(a),u(()=>e(a).instructions))),w(fe,(e(a),u(()=>e(a).manuals))),w(W,(e(a),u(()=>e(a).version)))}),h(t,d),Dt()}var Lf=C('<div class="alert alert-error svelte-3ro05y"><!></div>'),zf=C('<div class="alert alert-success svelte-3ro05y"><!></div>'),$f=C('<div class="panel svelte-3ro05y"><h2><!></h2> <div class="grid svelte-3ro05y"><label class="svelte-3ro05y"><!><input type="text" class="svelte-3ro05y"/></label> <label class="svelte-3ro05y"><!><input type="text" class="svelte-3ro05y"/></label> <label class="svelte-3ro05y"><!><input type="text" class="svelte-3ro05y"/></label> <label class="svelte-3ro05y"><!><input type="text" class="svelte-3ro05y"/></label> <label class="span-2 svelte-3ro05y"><!><input type="text" class="svelte-3ro05y"/></label></div> <div class="actions svelte-3ro05y"><button class="primary svelte-3ro05y"><!></button></div></div>'),Af=C('<div class="panel svelte-3ro05y"><h2><!></h2> <div class="grid svelte-3ro05y"><label class="svelte-3ro05y"><!><input type="text" class="svelte-3ro05y"/></label> <label class="svelte-3ro05y"><!><input type="text" class="svelte-3ro05y"/></label> <label class="svelte-3ro05y"><!><input type="text" class="svelte-3ro05y"/></label> <label class="svelte-3ro05y"><!><input type="text" class="svelte-3ro05y"/></label> <label class="svelte-3ro05y"><!><input type="text" class="svelte-3ro05y"/></label> <label class="svelte-3ro05y"><!><input type="text" class="svelte-3ro05y"/></label> <label class="span-2 svelte-3ro05y"><!><input type="text" class="svelte-3ro05y"/></label></div> <div class="actions svelte-3ro05y"><button class="ghost svelte-3ro05y"><!></button> <button class="primary svelte-3ro05y"><!></button></div></div>'),Mf=C('<div class="panel svelte-3ro05y"><h2><!></h2> <label class="checkbox svelte-3ro05y"><input type="checkbox" class="svelte-3ro05y"/> Anv&#228;nd samma som leveransadress</label> <div class="grid svelte-3ro05y"><label class="svelte-3ro05y"><!><input type="text" class="svelte-3ro05y"/></label> <label class="svelte-3ro05y"><!><input type="text" class="svelte-3ro05y"/></label> <label class="svelte-3ro05y"><!><input type="text" class="svelte-3ro05y"/></label> <label class="svelte-3ro05y"><!><input type="text" class="svelte-3ro05y"/></label> <label class="svelte-3ro05y"><!><input type="text" class="svelte-3ro05y"/></label> <label class="svelte-3ro05y"><!><input type="text" class="svelte-3ro05y"/></label> <label class="svelte-3ro05y"><!><input type="text" class="svelte-3ro05y"/></label> <label class="span-2 svelte-3ro05y"><!><input type="text" class="svelte-3ro05y"/></label></div> <div class="actions svelte-3ro05y"><button class="ghost svelte-3ro05y"><!></button> <button class="primary svelte-3ro05y"><!></button></div></div>'),If=C('<div class="panel svelte-3ro05y"><h2><!></h2> <p><!></p> <div class="actions svelte-3ro05y"><button class="ghost svelte-3ro05y"><!></button> <button class="primary svelte-3ro05y"> </button></div></div>'),Rf=C('<section class="register-page svelte-3ro05y"><div class="container svelte-3ro05y"><div class="register-shell svelte-3ro05y"><div class="register-intro svelte-3ro05y"><h1 class="svelte-3ro05y"><!></h1> <p class="intro svelte-3ro05y"><!></p></div> <div class="steps svelte-3ro05y"><div> </div> <div> </div> <div> </div> <div> </div></div> <!> <!> <!></div></div></section>');function Df(t,r){Rt(r,!1);const a=S();let l=$t(r,"language",8,"se"),o=S(1),d=S(!1),v=S(""),p=S("");const f={se:{title:"Skapa nytt konto",intro:"N&#228;r du skapar ett nytt konto, kommer du f&#246;rst att f&#229; ett e-postmeddelande f&#246;r att bekr&#228;fta din e-postadress. N&#228;r du gjort detta kommer vi att f&#229; ett meddelande om din ans&#246;kan. Vi kommer att behandla din ans&#246;kan s&#229; fort vi kan, och n&#228;r du &#228;r godk&#228;nd kommer du att f&#229; alla inloggningsuppgifter du beh&#246;ver.",step1:"Kunduppgifter",step2:"Leveransadress",step3:"Fakturaadress",step4:"Skicka",firstName:"F&#246;rnamn",lastName:"Efternamn",phone:"Telefon/Mobil",company:"F&#246;retag",email:"E-postadress",street:"Gatuadress",street2:"Gatuadress 2",zip:"Postnummer",city:"Postadress",country:"Land",billingName:"F&#246;retagsnamn",billingEmail:"Faktura e-post",billingOrg:"Org.nr",next:"N&#228;sta steg",back:"Tillbaka",submit:"Skicka ans&#246;kan",done:"Tack! Din ans&#246;kan &#228;r skickad."}};let _=S({first_name:"",last_name:"",phone:"",company:"",email:""}),m=S({attn_first_name:"",attn_last_name:"",street:"",street_2:"",zip_code:"",postal_area:"",country:""}),b=S({name:"",street:"",street_2:"",zip_code:"",postal_area:"",country:"",email:"",org_number:""}),y=S(!1);function x(){if(c(v,""),e(o)===1&&(!e(_).first_name||!e(_).last_name||!e(_).phone||!e(_).company||!e(_).email)){c(v,"Fyll i alla obligatoriska f&#228;lt.");return}if(e(o)===2&&(!e(m).street||!e(m).zip_code||!e(m).postal_area||!e(m).country)){c(v,"Fyll i alla obligatoriska f&#228;lt.");return}if(e(o)===3&&(!e(b).street||!e(b).zip_code||!e(b).postal_area)){c(v,"Fyll i alla obligatoriska f&#228;lt.");return}c(o,Math.min(4,e(o)+1))}function T(){c(v,""),c(o,Math.max(1,e(o)-1))}function re(){c(b,{...e(b),street:e(m).street,street_2:e(m).street_2,zip_code:e(m).zip_code,postal_area:e(m).postal_area,country:e(m).country})}async function z(){c(v,""),c(p,""),c(d,!0),!e(b).street&&!e(b).street_2&&!e(b).zip_code&&!e(b).postal_area&&!e(b).country&&re();try{await hc({customer:e(_),shipping:e(m),billing:e(b)}),c(p,e(a).done),c(o,4)}catch(J){c(v,(J==null?void 0:J.message)||"N&#229;got gick fel.")}finally{c(d,!1)}}ft(()=>ut(l()),()=>{c(a,f[l()]||f.se)}),ft(()=>e(y),()=>{e(y)&&re()}),wa(),Ot();var E=Rf(),Pe=s(E),fe=s(Pe),I=s(fe),ce=s(I),W=s(ce);Re(W,()=>(e(a),u(()=>e(a).title))),n(ce);var ie=i(ce,2),Z=s(ie);Re(Z,()=>(e(a),u(()=>e(a).intro))),n(ie),n(I);var V=i(I,2),ve=s(V),ze=s(ve);n(ve);var me=i(ve,2),_e=s(me);n(me);var we=i(me,2),se=s(we);n(we);var K=i(we,2),Ne=s(K);n(K),n(V);var ye=i(V,2);{var Ae=J=>{var Le=Lf(),be=s(Le);Re(be,()=>e(v)),n(Le),h(J,Le)};ne(ye,J=>{e(v)&&J(Ae)})}var ke=i(ye,2);{var Se=J=>{var Le=zf(),be=s(Le);Re(be,()=>e(p)),n(Le),h(J,Le)};ne(ke,J=>{e(p)&&J(Se)})}var qe=i(ke,2);{var He=J=>{var Le=$f(),be=s(Le),Ke=s(be);Re(Ke,()=>(e(a),u(()=>e(a).step1))),n(be);var ee=i(be,2),O=s(ee),he=s(O);Re(he,()=>(e(a),u(()=>e(a).firstName)));var M=i(he);ae(M),n(O);var k=i(O,2),B=s(k);Re(B,()=>(e(a),u(()=>e(a).phone)));var g=i(B);ae(g),n(k);var P=i(k,2),A=s(P);Re(A,()=>(e(a),u(()=>e(a).lastName)));var N=i(A);ae(N),n(P);var G=i(P,2),F=s(G);Re(F,()=>(e(a),u(()=>e(a).company)));var Y=i(F);ae(Y),n(G);var Q=i(G,2),Me=s(Q);Re(Me,()=>(e(a),u(()=>e(a).email)));var Ee=i(Me);ae(Ee),n(Q),n(ee);var Ce=i(ee,2),Je=s(Ce),Be=s(Je);Re(Be,()=>(e(a),u(()=>e(a).next))),n(Je),n(Ce),n(Le),De(M,()=>e(_).first_name,le=>Fe(_,e(_).first_name=le)),De(g,()=>e(_).phone,le=>Fe(_,e(_).phone=le)),De(N,()=>e(_).last_name,le=>Fe(_,e(_).last_name=le)),De(Y,()=>e(_).company,le=>Fe(_,e(_).company=le)),De(Ee,()=>e(_).email,le=>Fe(_,e(_).email=le)),L("click",Je,x),h(J,Le)},H=J=>{var Le=ot(),be=Oe(Le);{var Ke=O=>{var he=Af(),M=s(he),k=s(M);Re(k,()=>(e(a),u(()=>e(a).step2))),n(M);var B=i(M,2),g=s(B),P=s(g);Re(P,()=>(e(a),u(()=>e(a).firstName)));var A=i(P);ae(A),n(g);var N=i(g,2),G=s(N);Re(G,()=>(e(a),u(()=>e(a).lastName)));var F=i(G);ae(F),n(N);var Y=i(N,2),Q=s(Y);Re(Q,()=>(e(a),u(()=>e(a).street)));var Me=i(Q);ae(Me),n(Y);var Ee=i(Y,2),Ce=s(Ee);Re(Ce,()=>(e(a),u(()=>e(a).street2)));var Je=i(Ce);ae(Je),n(Ee);var Be=i(Ee,2),le=s(Be);Re(le,()=>(e(a),u(()=>e(a).zip)));var $=i(le);ae($),n(Be);var D=i(Be,2),U=s(D);Re(U,()=>(e(a),u(()=>e(a).city)));var q=i(U);ae(q),n(D);var X=i(D,2),Te=s(X);Re(Te,()=>(e(a),u(()=>e(a).country)));var de=i(Te);ae(de),n(X),n(B);var xe=i(B,2),ge=s(xe),Ze=s(ge);Re(Ze,()=>(e(a),u(()=>e(a).back))),n(ge);var it=i(ge,2),rt=s(it);Re(rt,()=>(e(a),u(()=>e(a).next))),n(it),n(xe),n(he),De(A,()=>e(m).attn_first_name,j=>Fe(m,e(m).attn_first_name=j)),De(F,()=>e(m).attn_last_name,j=>Fe(m,e(m).attn_last_name=j)),De(Me,()=>e(m).street,j=>Fe(m,e(m).street=j)),De(Je,()=>e(m).street_2,j=>Fe(m,e(m).street_2=j)),De($,()=>e(m).zip_code,j=>Fe(m,e(m).zip_code=j)),De(q,()=>e(m).postal_area,j=>Fe(m,e(m).postal_area=j)),De(de,()=>e(m).country,j=>Fe(m,e(m).country=j)),L("click",ge,T),L("click",it,x),h(O,he)},ee=O=>{var he=ot(),M=Oe(he);{var k=g=>{var P=Mf(),A=s(P),N=s(A);Re(N,()=>(e(a),u(()=>e(a).step3))),n(A);var G=i(A,2),F=s(G);ae(F),Vt(),n(G);var Y=i(G,2),Q=s(Y),Me=s(Q);Re(Me,()=>(e(a),u(()=>e(a).billingName)));var Ee=i(Me);ae(Ee),n(Q);var Ce=i(Q,2),Je=s(Ce);Re(Je,()=>(e(a),u(()=>e(a).billingEmail)));var Be=i(Je);ae(Be),n(Ce);var le=i(Ce,2),$=s(le);Re($,()=>(e(a),u(()=>e(a).billingOrg)));var D=i($);ae(D),n(le);var U=i(le,2),q=s(U);Re(q,()=>(e(a),u(()=>e(a).street)));var X=i(q);ae(X),n(U);var Te=i(U,2),de=s(Te);Re(de,()=>(e(a),u(()=>e(a).street2)));var xe=i(de);ae(xe),n(Te);var ge=i(Te,2),Ze=s(ge);Re(Ze,()=>(e(a),u(()=>e(a).zip)));var it=i(Ze);ae(it),n(ge);var rt=i(ge,2),j=s(rt);Re(j,()=>(e(a),u(()=>e(a).city)));var pe=i(j);ae(pe),n(rt);var $e=i(rt,2),Ye=s($e);Re(Ye,()=>(e(a),u(()=>e(a).country)));var et=i(Ye);ae(et),n($e),n(Y);var Qe=i(Y,2),We=s(Qe),Ue=s(We);Re(Ue,()=>(e(a),u(()=>e(a).back))),n(We);var Ie=i(We,2),ue=s(Ie);Re(ue,()=>(e(a),u(()=>e(a).next))),n(Ie),n(Qe),n(P),dn(F,()=>e(y),te=>c(y,te)),De(Ee,()=>e(b).name,te=>Fe(b,e(b).name=te)),De(Be,()=>e(b).email,te=>Fe(b,e(b).email=te)),De(D,()=>e(b).org_number,te=>Fe(b,e(b).org_number=te)),De(X,()=>e(b).street,te=>Fe(b,e(b).street=te)),De(xe,()=>e(b).street_2,te=>Fe(b,e(b).street_2=te)),De(it,()=>e(b).zip_code,te=>Fe(b,e(b).zip_code=te)),De(pe,()=>e(b).postal_area,te=>Fe(b,e(b).postal_area=te)),De(et,()=>e(b).country,te=>Fe(b,e(b).country=te)),L("click",We,T),L("click",Ie,x),h(g,P)},B=g=>{var P=If(),A=s(P),N=s(A);Re(N,()=>(e(a),u(()=>e(a).step4))),n(A);var G=i(A,2),F=s(G);Re(F,()=>(e(a),u(()=>e(a).intro))),n(G);var Y=i(G,2),Q=s(Y),Me=s(Q);Re(Me,()=>(e(a),u(()=>e(a).back))),n(Q);var Ee=i(Q,2),Ce=s(Ee,!0);n(Ee),n(Y),n(P),R(()=>{Ee.disabled=e(d),w(Ce,(e(d),e(a),u(()=>e(d)?"...":e(a).submit)))}),L("click",Q,T),L("click",Ee,z),h(g,P)};ne(M,g=>{e(o)===3?g(k):g(B,!1)},!0)}h(O,he)};ne(be,O=>{e(o)===2?O(Ke):O(ee,!1)},!0)}h(J,Le)};ne(qe,J=>{e(o)===1?J(He):J(H,!1)})}n(fe),n(Pe),n(E),R(()=>{St(ve,1,`step ${e(o)>=1?"active":""}`,"svelte-3ro05y"),w(ze,`1 ${e(a),u(()=>e(a).step1)??""}`),St(me,1,`step ${e(o)>=2?"active":""}`,"svelte-3ro05y"),w(_e,`2 ${e(a),u(()=>e(a).step2)??""}`),St(we,1,`step ${e(o)>=3?"active":""}`,"svelte-3ro05y"),w(se,`3 ${e(a),u(()=>e(a).step3)??""}`),St(K,1,`step ${e(o)>=4?"active":""}`,"svelte-3ro05y"),w(Ne,`4 ${e(a),u(()=>e(a).step4)??""}`)}),h(t,E),Dt()}var jf=C('<p class="empty svelte-enzhfd"><!></p>'),Of=C('<tr><td class="svelte-enzhfd"> </td><td class="svelte-enzhfd"> </td><td class="svelte-enzhfd"><input type="number" class="qty svelte-enzhfd" min="1"/></td><td class="svelte-enzhfd"> </td><td class="svelte-enzhfd"> </td><td class="bold svelte-enzhfd"> </td><td class="svelte-enzhfd"><button class="icon-btn svelte-enzhfd" aria-label="Remove from cart" title="Remove from cart"><i class="trash alternate outline icon" aria-hidden="true"></i></button></td></tr>'),Uf=C('<table class="svelte-enzhfd"><thead><tr><th class="svelte-enzhfd"><!></th><th class="svelte-enzhfd"><!></th><th class="svelte-enzhfd"><!></th><th class="svelte-enzhfd"><!></th><th class="svelte-enzhfd"><!></th><th class="svelte-enzhfd"><!></th><th class="svelte-enzhfd"></th></tr></thead><tbody></tbody></table> <div class="totals svelte-enzhfd"><div class="notes svelte-enzhfd"><div><!></div> <div><!></div></div> <div class="sum svelte-enzhfd"><span><!>:</span> <strong> </strong></div></div> <div class="actions svelte-enzhfd"><button class="ghost svelte-enzhfd"><i class="trash icon"></i> <!></button> <button class="primary svelte-enzhfd"><!> <i class="arrow right icon"></i></button></div>',1),Ff=C('<h2 class="svelte-enzhfd"><!></h2> <!>',1),Kf=C("<p>Loading...</p>"),qf=C('<p class="empty svelte-enzhfd">You need to log in to continue.</p>'),Bf=C('<div class="summary-grid svelte-enzhfd"><div><h3>Kontakt</h3> <p> </p> <p> </p> <p> </p></div> <div><h3>Leveransadress</h3> <p> </p> <p> </p> <p> </p></div></div> <div class="actions svelte-enzhfd"><button class="ghost svelte-enzhfd">Tillbaka</button> <button class="primary svelte-enzhfd"><!> <i class="arrow right icon"></i></button></div>',1),Vf=C('<h2 class="svelte-enzhfd"><!></h2> <!>',1),Wf=C('<h2 class="svelte-enzhfd"><!></h2> <p>Granska din best&#228;llning och skicka.</p> <div class="actions svelte-enzhfd"><button class="ghost svelte-enzhfd">Tillbaka</button> <button class="primary svelte-enzhfd">Skicka best&#228;llning</button></div>',1),Hf=C('<section class="checkout-page svelte-enzhfd"><div class="container svelte-enzhfd"><div class="checkout-shell svelte-enzhfd"><div class="steps svelte-enzhfd"><div><div class="step-title svelte-enzhfd"><i class="shopping cart icon"></i> <!></div> <div class="step-sub svelte-enzhfd"><!></div></div> <div><div class="step-title svelte-enzhfd"><i class="truck icon"></i> <!></div> <div class="step-sub svelte-enzhfd"><!></div></div> <div><div class="step-title svelte-enzhfd"><i class="clipboard check icon"></i> <!></div> <div class="step-sub svelte-enzhfd"><!></div></div></div> <div class="panel svelte-enzhfd"><!></div></div></div></section>');function Jf(t,r){Rt(r,!1);const a=()=>Nn(kr,"$cart",o),l=()=>Nn(wl,"$cartTotal",o),[o,d]=Ws(),v=S();let p=$t(r,"language",8,"se"),f=$t(r,"currency",8,"SEK"),_=$t(r,"currencyRate",8,1);const m={se:{step1:"Kundvagn",step1Sub:"Dina valda produkter",step2:"Kunduppgifter",step2Sub:"Orderuppgifter och leveransadress",step3:"Bekr&#228;fta best&#228;llning",step3Sub:"Granska och skicka din best&#228;llning",title:"Kundvagn",colSku:"Artikel.nr",colProduct:"Produkt",colQty:"Antal",colList:"Listpris",colNet:"Nettopris",colTotal:"Totalt",total:"Totalt",empty:"Kundvagnen &#228;r tom.",clear:"T&#246;m kundvagn",next:"N&#228;sta steg",note1:"Fraktkostnad tillkommer",note2:"Reservation f&#246;r pris&#228;ndringar"}};let b=S(1),y=S(null),x=S(!1);function T(J,Le){return J?(Number(J)/(Le||1)).toFixed(2).replace(".",",")+" "+f():`0,00 ${f()}`}async function re(){c(x,!0);try{c(y,await Hs())}catch(J){c(y,null),J!=null&&J.message}finally{c(x,!1)}}function z(){e(b)===1&&a().length===0||e(b)===2&&!e(y)||(c(b,Math.min(3,e(b)+1)),e(b)===2&&!e(y)&&re())}function E(){c(b,Math.max(1,e(b)-1))}ft(()=>ut(p()),()=>{c(v,m[p()]||m.se)}),wa(),Ot();var Pe=Hf(),fe=s(Pe),I=s(fe),ce=s(I),W=s(ce),ie=s(W),Z=i(s(ie),2);Re(Z,()=>(e(v),u(()=>e(v).step1))),n(ie);var V=i(ie,2),ve=s(V);Re(ve,()=>(e(v),u(()=>e(v).step1Sub))),n(V),n(W);var ze=i(W,2),me=s(ze),_e=i(s(me),2);Re(_e,()=>(e(v),u(()=>e(v).step2))),n(me);var we=i(me,2),se=s(we);Re(se,()=>(e(v),u(()=>e(v).step2Sub))),n(we),n(ze);var K=i(ze,2),Ne=s(K),ye=i(s(Ne),2);Re(ye,()=>(e(v),u(()=>e(v).step3))),n(Ne);var Ae=i(Ne,2),ke=s(Ae);Re(ke,()=>(e(v),u(()=>e(v).step3Sub))),n(Ae),n(K),n(ce);var Se=i(ce,2),qe=s(Se);{var He=J=>{var Le=Ff(),be=Oe(Le),Ke=s(be);Re(Ke,()=>(e(v),u(()=>e(v).title))),n(be);var ee=i(be,2);{var O=M=>{var k=jf(),B=s(k);Re(B,()=>(e(v),u(()=>e(v).empty))),n(k),h(M,k)},he=M=>{var k=Uf(),B=Oe(k),g=s(B),P=s(g),A=s(P),N=s(A);Re(N,()=>(e(v),u(()=>e(v).colSku))),n(A);var G=i(A),F=s(G);Re(F,()=>(e(v),u(()=>e(v).colProduct))),n(G);var Y=i(G),Q=s(Y);Re(Q,()=>(e(v),u(()=>e(v).colQty))),n(Y);var Me=i(Y),Ee=s(Me);Re(Ee,()=>(e(v),u(()=>e(v).colList))),n(Me);var Ce=i(Me),Je=s(Ce);Re(Je,()=>(e(v),u(()=>e(v).colNet))),n(Ce);var Be=i(Ce),le=s(Be);Re(le,()=>(e(v),u(()=>e(v).colTotal))),n(Be),Vt(),n(P),n(g);var $=i(g);at($,5,a,st,(Qe,We)=>{var Ue=Of(),Ie=s(Ue),ue=s(Ie,!0);n(Ie);var te=i(Ie),je=s(te,!0);n(te);var Ge=i(te),lt=s(Ge);ae(lt),n(Ge);var Xe=i(Ge),Ve=s(Xe,!0);n(Xe);var _t=i(Xe),nt=s(_t,!0);n(_t);var Nt=i(_t),gt=s(Nt,!0);n(Nt);var Ut=i(Nt),pt=s(Ut);n(Ut),n(Ue),R((tt,At,Mt)=>{w(ue,(e(We),u(()=>e(We).sku))),w(je,(e(We),u(()=>e(We).name))),vt(lt,(e(We),u(()=>e(We).qty))),w(Ve,tt),w(nt,At),w(gt,Mt)},[()=>(e(We),ut(_()),u(()=>T(e(We).price,_()))),()=>(e(We),ut(_()),u(()=>T(e(We).price,_()))),()=>(e(We),ut(_()),u(()=>T(e(We).price*e(We).qty,_())))]),L("change",lt,tt=>Sl(e(We).sku,Number(tt.target.value))),L("click",pt,()=>xl(e(We).sku)),h(Qe,Ue)}),n($),n(B);var D=i(B,2),U=s(D),q=s(U),X=s(q);Re(X,()=>(e(v),u(()=>e(v).note1))),n(q);var Te=i(q,2),de=s(Te);Re(de,()=>(e(v),u(()=>e(v).note2))),n(Te),n(U);var xe=i(U,2),ge=s(xe),Ze=s(ge);Re(Ze,()=>(e(v),u(()=>e(v).total))),Vt(),n(ge);var it=i(ge,2),rt=s(it,!0);n(it),n(xe),n(D);var j=i(D,2),pe=s(j),$e=i(s(pe),2);Re($e,()=>(e(v),u(()=>e(v).clear))),n(pe);var Ye=i(pe,2),et=s(Ye);Re(et,()=>(e(v),u(()=>e(v).next))),Vt(2),n(Ye),n(j),R(Qe=>w(rt,Qe),[()=>(l(),ut(_()),u(()=>T(l(),_())))]),L("click",pe,function(...Qe){Zr==null||Zr.apply(this,Qe)}),L("click",Ye,z),h(M,k)};ne(ee,M=>{a(),u(()=>a().length===0)?M(O):M(he,!1)})}h(J,Le)},H=J=>{var Le=ot(),be=Oe(Le);{var Ke=O=>{var he=Vf(),M=Oe(he),k=s(M);Re(k,()=>(e(v),u(()=>e(v).step2))),n(M);var B=i(M,2);{var g=A=>{var N=Kf();h(A,N)},P=A=>{var N=ot(),G=Oe(N);{var F=Q=>{var Me=qf();h(Q,Me)},Y=Q=>{var Me=Bf(),Ee=Oe(Me),Ce=s(Ee),Je=i(s(Ce),2),Be=s(Je);n(Je);var le=i(Je,2),$=s(le,!0);n(le);var D=i(le,2),U=s(D,!0);n(D),n(Ce);var q=i(Ce,2),X=i(s(q),2),Te=s(X,!0);n(X);var de=i(X,2),xe=s(de);n(de);var ge=i(de,2),Ze=s(ge,!0);n(ge),n(q),n(Ee);var it=i(Ee,2),rt=s(it),j=i(rt,2),pe=s(j);Re(pe,()=>(e(v),u(()=>e(v).next))),Vt(2),n(j),n(it),R(()=>{w(Be,`${e(y),u(()=>e(y).first_name)??""} ${e(y),u(()=>e(y).last_name)??""}`),w($,(e(y),u(()=>e(y).email))),w(U,(e(y),u(()=>e(y).phone))),w(Te,(e(y),u(()=>e(y).shipping.street))),w(xe,`${e(y),u(()=>e(y).shipping.postal_area)??""} ${e(y),u(()=>e(y).shipping.zip_code)??""}`),w(Ze,(e(y),u(()=>e(y).shipping.country)))}),L("click",rt,E),L("click",j,z),h(Q,Me)};ne(G,Q=>{e(y)?Q(Y,!1):Q(F)},!0)}h(A,N)};ne(B,A=>{e(x)?A(g):A(P,!1)})}h(O,he)},ee=O=>{var he=Wf(),M=Oe(he),k=s(M);Re(k,()=>(e(v),u(()=>e(v).step3))),n(M);var B=i(M,4),g=s(B);Vt(2),n(B),L("click",g,E),h(O,he)};ne(be,O=>{e(b)===2?O(Ke):O(ee,!1)},!0)}h(J,Le)};ne(qe,J=>{e(b)===1?J(He):J(H,!1)})}n(Se),n(I),n(fe),n(Pe),R(()=>{St(W,1,`step ${e(b)===1?"active":""}`,"svelte-enzhfd"),St(ze,1,`step ${e(b)===2?"active":""}`,"svelte-enzhfd"),St(K,1,`step ${e(b)===3?"active":""}`,"svelte-enzhfd")}),h(t,Pe),Dt(),d()}var Gf=C('<p class="muted svelte-wlzf7h">Loading...</p>'),Yf=C('<p class="muted svelte-wlzf7h"> </p>'),Zf=C('<p class="muted svelte-wlzf7h"><!></p>'),Qf=C('<a class="svelte-wlzf7h"> </a>'),Xf=C('<tr><td class="svelte-wlzf7h"><!></td><td class="svelte-wlzf7h"> </td><td class="svelte-wlzf7h"> </td></tr>'),ep=C('<div class="table-card svelte-wlzf7h"><table class="svelte-wlzf7h"><thead><tr><th class="svelte-wlzf7h"><!></th><th class="svelte-wlzf7h"><!></th><th class="svelte-wlzf7h"><!></th></tr></thead><tbody></tbody></table></div>'),tp=C('<section class="search-page svelte-wlzf7h"><div class="container svelte-wlzf7h"><h1 class="svelte-wlzf7h"><!> <strong> </strong></h1> <!></div></section>');function ap(t,r){Rt(r,!1);const a=S();let l=$t(r,"language",8,"se"),o=S(""),d=S([]),v=S(!1),p=S("");const f={se:{title:"S&#246;kresultat f&#246;r:",category:"Kategori",sku:"Artikel.nr",name:"Ben&#228;mning",empty:"Inga tr&#228;ffar."},en:{title:"Search results for:",category:"Category",sku:"SKU",name:"Name",empty:"No results."},pl:{title:"Wyniki wyszukiwania:",category:"Kategoria",sku:"SKU",name:"Nazwa",empty:"Brak wynik&#243;w."}};function _(){const I=new URLSearchParams(window.location.search||"");c(o,I.get("query")||"")}async function m(){if(!e(o)){c(d,[]);return}c(v,!0),c(p,"");try{c(d,await Nu(e(o),50,l()))}catch(I){c(p,(I==null?void 0:I.message)||"Search failed."),c(d,[])}finally{c(v,!1)}}va(()=>{_(),m();const I=()=>{_(),m()};return window.addEventListener("popstate",I),()=>window.removeEventListener("popstate",I)}),ft(()=>ut(l()),()=>{c(a,f[l()]||f.se)}),wa(),Ot();var b=tp(),y=s(b),x=s(y),T=s(x);Re(T,()=>(e(a),u(()=>e(a).title)));var re=i(T,2),z=s(re,!0);n(re),n(x);var E=i(x,2);{var Pe=I=>{var ce=Gf();h(I,ce)},fe=I=>{var ce=ot(),W=Oe(ce);{var ie=V=>{var ve=Yf(),ze=s(ve,!0);n(ve),R(()=>w(ze,e(p))),h(V,ve)},Z=V=>{var ve=ot(),ze=Oe(ve);{var me=we=>{var se=Zf(),K=s(se);Re(K,()=>(e(a),u(()=>e(a).empty))),n(se),h(we,se)},_e=we=>{var se=ep(),K=s(se),Ne=s(K),ye=s(Ne),Ae=s(ye),ke=s(Ae);Re(ke,()=>(e(a),u(()=>e(a).category))),n(Ae);var Se=i(Ae),qe=s(Se);Re(qe,()=>(e(a),u(()=>e(a).sku))),n(Se);var He=i(Se),H=s(He);Re(H,()=>(e(a),u(()=>e(a).name))),n(He),n(ye),n(Ne);var J=i(Ne);at(J,5,()=>e(d),st,(Le,be)=>{var Ke=Xf(),ee=s(Ke),O=s(ee);{var he=A=>{var N=Qf(),G=s(N,!0);n(N),R(()=>{ct(N,"href",(e(be),u(()=>`/category/${e(be).category_key}`))),w(G,(e(be),u(()=>e(be).category)))}),h(A,N)},M=A=>{var N=Uo();R(()=>w(N,(e(be),u(()=>e(be).category)))),h(A,N)};ne(O,A=>{e(be),u(()=>e(be).category_key)?A(he):A(M,!1)})}n(ee);var k=i(ee),B=s(k,!0);n(k);var g=i(k),P=s(g,!0);n(g),n(Ke),R(()=>{w(B,(e(be),u(()=>e(be).sku))),w(P,(e(be),u(()=>e(be).name)))}),h(Le,Ke)}),n(J),n(K),n(se),h(we,se)};ne(ze,we=>{e(d),u(()=>e(d).length===0)?we(me):we(_e,!1)},!0)}h(V,ve)};ne(W,V=>{e(p)?V(ie):V(Z,!1)},!0)}h(I,ce)};ne(E,I=>{e(v)?I(Pe):I(fe,!1)})}n(y),n(b),R(()=>w(z,e(o))),h(t,b),Dt()}var rp=C('<p class="muted svelte-blk23k">Loading...</p>'),np=C('<p class="muted svelte-blk23k"><!></p>'),sp=C('<div class="alert alert-error svelte-blk23k"> </div>'),ip=C('<div class="alert alert-success svelte-blk23k"> </div>'),lp=C("<!>",1),op=C("<option> </option>"),cp=C('<!> <!> <div class="top-form svelte-blk23k"><label class="svelte-blk23k"><!> <input type="text" class="svelte-blk23k"/></label> <label class="svelte-blk23k"><!> <input type="text" class="svelte-blk23k"/></label> <label class="svelte-blk23k"><!> <input type="text" class="svelte-blk23k"/></label> <label class="svelte-blk23k"><!> <input type="text" disabled class="svelte-blk23k"/></label></div> <div class="split svelte-blk23k"><div class="card main-card svelte-blk23k"><div class="card-title svelte-blk23k"><!></div> <div class="row svelte-blk23k"><div class="row-label"><!></div> <div class="row-value"> </div></div> <div class="row svelte-blk23k"><div class="row-label"><!></div> <div class="row-value"> </div></div></div> <div class="card svelte-blk23k"><div class="card-title svelte-blk23k"><!></div> <label class="select-label svelte-blk23k"><!> <select class="svelte-blk23k"><option><!></option><!></select></label> <div class="form-grid svelte-blk23k"><label class="svelte-blk23k"><!> <input type="text" class="svelte-blk23k"/></label> <label class="svelte-blk23k"><!> <input type="text" class="svelte-blk23k"/></label> <label class="svelte-blk23k"><!> <input type="text" class="svelte-blk23k"/></label> <label class="svelte-blk23k"><!> <input type="text" class="svelte-blk23k"/></label> <label class="span-2 svelte-blk23k"><!> <input type="text" class="svelte-blk23k"/></label></div></div></div>',1),dp=C('<section class="user-page svelte-blk23k"><div class="container svelte-blk23k"><div class="page-header svelte-blk23k"><h1 class="svelte-blk23k"><!></h1> <button class="btn-save svelte-blk23k"><i class="save outline icon"></i> </button></div> <!></div></section>');function vp(t,r){Rt(r,!1);const a=S();let l=$t(r,"language",8,"se"),o=S(null),d=S([]),v=S(""),p=S(!0),f=S(!1),_=S(""),m=S("");const b={se:{title:"Min sida",saveAll:"Spara alla uppgifter",saved:"Sparat.",notLoggedIn:"Du m&#229;ste logga in f&#246;r att se sidan.",firstName:"F&#246;rnamn",lastName:"Efternamn",phone:"Telefon/Mobil",email:"Anv&#228;ndarnamn / E-postadress (kan ej &#228;ndras)",mainCustomer:"Huvudkund",customerNo:"Kundnr.",customerName:"Kundnamn",deliveryTitle:"Se leveransadresser",deliverySelect:"V&#228;lj leveransadress",street:"Gatuadress",street2:"Gatuadress 2",zip:"Postnummer",city:"Postadress",country:"Land",customAddress:"(Egen adress)"},en:{title:"My page",saveAll:"Save all",saved:"Saved.",notLoggedIn:"You must log in to view this page.",firstName:"First name",lastName:"Last name",phone:"Phone/Mobile",email:"Username / Email (read only)",mainCustomer:"Main customer",customerNo:"Customer no.",customerName:"Customer name",deliveryTitle:"Delivery addresses",deliverySelect:"Select delivery address",street:"Street",street2:"Street 2",zip:"Postal code",city:"City",country:"Country",customAddress:"(Custom address)"},pl:{title:"Moja strona",saveAll:"Zapisz wszystko",saved:"Zapisano.",notLoggedIn:"Zaloguj si&#281;, aby zobaczy&#263; stron&#281;.",firstName:"Imi&#281;",lastName:"Nazwisko",phone:"Telefon",email:"Login / E-mail (tylko do odczytu)",mainCustomer:"G&#322;&#243;wny klient",customerNo:"Nr klienta",customerName:"Nazwa klienta",deliveryTitle:"Adresy dostawy",deliverySelect:"Wybierz adres dostawy",street:"Ulica",street2:"Ulica 2",zip:"Kod pocztowy",city:"Miasto",country:"Kraj",customAddress:"(W&#322;asny adres)"}};async function y(){var V;c(p,!0),c(_,""),c(m,"");try{c(o,await Hs()),c(d,await mc()),c(v,(V=e(o))!=null&&V.selected_delivery_address_id?String(e(o).selected_delivery_address_id):"")}catch(ve){c(o,null),c(_,(ve==null?void 0:ve.message)||"Failed to load user.")}finally{c(p,!1)}}async function x(){if(e(o)){c(f,!0),c(_,""),c(m,"");try{const V={first_name:e(o).first_name,last_name:e(o).last_name,phone:e(o).phone,selected_delivery_address_id:e(v)?Number(e(v)):null,billing:e(o).billing,shipping:e(o).shipping};c(o,await gc(V)),c(m,e(a).saved)}catch(V){c(_,(V==null?void 0:V.message)||"Save failed.")}finally{c(f,!1)}}}va(y);function T(){if(!e(o)||!e(v))return;const V=e(d).find(ve=>String(ve.id)===String(e(v)));V&&c(o,{...e(o),shipping:{...e(o).shipping,attn_first_name:V.attn_first_name||"",attn_last_name:V.attn_last_name||"",street:V.street||"",street_2:V.street_2||"",zip_code:V.zip_code||"",postal_area:V.postal_area||"",country:V.country||""}})}ft(()=>ut(l()),()=>{c(a,b[l()]||b.se)}),wa(),Ot();var re=dp(),z=s(re),E=s(z),Pe=s(E),fe=s(Pe);Re(fe,()=>(e(a),u(()=>e(a).title))),n(Pe);var I=i(Pe,2),ce=i(s(I));n(I),n(E);var W=i(E,2);{var ie=V=>{var ve=rp();h(V,ve)},Z=V=>{var ve=ot(),ze=Oe(ve);{var me=we=>{var se=np(),K=s(se);Re(K,()=>(e(a),u(()=>e(a).notLoggedIn))),n(se),h(we,se)},_e=we=>{var se=cp(),K=Oe(se);{var Ne=te=>{var je=sp(),Ge=s(je,!0);n(je),R(()=>w(Ge,e(_))),h(te,je)};ne(K,te=>{e(_)&&te(Ne)})}var ye=i(K,2);{var Ae=te=>{var je=ip(),Ge=s(je,!0);n(je),R(()=>w(Ge,e(m))),h(te,je)};ne(ye,te=>{e(m)&&te(Ae)})}var ke=i(ye,2),Se=s(ke),qe=s(Se);Re(qe,()=>(e(a),u(()=>e(a).firstName)));var He=i(qe,2);ae(He),n(Se);var H=i(Se,2),J=s(H);Re(J,()=>(e(a),u(()=>e(a).phone)));var Le=i(J,2);ae(Le),n(H);var be=i(H,2),Ke=s(be);Re(Ke,()=>(e(a),u(()=>e(a).lastName)));var ee=i(Ke,2);ae(ee),n(be);var O=i(be,2),he=s(O);Re(he,()=>(e(a),u(()=>e(a).email)));var M=i(he,2);ae(M),n(O),n(ke);var k=i(ke,2),B=s(k),g=s(B),P=s(g);Re(P,()=>(e(a),u(()=>e(a).mainCustomer))),n(g);var A=i(g,2),N=s(A),G=s(N);Re(G,()=>(e(a),u(()=>e(a).customerNo))),n(N);var F=i(N,2),Y=s(F,!0);n(F),n(A);var Q=i(A,2),Me=s(Q),Ee=s(Me);Re(Ee,()=>(e(a),u(()=>e(a).customerName))),n(Me);var Ce=i(Me,2),Je=s(Ce,!0);n(Ce),n(Q),n(B);var Be=i(B,2),le=s(Be),$=s(le);Re($,()=>(e(a),u(()=>e(a).deliveryTitle))),n(le);var D=i(le,2),U=s(D);Re(U,()=>(e(a),u(()=>e(a).deliverySelect)));var q=i(U,2);R(()=>{e(v),da(()=>{e(a),e(d)})});var X=s(q);Xo(X,()=>{var te=s(X),je=lp(),Ge=Oe(je);Re(Ge,()=>(e(a),u(()=>e(a).customAddress))),h(te,je)}),X.value=X.__value="";var Te=i(X);at(Te,1,()=>e(d),st,(te,je)=>{var Ge=op(),lt=s(Ge);n(Ge);var Xe={};R(Ve=>{w(lt,`${e(je),u(()=>e(je).street)??""} ${e(je),u(()=>e(je).zip_code)??""}`),Xe!==(Xe=Ve)&&(Ge.value=(Ge.__value=Ve)??"")},[()=>(e(je),u(()=>String(e(je).id)))]),h(te,Ge)}),n(q),n(D);var de=i(D,2),xe=s(de),ge=s(xe);Re(ge,()=>(e(a),u(()=>e(a).street)));var Ze=i(ge,2);ae(Ze),n(xe);var it=i(xe,2),rt=s(it);Re(rt,()=>(e(a),u(()=>e(a).street2)));var j=i(rt,2);ae(j),n(it);var pe=i(it,2),$e=s(pe);Re($e,()=>(e(a),u(()=>e(a).zip)));var Ye=i($e,2);ae(Ye),n(pe);var et=i(pe,2),Qe=s(et);Re(Qe,()=>(e(a),u(()=>e(a).city)));var We=i(Qe,2);ae(We),n(et);var Ue=i(et,2),Ie=s(Ue);Re(Ie,()=>(e(a),u(()=>e(a).country)));var ue=i(Ie,2);ae(ue),n(Ue),n(de),n(Be),n(k),R(()=>{vt(M,(e(o),u(()=>e(o).email))),w(Y,(e(o),u(()=>{var te;return((te=e(o).company)==null?void 0:te.customer_number)||""}))),w(Je,(e(o),u(()=>{var te;return((te=e(o).company)==null?void 0:te.name)||""})))}),De(He,()=>e(o).first_name,te=>Fe(o,e(o).first_name=te)),De(Le,()=>e(o).phone,te=>Fe(o,e(o).phone=te)),De(ee,()=>e(o).last_name,te=>Fe(o,e(o).last_name=te)),Ta(q,()=>e(v),te=>c(v,te)),L("change",q,T),De(Ze,()=>e(o).shipping.street,te=>Fe(o,e(o).shipping.street=te)),De(j,()=>e(o).shipping.street_2,te=>Fe(o,e(o).shipping.street_2=te)),De(Ye,()=>e(o).shipping.zip_code,te=>Fe(o,e(o).shipping.zip_code=te)),De(We,()=>e(o).shipping.postal_area,te=>Fe(o,e(o).shipping.postal_area=te)),De(ue,()=>e(o).shipping.country,te=>Fe(o,e(o).shipping.country=te)),h(we,se)};ne(ze,we=>{e(o)?we(_e,!1):we(me)},!0)}h(V,ve)};ne(W,V=>{e(p)?V(ie):V(Z,!1)})}n(z),n(re),R(()=>{I.disabled=e(f)||!e(o),w(ce,` ${e(f),e(a),u(()=>e(f)?"...":e(a).saveAll)??""}`)}),L("click",I,x),h(t,re),Dt()}var up=C('<tr><td colspan="7" class="empty svelte-1yrde8r">Kundvagnen Ã¤r tom.</td></tr>'),fp=C('<tr><td class="svelte-1yrde8r"> </td><td class="svelte-1yrde8r"> </td><td class="svelte-1yrde8r"><input type="number" class="qty-input svelte-1yrde8r" min="1"/></td><td class="svelte-1yrde8r"> </td><td class="svelte-1yrde8r"> </td><td class="bold svelte-1yrde8r"> </td><td class="svelte-1yrde8r"><button class="icon-btn remove-btn svelte-1yrde8r" aria-label="Ta bort produkt"><i class="trash alternate outline icon"></i></button></td></tr>'),pp=C('<div class="cart-summary svelte-1yrde8r"><span class="total-label svelte-1yrde8r">Totalt:</span> <span class="total-value svelte-1yrde8r"> </span></div>'),_p=C('<div class="cart-modal-backdrop svelte-1yrde8r" role="button" tabindex="-1" aria-label="Close cart"><div class="cart-modal svelte-1yrde8r" role="dialog" aria-modal="true" tabindex="-1"><div class="cart-header svelte-1yrde8r"><h2 class="svelte-1yrde8r"><i class="shopping cart icon"></i> Kundvagn</h2></div> <div class="cart-body svelte-1yrde8r"><table class="cart-table svelte-1yrde8r"><thead><tr><th class="svelte-1yrde8r">Artikel.nr</th><th class="svelte-1yrde8r">Produkt</th><th class="svelte-1yrde8r">Antal</th><th class="svelte-1yrde8r">Listpris</th><th class="svelte-1yrde8r">Nettopris</th><th class="svelte-1yrde8r">Totalt</th><th class="svelte-1yrde8r"></th></tr></thead><tbody><!></tbody></table> <!></div> <div class="cart-footer svelte-1yrde8r"><div class="left-actions svelte-1yrde8r"><button class="btn btn-secondary svelte-1yrde8r"><i class="times icon"></i> StÃ¤ng</button> <button class="btn btn-secondary svelte-1yrde8r"><i class="trash icon"></i> TÃ¶m kundvagn</button></div> <div class="right-actions svelte-1yrde8r"><button class="btn btn-primary svelte-1yrde8r"><i class="check icon"></i> GÃ¥ till kassan</button></div></div></div></div>');function hp(t,r){Rt(r,!1);const a=()=>Nn(kr,"$cart",o),l=()=>Nn(wl,"$cartTotal",o),[o,d]=Ws();let v=$t(r,"currency",8,"SEK"),p=$t(r,"currencyRate",8,1),f=$t(r,"onNavigate",8,()=>{});const _=Dn();function m(){_("close")}function b(me,_e){return me?(Number(me)/(_e||1)).toFixed(2).replace(".",",")+" "+v():"0,00"}Ot();var y=_p(),x=s(y),T=i(s(x),2),re=s(T),z=i(s(re)),E=s(z);{var Pe=me=>{var _e=up();h(me,_e)},fe=me=>{var _e=ot(),we=Oe(_e);at(we,1,a,st,(se,K)=>{var Ne=fp(),ye=s(Ne),Ae=s(ye,!0);n(ye);var ke=i(ye),Se=s(ke,!0);n(ke);var qe=i(ke),He=s(qe);ae(He),n(qe);var H=i(qe),J=s(H,!0);n(H);var Le=i(H),be=s(Le,!0);n(Le);var Ke=i(Le),ee=s(Ke,!0);n(Ke);var O=i(Ke),he=s(O);n(O),n(Ne),R((M,k,B)=>{w(Ae,(e(K),u(()=>e(K).sku))),w(Se,(e(K),u(()=>e(K).name))),vt(He,(e(K),u(()=>e(K).qty))),w(J,M),w(be,k),w(ee,B)},[()=>(e(K),ut(p()),u(()=>b(e(K).price,p()))),()=>(e(K),ut(p()),u(()=>b(e(K).price,p()))),()=>(e(K),ut(p()),u(()=>b(e(K).price*e(K).qty,p())))]),L("change",He,M=>Sl(e(K).sku,Number(M.target.value))),L("click",he,()=>xl(e(K).sku)),h(se,Ne)}),h(me,_e)};ne(E,me=>{a(),u(()=>a().length===0)?me(Pe):me(fe,!1)})}n(z),n(re);var I=i(re,2);{var ce=me=>{var _e=pp(),we=i(s(_e),2),se=s(we,!0);n(we),n(_e),R(K=>w(se,K),[()=>(l(),ut(p()),u(()=>b(l(),p())))]),h(me,_e)};ne(I,me=>{a(),u(()=>a().length>0)&&me(ce)})}n(T);var W=i(T,2),ie=s(W),Z=s(ie),V=i(Z,2);n(ie);var ve=i(ie,2),ze=s(ve);n(ve),n(W),n(x),n(y),R(()=>{V.disabled=(a(),u(()=>a().length===0)),ze.disabled=(a(),u(()=>a().length===0))}),L("click",Z,m),L("click",V,function(...me){Zr==null||Zr.apply(this,me)}),L("click",ze,()=>f()("/checkout")),L("click",x,En(function(me){Pn.call(this,r,me)})),L("keydown",x,En(function(me){Pn.call(this,r,me)})),L("click",y,m),L("keydown",y,me=>me.key==="Escape"&&m()),h(t,y),Dt(),d()}var gp=C('<div class="error svelte-1hqjh1e"> </div>'),mp=C('<div class="login-modal-backdrop svelte-1hqjh1e" role="button" tabindex="-1" aria-label="Close login"><div class="login-modal svelte-1hqjh1e" role="dialog" aria-modal="true" tabindex="-1"><div class="login-header svelte-1hqjh1e"><h2 class="svelte-1hqjh1e">Logga in p&#229; ditt konto</h2></div> <div class="login-body svelte-1hqjh1e"><div class="field svelte-1hqjh1e"><label class="sr-only" for="login-email">Anv&#228;ndarnamn / E-postadress</label> <div class="input-icon svelte-1hqjh1e"><i class="user icon" aria-hidden="true"></i> <input id="login-email" type="text" placeholder="AnvÃ¤ndarnamn / E-postadress" autocomplete="username" class="svelte-1hqjh1e"/></div></div> <div class="field svelte-1hqjh1e"><label class="sr-only" for="login-password">L&#246;senord</label> <div class="input-icon svelte-1hqjh1e"><i class="lock icon" aria-hidden="true"></i> <input id="login-password" type="password" placeholder="LÃ¶senord" autocomplete="current-password" class="svelte-1hqjh1e"/></div></div> <!> <button class="btn-login svelte-1hqjh1e"> </button> <div class="login-meta svelte-1hqjh1e"><button class="link svelte-1hqjh1e" type="button">Gl&#246;mt l&#246;senord?</button></div></div> <div class="login-footer svelte-1hqjh1e"><button class="btn-close svelte-1hqjh1e"><i class="times icon"></i> St&#228;ng</button></div></div></div>');function yp(t,r){Rt(r,!1);const a=Dn();let l=S(""),o=S(""),d=S(""),v=S(!1);function p(){a("close")}async function f(){c(d,""),c(v,!0);try{const Z=await pc(e(l),e(o));a("success",{user:Z}),p()}catch(Z){c(d,(Z==null?void 0:Z.message)||"Login failed.")}finally{c(v,!1)}}Ot();var _=mp(),m=s(_),b=i(s(m),2),y=s(b),x=i(s(y),2),T=i(s(x),2);ae(T),n(x),n(y);var re=i(y,2),z=i(s(re),2),E=i(s(z),2);ae(E),n(z),n(re);var Pe=i(re,2);{var fe=Z=>{var V=gp(),ve=s(V,!0);n(V),R(()=>w(ve,e(d))),h(Z,V)};ne(Pe,Z=>{e(d)&&Z(fe)})}var I=i(Pe,2),ce=s(I,!0);n(I),Vt(2),n(b);var W=i(b,2),ie=s(W);n(W),n(m),n(_),R(()=>{I.disabled=e(v),w(ce,e(v)?"Loggar in...":"Logga in")}),De(T,()=>e(l),Z=>c(l,Z)),De(E,()=>e(o),Z=>c(o,Z)),L("click",I,f),L("click",ie,p),L("click",m,En(function(Z){Pn.call(this,r,Z)})),L("keydown",m,En(function(Z){Pn.call(this,r,Z)})),L("click",_,p),L("keydown",_,Z=>Z.key==="Escape"&&p()),h(t,_),Dt()}var bp=C('<div class="admin-brand__stats"><span class="badge badge--categories"> </span> <span class="badge badge--products"> </span> <span class="badge badge--main"> </span></div>'),kp=C("<button> </button>"),wp=C("<button> </button>"),xp=C("<button> </button>"),Sp=C("<button> </button>"),Cp=C('<div class="admin-shell"><div class="admin-layout"><header class="admin-top"><div class="admin-brand"><h1>Spare Parts Manager</h1> <p>Lean import pipeline for products, categories, and images.</p> <!></div></header> <div class="admin-body"><aside class="admin-sidebar"><nav class="admin-nav" aria-label="Admin"><div class="admin-nav__section admin-nav__section--core"><div class="admin-nav__title">Core</div> <!></div> <div class="admin-nav__section admin-nav__section--management"><div class="admin-nav__title">Management</div> <!></div> <div class="admin-nav__section admin-nav__section--utilities"><div class="admin-nav__title">Utilities</div> <!></div> <div class="admin-nav__section admin-nav__section--system"><div class="admin-nav__title">System</div> <!></div></nav></aside> <main class="admin-main"><header class="admin-header"><div><h2> </h2></div></header> <div class="panel"><!></div></main></div></div></div>'),Ep=C('<a class="dropdown-meta-value link"> </a>'),Pp=C('<span class="dropdown-meta-value"> </span>'),Np=C('<button type="button"> </button>'),Tp=C('<button class="dropdown-item" type="button"><i class="user circle outline icon" aria-hidden="true"></i> </button> <button class="dropdown-item" type="button"><i class="sign out alternate icon" aria-hidden="true"></i> </button>',1),Lp=C('<button class="dropdown-item" type="button"><i class="user plus icon" aria-hidden="true"></i> </button> <button class="dropdown-item" type="button"><i class="sign in alternate icon" aria-hidden="true"></i> </button>',1),zp=C('<div class="public-shell"><div class="top-stripe" aria-hidden="true"></div> <header class="site-header"><div class="container header-inner"><div class="brand"><a href="/"><img src="/design/assets/swepac-logo.png" alt="Swepac" class="brand-mark"/></a></div> <nav class="main-nav" aria-label="Primary"><div class="nav-item"><button type="button"> <span class="caret" aria-hidden="true"></span></button> <div class="dropdown"><a href="/products" class="dropdown-item"><i class="boxes icon" aria-hidden="true"></i> </a> <div class="dropdown-item dropdown-item--meta"><i class="clipboard list icon" aria-hidden="true"></i> <div class="dropdown-meta-text"><span class="dropdown-meta-label"> </span> <!></div></div></div></div> <div class="nav-item"><button class="nav-trigger" type="button"> <span class="caret" aria-hidden="true"></span></button> <div class="dropdown dropdown--account"><div class="dropdown-block"><div class="dropdown-block__title"><i class="money bill alternate outline icon" aria-hidden="true"></i> </div> <div class="pill-list"></div></div> <!> <button class="dropdown-item" type="button"><i class="info circle icon" aria-hidden="true"></i> </button></div></div></nav> <div class="nav-controls"><div class="nav-item language"><button class="nav-trigger" type="button" aria-label="Change language"><i aria-hidden="true"></i> <span class="caret" aria-hidden="true"></span></button> <div class="dropdown"><button class="flag-option"><i class="fi fi-gb" aria-hidden="true"></i> English</button> <button class="flag-option"><i class="fi fi-se" aria-hidden="true"></i> Svenska</button> <button class="flag-option"><i class="fi fi-pl" aria-hidden="true"></i> Polski</button></div></div> <form class="search" role="search"><label class="sr-only" for="search-input">Search articles</label> <input id="search-input" type="search"/> <button type="submit" aria-label="Search"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M12.9 14.32a8 8 0 1 1 1.41-1.41l5.35 5.33-1.42 1.42-5.33-5.34zM8 14A6 6 0 1 0 8 2a6 6 0 0 0 0 12z"></path></svg></button></form> <button class="cart" type="button"><span class="cart-label"><i class="shopping cart icon" aria-hidden="true"></i> </span> <span class="cart-count"> </span></button></div></div></header> <main><!></main> <!> <!></div>');function $p(t,r){Rt(r,!1);const a=()=>Nn(rf,"$cartCount",l),[l,o]=Ws(),d=S(),v=S(),p=S(),f=S(),_=S(),m=S(),b=S(),y=S(),x=S(),T=S(),re=S(),z=S(),E=S(),Pe=S(),fe=S();let I=S("import"),ce=S(null),W="/",ie=S("/"),Z="",V=S("se"),ve=S(""),ze=S({}),me=S(""),_e=S(!1),we=S(!1),se=S(null);const K={se:"se",en:"gb",pl:"pl"},Ne={se:{spareParts:"Reservdelar",allProducts:"Alla produkter",selectedLabel:"Vald produkt",selectedNone:"Ingen",account:"Konto",currency:"Valuta",accountLogin:"Logga in",accountMyPage:"Min sida",accountLogout:"Logga ut",accountInfo:"Info / Kontakt",accountRegister:"Skapa konto",cart:"Kundvagn"},en:{spareParts:"Spare parts",allProducts:"All products",selectedLabel:"Selected product",selectedNone:"None",account:"Account",currency:"Currency",accountLogin:"Sign in",accountMyPage:"My page",accountLogout:"Log out",accountInfo:"Info / Contact",accountRegister:"Create account",cart:"Shopping cart"},pl:{spareParts:"CzÄÅci zamienne",allProducts:"Wszystkie produkty",selectedLabel:"Wybrany produkt",selectedNone:"Brak",account:"Konto",currency:"Waluta",accountLogin:"Zaloguj siÄ",accountMyPage:"Moja strona",accountLogout:"Wyloguj",accountInfo:"Informacje / Kontakt",accountRegister:"Utw&#243;rz konto",cart:"Koszyk"}},ye={se:"SÃ¶k artiklar...",en:"Search articles...",pl:"Szukaj artykuÅÃ³w..."};let Ae=S(["EUR","NOK","PLN","SEK","USD"]),ke=S("SEK"),Se=S(null);const qe=[{id:"import",label:"Import"},{id:"category-editor",label:"Category editor"},{id:"product-editor",label:"Product editor"},{id:"main-products",label:"Main products"},{id:"machine-categories",label:"Machine categories"}],He=[{id:"users",label:"Users"},{id:"companies",label:"Companies"},{id:"delivery-addresses",label:"Delivery addresses"},{id:"ce",label:"CE / Motorintyg"}],H=[{id:"pricelist",label:"Prices & currency"},{id:"language",label:"Languages"},{id:"image-maps",label:"Image maps"}],J=[{id:"json",label:"Cache reload"}],Le=[...qe,...He,...H,...J];function be(Y){c(I,Y)}function Ke(){c(ie,window.location.pathname||"/"),Z=window.location.search||"",W=e(ie)+Z}function ee(Y){Y!==W&&(window.history.pushState({},"",Y),Ke(),window.scrollTo({top:0,behavior:"smooth"}))}async function O(){try{c(ce,await ic())}catch{c(ce,null)}}async function he(){var Y;try{c(Se,await Lu()),(Y=e(Se))!=null&&Y.currencies&&(c(Ae,e(Se).currencies.map(Q=>Q.code)),e(Se).baseCurrency&&!e(ke)&&c(ke,e(Se).baseCurrency))}catch(Q){console.error("Failed to load currency settings",Q)}}va(()=>{Ke(),O(),he(),Hs().then(Q=>{c(se,Q)}).catch(()=>{c(se,null)});const Y=localStorage.getItem("sp-language");return Y&&c(V,Y),window.addEventListener("popstate",Ke),()=>window.removeEventListener("popstate",Ke)});function M(Y){c(V,Y),localStorage.setItem("sp-language",Y)}function k(Y){c(ke,Y)}function B(Y){const Q=(Y==null?void 0:Y.detail)||null;c(ve,(Q==null?void 0:Q.key)||""),c(ze,(Q==null?void 0:Q.names)||{}),c(me,(Q==null?void 0:Q.fallback)||"")}function g(Y){var Me,Ee;Y.preventDefault();const Q=((Ee=(Me=Y.currentTarget)==null?void 0:Me.querySelector("input"))==null?void 0:Ee.value)||"";Q.trim()&&ee(`/search?query=${encodeURIComponent(Q.trim())}`)}async function P(){try{await _c()}finally{c(se,null)}}ft(()=>(e(Se),e(ke)),()=>{var Y,Q;c(d,((Q=(((Y=e(Se))==null?void 0:Y.currencies)||[]).find(Me=>Me.code===e(ke)))==null?void 0:Q.rate)||1)}),ft(()=>e(I),()=>{var Y;c(v,((Y=Le.find(Q=>Q.id===e(I)))==null?void 0:Y.label)||"Import")}),ft(()=>e(ie),()=>{c(p,e(ie).startsWith("/admin"))}),ft(()=>(e(p),e(ie)),()=>{c(f,e(p)?"/":e(ie))}),ft(()=>e(f),()=>{c(_,e(f).startsWith("/category/"))}),ft(()=>e(f),()=>{c(m,e(f)==="/info")}),ft(()=>e(f),()=>{c(b,e(f)==="/user")}),ft(()=>e(f),()=>{c(y,e(f)==="/register")}),ft(()=>e(f),()=>{c(x,e(f)==="/checkout")}),ft(()=>e(f),()=>{c(T,e(f)==="/search")}),ft(()=>(e(_),e(f)),()=>{c(re,e(_)?decodeURIComponent(e(f).replace("/category/","")):"")}),ft(()=>e(f),()=>{c(z,e(f)==="/products")}),ft(()=>e(V),()=>{c(E,Ne[e(V)]||Ne.se)}),ft(()=>e(V),()=>{c(Pe,ye[e(V)]||ye.se)}),ft(()=>(e(ve),e(ze),e(V),e(me),e(E)),()=>{var Y;c(fe,e(ve)?((Y=e(ze))==null?void 0:Y[e(V)])||e(me)||e(ve):e(E).selectedNone)}),wa(),Ot();var A=ot(),N=Oe(A);{var G=Y=>{var Q=Cp(),Me=s(Q),Ee=s(Me),Ce=s(Ee),Je=i(s(Ce),4);{var Be=Ue=>{var Ie=bp(),ue=s(Ie),te=s(ue);n(ue);var je=i(ue,2),Ge=s(je);n(je);var lt=i(je,2),Xe=s(lt);n(lt),n(Ie),R(()=>{w(te,`Categories: ${e(ce),u(()=>e(ce).categoryCount)??""}`),w(Ge,`Products: ${e(ce),u(()=>e(ce).productCount)??""}`),w(Xe,`Main keys: ${e(ce),u(()=>e(ce).mainCount)??""}`)}),h(Ue,Ie)};ne(Je,Ue=>{e(ce)&&Ue(Be)})}n(Ce),n(Ee);var le=i(Ee,2),$=s(le),D=s($),U=s(D),q=i(s(U),2);at(q,1,()=>qe,st,(Ue,Ie)=>{var ue=kp(),te=s(ue,!0);n(ue),R(()=>{St(ue,1,(e(I),e(Ie),u(()=>`admin-nav__item ${e(I)===e(Ie).id?"active":""}`))),w(te,(e(Ie),u(()=>e(Ie).label)))}),L("click",ue,()=>be(e(Ie).id)),h(Ue,ue)}),n(U);var X=i(U,2),Te=i(s(X),2);at(Te,1,()=>He,st,(Ue,Ie)=>{var ue=wp(),te=s(ue,!0);n(ue),R(()=>{St(ue,1,(e(I),e(Ie),u(()=>`admin-nav__item ${e(I)===e(Ie).id?"active":""}`))),w(te,(e(Ie),u(()=>e(Ie).label)))}),L("click",ue,()=>be(e(Ie).id)),h(Ue,ue)}),n(X);var de=i(X,2),xe=i(s(de),2);at(xe,1,()=>H,st,(Ue,Ie)=>{var ue=xp(),te=s(ue,!0);n(ue),R(()=>{St(ue,1,(e(I),e(Ie),u(()=>`admin-nav__item ${e(I)===e(Ie).id?"active":""}`))),w(te,(e(Ie),u(()=>e(Ie).label)))}),L("click",ue,()=>be(e(Ie).id)),h(Ue,ue)}),n(de);var ge=i(de,2),Ze=i(s(ge),2);at(Ze,1,()=>J,st,(Ue,Ie)=>{var ue=Sp(),te=s(ue,!0);n(ue),R(()=>{St(ue,1,(e(I),e(Ie),u(()=>`admin-nav__item ${e(I)===e(Ie).id?"active":""}`))),w(te,(e(Ie),u(()=>e(Ie).label)))}),L("click",ue,()=>be(e(Ie).id)),h(Ue,ue)}),n(ge),n(D),n($);var it=i($,2),rt=s(it),j=s(rt),pe=s(j),$e=s(pe,!0);n(pe),n(j),n(rt);var Ye=i(rt,2),et=s(Ye);{var Qe=Ue=>{td(Ue,{})},We=Ue=>{var Ie=ot(),ue=Oe(Ie);{var te=Ge=>{fi(Ge,{mode:"categories"})},je=Ge=>{var lt=ot(),Xe=Oe(lt);{var Ve=nt=>{fi(nt,{mode:"products"})},_t=nt=>{var Nt=ot(),gt=Oe(Nt);{var Ut=tt=>{Ud(tt,{})},pt=tt=>{var At=ot(),Mt=Oe(At);{var mt=ht=>{ld(ht,{})},Lt=ht=>{var qt=ot(),Jt=Oe(qt);{var ua=Wt=>{nu(Wt,{})},Xt=Wt=>{var ia=ot(),qa=Oe(ia);{var fa=dt=>{du(dt,{})},Gt=dt=>{var Et=ot(),zt=Oe(Et);{var Bt=jt=>{yu(jt,{})},Kt=jt=>{var la=ot(),Xa=Oe(la);{var oa=ea=>{Tv(ea,{})},ta=ea=>{var ja=ot(),wr=Oe(ja);{var It=Yt=>{Gv(Yt,{})},dr=Yt=>{var xr=ot(),Kr=Oe(xr);{var qr=Sa=>{yv(Sa,{})},ds=Sa=>{var mn=ot(),vs=Oe(mn);{var us=Ca=>{bd(Ca,{})},fs=Ca=>{fd(Ca,{})};ne(vs,Ca=>{e(I)==="language"?Ca(us):Ca(fs,!1)},!0)}h(Sa,mn)};ne(Kr,Sa=>{e(I)==="ce"?Sa(qr):Sa(ds,!1)},!0)}h(Yt,xr)};ne(wr,Yt=>{e(I)==="image-maps"?Yt(It):Yt(dr,!1)},!0)}h(ea,ja)};ne(Xa,ea=>{e(I)==="machine-categories"?ea(oa):ea(ta,!1)},!0)}h(jt,la)};ne(zt,jt=>{e(I)==="delivery-addresses"?jt(Bt):jt(Kt,!1)},!0)}h(dt,Et)};ne(qa,dt=>{e(I)==="companies"?dt(fa):dt(Gt,!1)},!0)}h(Wt,ia)};ne(Jt,Wt=>{e(I)==="users"?Wt(ua):Wt(Xt,!1)},!0)}h(ht,qt)};ne(Mt,ht=>{e(I)==="pricelist"?ht(mt):ht(Lt,!1)},!0)}h(tt,At)};ne(gt,tt=>{e(I)==="main-products"?tt(Ut):tt(pt,!1)},!0)}h(nt,Nt)};ne(Xe,nt=>{e(I)==="product-editor"?nt(Ve):nt(_t,!1)},!0)}h(Ge,lt)};ne(ue,Ge=>{e(I)==="category-editor"?Ge(te):Ge(je,!1)},!0)}h(Ue,Ie)};ne(et,Ue=>{e(I)==="import"?Ue(Qe):Ue(We,!1)})}n(Ye),n(it),n(le),n(Me),n(Q),R(()=>w($e,e(v))),h(Y,Q)},F=Y=>{var Q=zp(),Me=i(s(Q),2),Ee=s(Me),Ce=s(Ee),Je=s(Ce);n(Ce);var Be=i(Ce,2),le=s(Be),$=s(le);let D;var U=s($);Vt(),n($);var q=i($,2),X=s(q),Te=i(s(X));n(X);var de=i(X,2),xe=i(s(de),2),ge=s(xe),Ze=s(ge,!0);n(ge);var it=i(ge,2);{var rt=dt=>{var Et=Ep(),zt=s(Et,!0);n(Et),R(()=>{ct(Et,"href",`/category/${e(ve)}`),w(zt,e(fe))}),L("click",Et,Ja(()=>ee(`/category/${e(ve)}`))),h(dt,Et)},j=dt=>{var Et=Pp(),zt=s(Et,!0);n(Et),R(()=>w(zt,e(fe))),h(dt,Et)};ne(it,dt=>{e(ve)?dt(rt):dt(j,!1)})}n(xe),n(de),n(q),n(le);var pe=i(le,2),$e=s(pe),Ye=s($e);Vt(),n($e);var et=i($e,2),Qe=s(et),We=s(Qe),Ue=i(s(We));n(We);var Ie=i(We,2);at(Ie,5,()=>e(Ae),st,(dt,Et)=>{var zt=Np(),Bt=s(zt,!0);n(zt),R(()=>{St(zt,1,`pill ${e(Et)===e(ke)?"active":""}`),w(Bt,e(Et))}),L("click",zt,()=>k(e(Et))),h(dt,zt)}),n(Ie),n(Qe);var ue=i(Qe,2);{var te=dt=>{var Et=Tp(),zt=Oe(Et),Bt=i(s(zt));n(zt);var Kt=i(zt,2),jt=i(s(Kt));n(Kt),R(()=>{w(Bt,` ${e(E),u(()=>e(E).accountMyPage)??""}`),w(jt,` ${e(E),u(()=>e(E).accountLogout)??""}`)}),L("click",zt,()=>ee("/user")),L("click",Kt,P),h(dt,Et)},je=dt=>{var Et=Lp(),zt=Oe(Et),Bt=i(s(zt));n(zt);var Kt=i(zt,2),jt=i(s(Kt));n(Kt),R(()=>{w(Bt,` ${e(E),u(()=>e(E).accountRegister)??""}`),w(jt,` ${e(E),u(()=>e(E).accountLogin)??""}`)}),L("click",zt,()=>ee("/register")),L("click",Kt,()=>c(we,!0)),h(dt,Et)};ne(ue,dt=>{e(se)?dt(te):dt(je,!1)})}var Ge=i(ue,2),lt=i(s(Ge));n(Ge),n(et),n(pe),n(Be);var Xe=i(Be,2),Ve=s(Xe),_t=s(Ve),nt=s(_t);Vt(2),n(_t);var Nt=i(_t,2),gt=s(Nt),Ut=i(gt,2),pt=i(Ut,2);n(Nt),n(Ve);var tt=i(Ve,2),At=i(s(tt),2);Vt(2),n(tt);var Mt=i(tt,2),mt=s(Mt),Lt=i(s(mt));n(mt);var ht=i(mt,2),qt=s(ht,!0);n(ht),n(Mt),n(Xe),n(Ee),n(Me);var Jt=i(Me,2),ua=s(Jt);{var Xt=dt=>{Pf(dt,{get categoryKey(){return e(re)},get language(){return e(V)},get currency(){return e(ke)},get currencyRate(){return e(d)},onNavigate:ee,$$events:{productChange:B}})},Wt=dt=>{var Et=ot(),zt=Oe(Et);{var Bt=jt=>{Tf(jt,{get language(){return e(V)}})},Kt=jt=>{var la=ot(),Xa=Oe(la);{var oa=ea=>{Df(ea,{get language(){return e(V)}})},ta=ea=>{var ja=ot(),wr=Oe(ja);{var It=Yt=>{vp(Yt,{get language(){return e(V)}})},dr=Yt=>{var xr=ot(),Kr=Oe(xr);{var qr=Sa=>{Jf(Sa,{get language(){return e(V)},get currency(){return e(ke)},get currencyRate(){return e(d)}})},ds=Sa=>{var mn=ot(),vs=Oe(mn);{var us=Ca=>{ap(Ca,{get language(){return e(V)}})},fs=Ca=>{var Gs=ot(),El=Oe(Gs);{var Pl=Br=>{tf(Br,{onNavigate:ee,get language(){return e(V)}})},Nl=Br=>{ku(Br,{onNavigate:ee,get language(){return e(V)}})};ne(El,Br=>{e(z)?Br(Pl):Br(Nl,!1)},!0)}h(Ca,Gs)};ne(vs,Ca=>{e(T)?Ca(us):Ca(fs,!1)},!0)}h(Sa,mn)};ne(Kr,Sa=>{e(x)?Sa(qr):Sa(ds,!1)},!0)}h(Yt,xr)};ne(wr,Yt=>{e(b)?Yt(It):Yt(dr,!1)},!0)}h(ea,ja)};ne(Xa,ea=>{e(y)?ea(oa):ea(ta,!1)},!0)}h(jt,la)};ne(zt,jt=>{e(m)?jt(Bt):jt(Kt,!1)},!0)}h(dt,Et)};ne(ua,dt=>{e(_)?dt(Xt):dt(Wt,!1)})}n(Jt);var ia=i(Jt,2);{var qa=dt=>{hp(dt,{get currency(){return e(ke)},get currencyRate(){return e(d)},onNavigate:Et=>{c(_e,!1),ee(Et)},$$events:{close:()=>c(_e,!1)}})};ne(ia,dt=>{e(_e)&&dt(qa)})}var fa=i(ia,2);{var Gt=dt=>{yp(dt,{$$events:{close:()=>c(we,!1),success:Et=>{c(se,Et.detail.user)}}})};ne(fa,dt=>{e(we)&&dt(Gt)})}n(Q),R(()=>{D=St($,1,"nav-trigger",null,D,{"active-nav":e(z)||e(_)}),w(U,`${e(E),u(()=>e(E).spareParts)??""} `),w(Te,` ${e(E),u(()=>e(E).allProducts)??""}`),w(Ze,(e(E),u(()=>e(E).selectedLabel))),w(Ye,`${e(E),u(()=>e(E).account)??""} `),w(Ue,` ${e(E),u(()=>e(E).currency)??""}`),w(lt,` ${e(E),u(()=>e(E).accountInfo)??""}`),St(nt,1,(e(V),u(()=>`fi fi-${K[e(V)]||"gb"}`))),ct(At,"placeholder",e(Pe)),w(Lt,` ${e(E),u(()=>e(E).cart)??""}`),w(qt,a())}),L("click",Je,Ja(()=>ee("/"))),L("click",X,Ja(()=>ee("/products"))),L("click",Ge,()=>ee("/info")),L("click",gt,()=>M("en")),L("click",Ut,()=>M("se")),L("click",pt,()=>M("pl")),L("submit",tt,g),L("click",Mt,()=>c(_e,!0)),h(Y,Q)};ne(N,Y=>{e(p)?Y(G):Y(F,!1)})}h(t,A),Dt(),o()}Fo($p,{target:document.getElementById("app")});
